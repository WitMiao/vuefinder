(function(e,Ne){typeof exports=="object"&&typeof module<"u"?module.exports=Ne(require("vue"),require("plupload")):typeof define=="function"&&define.amd?define(["vue","plupload"],Ne):(e=typeof globalThis<"u"?globalThis:e||self,e.VueFinder=Ne(e.Vue,e.plupload))})(this,function(e,Ne){"use strict";const qe=(a=>a&&typeof a=="object"&&"default"in a?a:{default:a})(Ne),Ie=(a,{method:t="get",params:r={},json:i=!0})=>{const l={method:t};if(t=="get")a+="?"+new URLSearchParams(r);else{l.headers={};let n=new FormData;for(const[d,u]of Object.entries(r))n.append(d,u);l.body=n}return fetch(a,l).then(n=>n.ok?i?n.json():n.text():Promise.reject(n))};function gr(a){return{all:a=a||new Map,on:function(t,r){var i=a.get(t);i?i.push(r):a.set(t,[r])},off:function(t,r){var i=a.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):a.set(t,[]))},emit:function(t,r){var i=a.get(t);i&&i.slice().map(function(l){l(r)}),(i=a.get("*"))&&i.slice().map(function(l){l(t,r)})}}}function gt(a){let t=localStorage.getItem(a+"_storage");const r=e.ref(JSON.parse(t));e.watch(r,i);function i(){r.value===null||r.value===""?localStorage.removeItem(a+"_storage"):localStorage.setItem(a+"_storage",JSON.stringify(r.value))}function l(u,g){r.value=Object.assign({...r.value},{[u]:g})}function n(){r.value=null}return{getStore:(u,g=null)=>r.value===null||r.value===""?g:r.value.hasOwnProperty(u)?r.value[u]:g,setStore:l,clearStore:n}}const vt=e.ref("");function le(){function a(t){vt.value=t}return{apiUrl:vt,setApiUrl:a}}const vr={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},yr={key:0,class:"flex text-center"},br=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})],-1)],wr=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)],_r=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1)],kr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)],xr=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1)],Sr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1)],Er=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1)],Dr={key:1,class:"flex text-center"},Nr={class:"pl-2"},Vr=e.createTextVNode(" Search results for "),Cr={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Mr={class:"flex text-center items-center justify-end"},$r={class:"mx-1.5","aria-label":"Dark Mode","data-microtip-position":"bottom",role:"tooltip"},Br=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1)],Tr={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ar={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},Pr={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},Or={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"},jr={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"},Ir=Object.assign({name:"VFToolbar"},{props:{data:Object},setup(a){const t=inject("emitter"),{getStore:r,setStore:i}=inject("storage"),l=e.ref(r("viewport","grid")),n=e.ref([]),d=e.ref(r("full-screen",!1)),u=e.ref("");t.on("vf-search-query",({newQuery:v})=>{u.value=v});const g=()=>{d.value=!d.value,t.emit("vf-fullscreen-toggle")};return t.on("vf-nodes-selected",v=>{n.value=v}),t.on("vf-view-toggle",v=>{i("viewport",v),l.value=v}),(v,m)=>(e.openBlock(),e.createElementBlock("div",vr,[u.value.length?(e.openBlock(),e.createElementBlock("div",Dr,[e.createElementVNode("div",Nr,[Vr,e.createElementVNode("span",Cr,e.toDisplayString(u.value),1)])])):(e.openBlock(),e.createElementBlock("div",yr,[e.createElementVNode("div",{class:"mx-1.5","aria-label":"New Folder","data-microtip-position":"bottom-right",role:"tooltip",onClick:m[0]||(m[0]=f=>e.unref(t).emit("vf-modal-show",{type:"new-folder",items:n.value}))},br),e.createElementVNode("div",{class:"mx-1.5","aria-label":"New File","data-microtip-position":"bottom",role:"tooltip",onClick:m[1]||(m[1]=f=>e.unref(t).emit("vf-modal-show",{type:"new-file",items:n.value}))},wr),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Rename","data-microtip-position":"bottom",role:"tooltip",onClick:m[2]||(m[2]=f=>n.value.length!=1||e.unref(t).emit("vf-modal-show",{type:"rename",items:n.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([n.value.length==1?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},_r,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Delete","data-microtip-position":"bottom",role:"tooltip",onClick:m[3]||(m[3]=f=>!n.value.length||e.unref(t).emit("vf-modal-show",{type:"delete",items:n.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([n.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},kr,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Upload","data-microtip-position":"bottom",role:"tooltip",onClick:m[4]||(m[4]=f=>e.unref(t).emit("vf-modal-show",{type:"upload",items:n.value}))},xr),n.value.length==1&&n.value[0].mime_type=="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":"Unrchive","data-microtip-position":"bottom",role:"tooltip",onClick:m[5]||(m[5]=f=>!n.value.length||e.unref(t).emit("vf-modal-show",{type:"unarchive",items:n.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([n.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Sr,2))])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":"Archive","data-microtip-position":"bottom",role:"tooltip",onClick:m[6]||(m[6]=f=>!n.value.length||e.unref(t).emit("vf-modal-show",{type:"archive",items:n.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([n.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Er,2))]))])),e.createElementVNode("div",Mr,[e.createElementVNode("div",$r,[(e.openBlock(),e.createElementBlock("svg",{onClick:m[7]||(m[7]=f=>e.unref(t).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},Br))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Toggle Full Screen","data-microtip-position":"bottom",role:"tooltip",onClick:g},[(e.openBlock(),e.createElementBlock("svg",Tr,[d.value?(e.openBlock(),e.createElementBlock("path",Ar)):(e.openBlock(),e.createElementBlock("path",Pr))]))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Change View","data-microtip-position":"bottom-left",role:"tooltip",onClick:m[8]||(m[8]=f=>u.value.length||e.unref(t).emit("vf-view-toggle",l.value=="list"?"grid":"list"))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([u.value.length?"stroke-gray-200  dark:stroke-gray-700":"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[l.value=="grid"?(e.openBlock(),e.createElementBlock("path",Or)):e.createCommentVNode("",!0),l.value=="list"?(e.openBlock(),e.createElementBlock("path",jr)):e.createCommentVNode("",!0)],2))])])]))}});var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yt={exports:{}};(function(a,t){(function(r,i){a.exports=i()})(Lr,function(){function r(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}function i(h,s){for(var o=0;o<s.length;o++){var p=s[o];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}function l(h,s,o){return s&&i(h.prototype,s),o&&i(h,o),h}function n(h,s,o){return s in h?Object.defineProperty(h,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):h[s]=o,h}function d(h,s){var o=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);s&&(p=p.filter(function(c){return Object.getOwnPropertyDescriptor(h,c).enumerable})),o.push.apply(o,p)}return o}function u(h){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?d(Object(o),!0).forEach(function(p){n(h,p,o[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(o,p))})}return h}function g(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(s&&s.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),s&&m(h,s)}function v(h){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},v(h)}function m(h,s){return m=Object.setPrototypeOf||function(p,c){return p.__proto__=c,p},m(h,s)}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(h,s,o){return f()?y=Reflect.construct:y=function(c,w,_){var k=[null];k.push.apply(k,w);var S=Function.bind.apply(c,k),V=new S;return _&&m(V,_.prototype),V},y.apply(null,arguments)}function C(h){return Function.toString.call(h).indexOf("[native code]")!==-1}function x(h){var s=typeof Map=="function"?new Map:void 0;return x=function(p){if(p===null||!C(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(p))return s.get(p);s.set(p,c)}function c(){return y(p,arguments,v(this).constructor)}return c.prototype=Object.create(p.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),m(c,p)},x(h)}function D(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function M(h,s){return s&&(typeof s=="object"||typeof s=="function")?s:D(h)}function T(h){var s=f();return function(){var p=v(h),c;if(s){var w=v(this).constructor;c=Reflect.construct(p,arguments,w)}else c=p.apply(this,arguments);return M(this,c)}}function I(h,s){for(;!Object.prototype.hasOwnProperty.call(h,s)&&(h=v(h),h!==null););return h}function j(h,s,o){return typeof Reflect<"u"&&Reflect.get?j=Reflect.get:j=function(c,w,_){var k=I(c,w);if(!!k){var S=Object.getOwnPropertyDescriptor(k,w);return S.get?S.get.call(_):S.value}},j(h,s,o||h)}function Q(h,s){return $(h)||L(h,s)||O(h,s)||ae()}function U(h){return b(h)||N(h)||O(h)||G()}function b(h){if(Array.isArray(h))return q(h)}function $(h){if(Array.isArray(h))return h}function N(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}function L(h,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(h)))){var o=[],p=!0,c=!1,w=void 0;try{for(var _=h[Symbol.iterator](),k;!(p=(k=_.next()).done)&&(o.push(k.value),!(s&&o.length===s));p=!0);}catch(S){c=!0,w=S}finally{try{!p&&_.return!=null&&_.return()}finally{if(c)throw w}}return o}}function O(h,s){if(!!h){if(typeof h=="string")return q(h,s);var o=Object.prototype.toString.call(h).slice(8,-1);if(o==="Object"&&h.constructor&&(o=h.constructor.name),o==="Map"||o==="Set")return Array.from(h);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return q(h,s)}}function q(h,s){(s==null||s>h.length)&&(s=h.length);for(var o=0,p=new Array(s);o<s;o++)p[o]=h[o];return p}function G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var z=function(s,o,p){var c=s.x,w=s.y,_=p.x,k=p.y,S={"+":{x:c+_,y:w+k},"-":{x:c-_,y:w-k},"*":{x:c*_,y:w*k},"/":{x:c/_,y:w/k}};return S[o]},F=function(s){return{x:s.left,y:s.top}},se=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:s.x,top:s.y,right:s.x,bottom:s.y,width:o,height:o}},ke=function(s){return{x:s,y:s}},Pe=function(h,s,o){window.addEventListener("resize",s),window.addEventListener("scroll",s),h.forEach(function(p,c){o.observe(p,{childList:c!==0,attributes:!0})})},Oe=function(h){var s=Se(h);return s.x||s.y?!0:h instanceof HTMLDocument?h.body?!!(h.body.scrollTop=1):!!(h.documentElement.scrollTop=1):!!(h.scrollTop=1)},Fe=function(h){var s=document.createElement("div");return s.style.position="fixed",s.style.overflow="hidden",s.style.pointerEvents="none",s.style.zIndex="999999999999999999",s.classList.add(h),s},Ye=function(h){var s=document.createElement("div");return s.style.position="absolute",h||(s.style.background="rgba(0, 0, 255, 0.1)",s.style.border="1px solid rgba(0, 0, 255, 0.45)",s.style.display="none",s.style.pointerEvents="none"),s},We=function(h,s){var o;return function(){for(var p=arguments.length,c=new Array(p),w=0;w<p;w++)c[w]=arguments[w];var _=function(){o=null,h.apply(void 0,c)};clearTimeout(o),o=setTimeout(_,s)}},xe=function(){var h,s,o,p;return{y:((h=document.body)===null||h===void 0?void 0:h.scrollTop)||((s=document.documentElement)===null||s===void 0?void 0:s.scrollTop)||0,x:((o=document.body)===null||o===void 0?void 0:o.scrollLeft)||((p=document.documentElement)===null||p===void 0?void 0:p.scrollLeft)||0}},mt=function(h,s){if(h instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var o=h.getBoundingClientRect();return{top:o.top,left:o.left,bottom:o.bottom,right:o.right,width:(h.clientWidth||o.width)*s,height:(h.clientHeight||o.height)*s}},Se=function(h){return!h||h instanceof Document?xe():{x:h.scrollLeft>=0?h.scrollLeft:xe().x,y:h.scrollTop>=0?h.scrollTop:xe().y}},Gt=function(h){var s=h.elementRect,o=h.containerRect,p=h.tolerance,c=p===void 0?{x:0,y:0}:p,w=[];return s.top-c.y<o.top&&w.push("top"),s.left-c.x<o.left&&w.push("left"),s.bottom+c.y>o.bottom&&w.push("bottom"),s.right+c.y>o.right&&w.push("right"),w},Bs=function(h){var s=h.event;return{x:s.clientX,y:s.clientY}},Ts=function(h){var s=h.scrollAmount,o=h.initialPointerPos,p=h.pointerPos,c={};return p.x>o.x-s.x?(c.left=o.x-s.x,c.width=p.x-o.x+s.x):(c.left=p.x,c.width=o.x-p.x-s.x),p.y>o.y-s.y?(c.top=o.y-s.y,c.height=p.y-o.y+s.y):(c.top=p.y,c.height=o.y-p.y-s.y),c},Jt=function(s){var o={x:0,y:0},p=window.getComputedStyle(s);if(!p.transform||p.transform==="none")return o;if(p.transform.indexOf("3d")>=0){var c=p.transform.trim().match(/matrix3d\((.*?)\)/);if(c&&c.length){var w,_=(w=c[1])===null||w===void 0?void 0:w.split(",");o.x=parseInt(_[12])||0,o.y=parseInt(_[13])||0}return o}else{var k=p.transform.trim().match(/matrix\((.*?)\)/);if(k&&k.length){var S,V=(S=k[1])===null||S===void 0?void 0:S.split(",");o.x=parseInt(V[4])||0,o.y=parseInt(V[5])||0}return o}},As=function(s){var o=s.style.transform;if(!o||o.indexOf("translate")<0)return Jt(s);var p={x:0,y:0},c=o.trim().match(/translate[3dD]*?\(.*?\)/);if(c){var w,_=(w=c[0])===null||w===void 0?void 0:w.split("(");if(_){var k,S=(k=_[1])===null||k===void 0?void 0:k.split(",");p.x=parseInt(S[0])||0,p.y=parseInt(S[1])||0}}return!p.x&&!p.x?Jt(s):p},Ps=function(s){var o=s.style,p={x:parseInt(o.left)||0,y:parseInt(o.top)||0};if(!p.x&&!p.x){var c=window.getComputedStyle(s);return{x:parseInt(c.left)||0,y:parseInt(c.top)||0}}return p},Os=function(h,s){return s?As(h):Ps(h)},js=function(h){var s=h.element,o=h.edges,p=h.elementRect,c=h.containerRect,w=h.elementPos,_=h.useTransform;o.includes("top")&&je(s,{y:w.y+c.top-p.top,x:w.x},_),o.includes("left")&&je(s,{y:w.y,x:w.x+c.left-p.left},_),o.includes("bottom")&&je(s,{y:w.y+c.bottom-p.bottom,x:w.x},_),o.includes("right")&&je(s,{y:w.y,x:w.x+c.right-p.right},_)},Zt=function(h){var s=h.computedStyle,o=h.node,p=s.position,c=p==="absolute"||p==="relative"||p==="fixed";!(o instanceof HTMLDocument)&&!c&&(o.style.position="relative")},Is=function(h){var s=h.shiftKey,o=h.keyboardDragSpeed,p=h.zoom,c=h.key,w=h.dragKeys,_=h.scrollDiff,k=h.canScroll,S=h.scrollCallback,V={x:0,y:0},E=s?o*4*p:o*p;return w.left.includes(c)&&(V.x=_.x||-E,!s&&!_.x&&k&&S(["left"],o)),w.right.includes(c)&&(V.x=_.x||E,!s&&!_.x&&k&&S(["right"],o)),w.up.includes(c)&&(V.y=_.y||-E,!s&&!_.y&&k&&S(["top"],o)),w.down.includes(c)&&(V.y=_.y||E,!s&&!_.y&&k&&S(["bottom"],o)),V},Ls=function(h){var s=h.element,o=h.force,p=h.multiSelectionToggle,c=h.SelectedSet,w=h.hoverClassName;s.classList.contains(w)&&!o||(c.has(s)?p&&c.delete(s):c.add(s),s.classList.add(w))},zs=function(h){var s=h.element,o=h.force,p=h.SelectedSet,c=h.PrevSelectedSet,w=h.hoverClassName;if(!s.classList.contains(w)&&!o)return!1;var _=p.has(s),k=c.has(s);_&&!k?p.delete(s):!_&&k&&p.add(s),s.classList.remove(w)},ft=function(h,s){return h.left<s.right&&h.right>s.left&&h.top<s.bottom&&h.bottom>s.top},Qt=function(h){var s=h.element,o=h.posDirection,p=h.containerRect,c=h.useTransform,w=Os(s,c),_=z(w,"+",o);je(s,_,c);var k=s.getBoundingClientRect(),S=Gt({elementRect:k,containerRect:p});js({element:s,edges:S,elementRect:k,containerRect:p,elementPos:_,useTransform:c})},Rs=function(h,s){window.removeEventListener("resize",s),window.removeEventListener("scroll",s),h.disconnect()},Hs=function(h,s,o){if(!!s.length){var p=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,c=h instanceof HTMLDocument?p||document.body:h,w=s.includes("top")&&c.scrollTop>0,_=s.includes("bottom")&&c.scrollTop<c.scrollHeight,k=s.includes("left")&&c.scrollLeft>0,S=s.includes("right")&&c.scrollLeft<c.scrollWidth;w&&(c.scrollTop-=1*o),_&&(c.scrollTop+=1*o),k&&(c.scrollLeft-=1*o),S&&(c.scrollLeft+=1*o)}},je=function(h,s,o){if(o){var p=h.style.transform;h.style.transform="translate3d(".concat(s.x,"px,").concat(s.y,"px,1px) ").concat(p.replace(/translate.*?\)/g,""))}else h.style.left="".concat(s.x,"px"),h.style.top="".concat(s.y,"px");return h},Ks=function(h){for(var s=h.subscribe,o=h.publish,p=h.Interaction,c=h.SelectedSet,w={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(E){return E.event}}],"Interaction:end":[{name:"callback"}]},_=function(){var E=Q(S[k],2),B=E[0],A=E[1];["pre",!1].forEach(function(K){return s(K?"".concat(B,":").concat(K):B,function(ee){return A.forEach(function(W){return(!W.condition||W.condition(ee))&&o(K?"".concat(K).concat(W.name):W.name,u({items:c.elements,isDragging:p.isDragging},ee))})})})},k=0,S=Object.entries(w);k<S.length;k++)_()},Ee=function(h){return h?!Array.isArray(h)&&(h instanceof HTMLElement||h instanceof SVGElement)?[h]:U(h):[]},er=function(h,s){h.style.left="".concat(s.left,"px"),h.style.top="".concat(s.top,"px"),h.style.width="".concat(s.width,"px"),h.style.height="".concat(s.height,"px")},Us=function(){function h(s){var o=this,p=s.area,c=s.PS,w=s.zoom;r(this,h),n(this,"_modificationCallback",void 0),n(this,"_modificationObserver",void 0),n(this,"_zoom",void 0),n(this,"_node",void 0),n(this,"_parentNodes",void 0),n(this,"_computedStyle",void 0),n(this,"_computedBorder",void 0),n(this,"_rect",void 0),n(this,"setArea",function(_){o._node=_,Zt({computedStyle:o.computedStyle,node:o._node}),setTimeout(function(){o.PubSub.publish("Area:modified:pre",{item:o}),o.reset(),o.PubSub.publish("Area:modified",{item:o})})}),n(this,"start",function(){Pe(o.parentNodes,o._modificationCallback,o._modificationObserver)}),n(this,"reset",function(){o._computedStyle=void 0,o._rect=void 0,o._computedBorder=void 0,o._parentNodes=void 0}),n(this,"stop",function(){Rs(o._modificationObserver,o._modificationCallback),o.reset()}),n(this,"scroll",function(_,k){var S={scroll_directions:_,scroll_multiplier:k};o.PubSub.publish("Area:scroll:pre",S),Hs(o._node,_,k),o.PubSub.publish("Area:scroll",S)}),this._zoom=w,this.PubSub=c,this.setArea(p),this._modificationCallback=We(function(_){o.PubSub.publish("Area:modified:pre",{event:_,item:o}),o.reset(),o.PubSub.publish("Area:modified",{event:_,item:o})},60),this._modificationObserver=new MutationObserver(this._modificationCallback),this.PubSub.subscribe("Interaction:init",this.start),this.PubSub.subscribe("Interaction:end",this.reset)}return l(h,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=mt(this.HTMLNode,this._zoom)}},{key:"parentNodes",get:function(){if(this._parentNodes)return this._parentNodes;var o=function p(c){var w,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=(w=c[_])===null||w===void 0?void 0:w.parentNode;return k?(c.push(k),_++,p(c,_)):c};return this._parentNodes=o([this.HTMLNode]),this._parentNodes}}]),h}(),Fs=function(){function h(s){var o=this,p=s.DS,c=s.dragKeys,w=s.draggability,_=s.keyboardDrag,k=s.keyboardDragSpeed,S=s.useTransform,V=s.zoom;r(this,h),n(this,"_useTransform",void 0),n(this,"_prevCursorPos",void 0),n(this,"_prevScrollPos",void 0),n(this,"_elements",[]),n(this,"_draggability",void 0),n(this,"_dragKeys",void 0),n(this,"_dragKeysFlat",void 0),n(this,"_keyboardDrag",void 0),n(this,"_keyboardDragSpeed",void 0),n(this,"_zoom",void 0),n(this,"keyboardDrag",function(E){var B=E.event,A=E.key;if(!(!o._keyboardDrag||!o._dragKeysFlat.includes(A)||!o.DS.SelectedSet.size||!o._draggability||o.DS.continue)){var K={event:B,isDragging:!0,isDraggingKeyboard:!0};o.DS.publish(["Interaction:start:pre","Interaction:start"],K),o._elements=o.DS.getSelection(),o.handleZIndex(!0);var ee=Is({shiftKey:o.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:o._keyboardDragSpeed,zoom:o._zoom,key:A,scrollCallback:o.DS.Area.scroll,scrollDiff:o._scrollDiff,canScroll:o.DS.stores.ScrollStore.canScroll,dragKeys:o._dragKeys});o._elements.forEach(function(W){return Qt({element:W,posDirection:ee,containerRect:o.DS.SelectorArea.rect,useTransform:o._useTransform})}),o.DS.publish(["Interaction:update:pre","Interaction:update"],K)}}),n(this,"keyboardEnd",function(E){var B=E.event,A=E.key;if(!(!o._keyboardDrag||!o._dragKeysFlat.includes(A)||!o.DS.SelectedSet.size||!o._draggability)){var K={event:B,isDragging:o._draggability,isDraggingKeyboard:!0};o.DS.publish(["Interaction:end:pre","Interaction:end"],K)}}),n(this,"start",function(E){var B=E.isDragging,A=E.isDraggingKeyboard;!B||A||(o._prevCursorPos=null,o._prevScrollPos=null,o._elements=o.DS.getSelection(),o.handleZIndex(!0))}),n(this,"stop",function(E){E!=null&&E.isKeyboard||(o._prevCursorPos=null,o._prevScrollPos=null,o.handleZIndex(!1),o._elements=[])}),n(this,"update",function(E){var B=E.isDragging,A=E.isDraggingKeyboard;if(!(!B||!o._elements.length||A||o.DS.continue)){var K=z(o._cursorDiff,"+",o._scrollDiff);o._elements.forEach(function(ee){return Qt({element:ee,posDirection:K,containerRect:o.DS.SelectorArea.rect,useTransform:o._useTransform})})}}),n(this,"handleZIndex",function(E){o._elements.forEach(function(B){return B.style.zIndex="".concat((parseInt(B.style.zIndex)||0)+E?9999:-9998)})}),this.DS=p,this._useTransform=S,this._keyboardDragSpeed=k,this._keyboardDrag=_,this._zoom=V,this._draggability=w,this._dragKeys={up:c.up.map(function(E){return E.toLowerCase()}),down:c.down.map(function(E){return E.toLowerCase()}),left:c.left.map(function(E){return E.toLowerCase()}),right:c.right.map(function(E){return E.toLowerCase()})},this._dragKeysFlat=[].concat(U(this._dragKeys.up),U(this._dragKeys.down),U(this._dragKeys.left),U(this._dragKeys.right)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return l(h,[{key:"_cursorDiff",get:function(){var o=this.DS.stores.PointerStore.currentVal,p=this._prevCursorPos?z(o,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=o,p}},{key:"_scrollDiff",get:function(){var o=this.DS.stores.ScrollStore.currentVal,p=this._prevScrollPos?z(o,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=o,p}}]),h}(),Ys=function(){function h(s){var o=this,p=s.DS,c=s.areaElement,w=s.draggability,_=s.immediateDrag,k=s.selectableClass;r(this,h),n(this,"_areaElement",void 0),n(this,"_draggability",void 0),n(this,"_immediateDrag",void 0),n(this,"_selectableClass",void 0),n(this,"isInteracting",void 0),n(this,"isDragging",void 0),n(this,"init",function(){return o.DS.publish("Interaction:init:pre",{})}),n(this,"_init",function(){o.stop(),o._areaElement.addEventListener("mousedown",o.start),o._areaElement.addEventListener("touchstart",o.start,{passive:!1}),o.DS.publish("Interaction:init",{})}),n(this,"start",function(S){return o.DS.publish("Interaction:start:pre",{event:S,isDragging:o.isDragging})}),n(this,"_start",function(S){S.type==="touchstart"&&S.preventDefault(),o._canInteract(S)&&(o.isInteracting=!0,o.isDragging=o.isDragEvent(S),o.DS.publish("Interaction:start",{event:S,isDragging:o.isDragging}),document.addEventListener("mouseup",o.reset),document.addEventListener("touchend",o.reset))}),n(this,"isDragEvent",function(S){var V=S.target.closest(".".concat(o._selectableClass));return!o._draggability||o.DS.stores.KeyStore.isMultiSelectKeyPressed(S)||!V?!1:(o._immediateDrag&&(o.DS.SelectedSet.size?o.DS.SelectedSet.has(V)||(o.DS.SelectedSet.clear(),o.DS.SelectedSet.add(V)):o.DS.SelectedSet.add(V)),!!o.DS.SelectedSet.has(V))}),n(this,"onClick",function(S){var V=S.event;if(!!o._canInteract(V)&&!(V.detail>0)){var E=o.DS,B=E.stores,A=B.PointerStore,K=B.KeyStore,ee=E.SelectableSet,W=E.SelectedSet;A.start(V);var De=V.target;!ee.has(De)||(K.isMultiSelectKeyPressed(V)||W.clear(),W.toggle(De),o.reset())}}),n(this,"stop",function(){o.isInteracting=!1,o.isDragging=!1,o._areaElement.removeEventListener("mousedown",o.start),o._areaElement.removeEventListener("touchstart",o.start,{passive:!1}),document.removeEventListener("mouseup",o.reset),document.removeEventListener("touchend",o.reset)}),n(this,"update",function(S){var V=S.event,E=S.scroll_directions,B=S.scroll_multiplier;o.isInteracting&&o.DS.publish(["Interaction:update:pre","Interaction:update"],{event:V,scroll_directions:E,scroll_multiplier:B,isDragging:o.isDragging})}),n(this,"reset",function(S){return o.DS.publish("Interaction:end:pre",{event:S,isDragging:o.isDragging})}),n(this,"_reset",function(S){var V=o.isDragging;o.stop(),o.init(),o.DS.publish("Interaction:end",{event:S,isDragging:V})}),this._areaElement=c,this._draggability=w,this._immediateDrag=_,this._selectableClass=k,this.DS=p,this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(S){var V=S.event;return o.start(V)}),this.DS.subscribe("Interaction:start:pre",function(S){var V=S.event;return o._start(V)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(S){var V=S.event;return o._reset(V)}),this.DS.subscribe("Area:scroll",this.update)}return l(h,[{key:"_canInteract",value:function(o){var p=o.clientX===0&&o.clientY===0&&o.detail===0&&o.target;return!(o.button===2||this.isInteracting||o.target&&!this.DS.SelectorArea.isInside(o.target)||!p&&!this.DS.SelectorArea.isClicked(o))}}]),h}(),Ws=function h(s){var o=this,p=s.DS;r(this,h),n(this,"subscribers",{}),n(this,"subscribe",function(c,w){return Array.isArray(o.subscribers[c])||(o.subscribers[c]=[]),o.subscribers[c].push(w),o.subscribers[c].length-1}),n(this,"unsubscribe",function(c,w,_){_>=0?o.subscribers[c].splice(_,1):w&&(o.subscribers[c]=o.subscribers[c].filter(function(k){return k!==w}))}),n(this,"publish",function(c,w){Array.isArray(c)?c.forEach(function(_){return o._publish(_,w)}):o._publish(c,w)}),n(this,"_publish",function(c,w){var _=o.subscribers[c];!Array.isArray(_)||(c.includes(":pre")?o._handlePrePublish(_,w):o._handlePublish(_,w))}),n(this,"_handlePublish",function(c,w){for(var _=0,k=c.length;_<k;_++){if(o.DS.stopped)return;c[_](w)}}),n(this,"_handlePrePublish",function(c,w){for(var _=c.length;_--;){if(o.DS.stopped)return;c[_](w)}}),this.DS=p},Xs=function(h){g(o,h);var s=T(o);function o(p){var c,w=p.elements,_=p.className,k=p.hoverClassName,S=p.draggability,V=p.useTransform,E=p.DS;return r(this,o),c=s.call(this),n(D(c),"_initElements",void 0),n(D(c),"_className",void 0),n(D(c),"_hoverClassName",void 0),n(D(c),"_useTransform",void 0),n(D(c),"_draggability",void 0),n(D(c),"init",function(){return c._initElements.forEach(function(B){return c.add(B)})}),n(D(c),"clear",function(){return c.forEach(function(B){return c.delete(B)})}),n(D(c),"_onClick",function(B){return c.DS.publish(["Selectable:click:pre","Selectable:click"],{event:B})}),n(D(c),"_onPointer",function(B){return c.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:B})}),n(D(c),"addAll",function(B){return B.forEach(function(A){return c.add(A)})}),n(D(c),"deleteAll",function(B){return B.forEach(function(A){return c.delete(A)})}),c.DS=E,c._initElements=Ee(w),c._className=_,c._hoverClassName=k,c._useTransform=V,c._draggability=S,c.DS.subscribe("Interaction:init",c.init),c}return l(o,[{key:"add",value:function(c){return c.classList.add(this._className),c.addEventListener("click",this._onClick),c.addEventListener("mousedown",this._onPointer),c.addEventListener("touchstart",this._onPointer,{passive:!1}),this._draggability&&!this._useTransform&&Zt({computedStyle:window.getComputedStyle(c),node:c}),j(v(o.prototype),"add",this).call(this,c)}},{key:"delete",value:function(c){return c.classList.remove(this._className),c.classList.remove(this._hoverClassName),c.removeEventListener("click",this._onClick),c.removeEventListener("mousedown",this._onPointer),c.removeEventListener("touchstart",this._onPointer,{passive:!1}),j(v(o.prototype),"delete",this).call(this,c)}},{key:"elements",get:function(){return Array.from(this.values())}}]),o}(x(Set)),qs=function(h){g(o,h);var s=T(o);function o(p){var c,w=p.className,_=p.DS;return r(this,o),c=s.call(this),n(D(c),"_className",void 0),n(D(c),"clear",function(){return c.forEach(function(k){return c.delete(k)})}),n(D(c),"addAll",function(k){return k.forEach(function(S){return c.add(S)})}),n(D(c),"deleteAll",function(k){return k.forEach(function(S){return c.delete(S)})}),c.DS=_,c._className=w,c}return l(o,[{key:"add",value:function(c){if(!j(v(o.prototype),"has",this).call(this,c)){var w={items:this.elements,item:c};return this.DS.publish("Selected:added:pre",w),j(v(o.prototype),"add",this).call(this,c),c.classList.add(this._className),c.style.zIndex="".concat((parseInt(c.style.zIndex)||0)+1),this.DS.publish("Selected:added",w),this}}},{key:"delete",value:function(c){if(!!j(v(o.prototype),"has",this).call(this,c)){var w={items:this.elements,item:c};this.DS.publish("Selected:removed:pre",w);var _=j(v(o.prototype),"delete",this).call(this,c);return c.classList.remove(this._className),c.style.zIndex="".concat((parseInt(c.style.zIndex)||0)-1),this.DS.publish("Selected:removed",w),_}}},{key:"toggle",value:function(c){return this.has(c)?this.delete(c):this.add(c),c}},{key:"elements",get:function(){return Array.from(this.values())}}]),o}(x(Set)),Gs=function(){function h(s){var o=this,p=s.DS,c=s.hoverClassName,w=s.multiSelectToggling;r(this,h),n(this,"_prevSelectedSet",void 0),n(this,"_hoverClassName",void 0),n(this,"_multiSelectToggling",void 0),n(this,"start",function(_){var k=_.event,S=_.isDragging;S||(o._storePrevious(k),o._handleInsideSelection(!0,k))}),n(this,"update",function(_){var k=_.isDragging;k||o.DS.continue||o._handleInsideSelection()}),n(this,"_handleInsideSelection",function(_,k){for(var S=o.DS,V=S.SelectableSet,E=S.SelectorArea,B=S.Selector,A=V.elements.map(function(ue){return[ue,ue.getBoundingClientRect()]}),K=[],ee=[],W=0,De=A.length;W<De;W++)!E.isInside(A[W][0],A[W][1])||(ft(A[W][1],B.rect)?K.push(A[W][0]):ee.push(A[W][0]));var Xe=o.DS.stores.KeyStore.isMultiSelectKeyPressed(k)&&o._multiSelectToggling;o.DS.continue||(K.forEach(function(ue){return Ls({element:ue,force:_,multiSelectionToggle:Xe,SelectedSet:o.DS.SelectedSet,hoverClassName:o._hoverClassName})}),ee.forEach(function(ue){return zs({element:ue,force:_,SelectedSet:o.DS.SelectedSet,hoverClassName:o._hoverClassName,PrevSelectedSet:o._prevSelectedSet})}))}),this._hoverClassName=c,this._multiSelectToggling=w,this.DS=p,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return l(h,[{key:"_storePrevious",value:function(o){var p=this.DS,c=p.stores.KeyStore,w=p.SelectedSet;c.isMultiSelectKeyPressed(o)?this._prevSelectedSet=new Set(w):this._prevSelectedSet=new Set}}]),h}(),Js=function(){function h(s){var o=this,p=s.DS,c=s.selector,w=s.selectorClass,_=s.customStyles;r(this,h),n(this,"_rect",void 0),n(this,"start",function(k){var S=k.isDragging;if(!S){var V=o.DS.stores.PointerStore,E=V.initialValArea;er(o.HTMLNode,se(E,1)),o.HTMLNode.style.display="block",o._rect=null}}),n(this,"stop",function(){o.HTMLNode.style.width="0",o.HTMLNode.style.height="0",o.HTMLNode.style.display="none"}),n(this,"update",function(k){var S=k.isDragging;if(!(S||o.DS.continue)){var V=o.DS.stores,E=V.ScrollStore,B=V.PointerStore,A=Ts({scrollAmount:E.scrollAmount,initialPointerPos:B.initialValArea,pointerPos:B.currentValArea});er(o.HTMLNode,A),o._rect=null}}),this.DS=p,this.HTMLNode=c||Ye(_),this.HTMLNode.classList.add(w),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return l(h,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),h}(),Zs=function(){function h(s){var o=this,p=s.DS,c=s.selectorAreaClass,w=s.autoScrollSpeed,_=s.overflowTolerance;r(this,h),n(this,"_autoScrollSpeed",void 0),n(this,"_scrollInterval",void 0),n(this,"_rect",void 0),n(this,"currentEdges",[]),n(this,"_overflowTolerance",void 0),n(this,"start",function(){return o.applyElements("append")}),n(this,"applyElements",function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",S=document.body?"body":"documentElement",V="".concat(k,"Child");o.HTMLNode[V](o.DS.Selector.HTMLNode),document[S][V](o.HTMLNode)}),n(this,"updatePos",function(){o._rect=null;var k=o.DS.Area.rect,S=o.DS.Area.computedBorder,V=o.HTMLNode.style,E="".concat(k.top+S.top,"px"),B="".concat(k.left+S.left,"px"),A="".concat(k.width,"px"),K="".concat(k.height,"px");V.top!==E&&(V.top=E),V.left!==B&&(V.left=B),V.width!==A&&(V.width=A),V.height!==K&&(V.height=K)}),n(this,"stop",function(k){o.stopAutoScroll(),k&&o.applyElements("remove")}),n(this,"startAutoScroll",function(){o.currentEdges=[],o._scrollInterval=setInterval(function(){return o.handleAutoScroll()},16)}),n(this,"handleAutoScroll",function(){if(!o.DS.continue){var k=o.DS,S=k.stores.PointerStore,V=k.Area;o.currentEdges=Gt({elementRect:se(S.currentVal),containerRect:o.rect,tolerance:o._overflowTolerance}),o.currentEdges.length&&V.scroll(o.currentEdges,o._autoScrollSpeed)}}),n(this,"stopAutoScroll",function(){o.currentEdges=[],clearInterval(o._scrollInterval)}),n(this,"isInside",function(k,S){return o.DS.Area.HTMLNode.contains(k)&&o.DS.stores.ScrollStore.canScroll?!0:ft(o.rect,S||k.getBoundingClientRect())}),this._autoScrollSpeed=w,this._overflowTolerance=_,this.DS=p,this.HTMLNode=Fe(c),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){o.updatePos(),o.stopAutoScroll()})}return l(h,[{key:"isClicked",value:function(o){var p=this.DS.stores.PointerStore,c=o?p.getPointerPosition(o):p.initialVal;return ft({left:c.x,top:c.y,right:c.x,bottom:c.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),h}(),Qs=function(){function h(s){var o=this,p=s.DS,c=s.multiSelectKeys,w=s.multiSelectMode;r(this,h),n(this,"_multiSelectMode",void 0),n(this,"_multiSelectKeys",void 0),n(this,"_currentValues",new Set),n(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),n(this,"init",function(){document.addEventListener("keydown",o.keydown),document.addEventListener("keyup",o.keyup),window.addEventListener("blur",o.reset)}),n(this,"keydown",function(_){var k=_.key.toLowerCase();o.DS.publish("KeyStore:down:pre",{event:_,key:k}),o._currentValues.add(k),o.DS.publish("KeyStore:down",{event:_,key:k})}),n(this,"keyup",function(_){var k=_.key.toLowerCase();o.DS.publish("KeyStore:up:pre",{event:_,key:k}),o._currentValues.delete(k),o.DS.publish("KeyStore:up",{event:_,key:k})}),n(this,"stop",function(){document.removeEventListener("keydown",o.keydown),document.removeEventListener("keyup",o.reset),window.removeEventListener("blur",o.reset),o.reset()}),n(this,"reset",function(){return o._currentValues.clear()}),this.DS=p,this._multiSelectMode=w,this._multiSelectKeys=c.map(function(_){var k={ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"},S=k[_];return S?(console.warn("[DragSelect] ".concat(_,' is deprecated. Use "').concat(S,'" instead. Act Now!. See docs for more info')),S.toLowerCase()):_.toLowerCase()}),this.DS.subscribe("Interaction:init",this.init)}return l(h,[{key:"isMultiSelectKeyPressed",value:function(o){var p=this;return!!(this._multiSelectMode||this.currentValues.some(function(c){return p._multiSelectKeys.includes(c)})||o&&this._multiSelectKeys.some(function(c){return o[p._keyMapping[c]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),h}(),el=function(){function h(s){var o=this,p=s.DS;r(this,h),n(this,"_isMouseInteraction",!1),n(this,"_initialValArea",void 0),n(this,"_currentValArea",void 0),n(this,"_lastValArea",void 0),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_lastVal",void 0),n(this,"_lastTouch",void 0),n(this,"init",function(){document.addEventListener("mousemove",o.update),document.addEventListener("touchmove",o.update,{passive:!1})}),n(this,"getPointerPosition",function(c){return Bs({event:o._normalizedEvent(c)})}),n(this,"update",function(c){!c||(o.DS.publish("PointerStore:updated:pre",{event:c}),o.currentVal=o.getPointerPosition(c),o._isMouseInteraction&&o.DS.publish("PointerStore:updated",{event:c}))}),n(this,"stop",function(){document.removeEventListener("mousemove",o.update),document.removeEventListener("touchmove",o.update,{passive:!1}),setTimeout(function(){return o._isMouseInteraction=!1},100)}),n(this,"reset",function(c){!c||(o.currentVal=o.lastVal=o.getPointerPosition(c),o.stop(),o.init())}),this.DS=p,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(c){var w=c.event;return o.start(w)}),this.DS.subscribe("Interaction:end",function(c){var w=c.event;return o.reset(w)})}return l(h,[{key:"start",value:function(o){!o||(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(o))}},{key:"_normalizedEvent",value:function(o){return"touches"in o&&o.type!=="touchend"&&(this._lastTouch=o),"touches"in o?this._lastTouch.touches[0]:o}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(o){this._initialVal=o,this._initialValArea=o&&z(o,"-",z(F(this.DS.Area.rect),"+",F(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(o){this._currentVal=o,this._currentValArea=o&&z(o,"-",z(F(this.DS.Area.rect),"+",F(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(o){this._lastVal=o,this._lastValArea=o&&z(o,"-",z(F(this.DS.Area.rect),"+",F(this.DS.Area.computedBorder)))}}]),h}(),tl=function(){function h(s){var o=this,p=s.DS,c=s.areaElement,w=s.zoom;r(this,h),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_areaElement",void 0),n(this,"_canScroll",void 0),n(this,"init",function(){return o._areaElement.addEventListener("scroll",o.update)}),n(this,"start",function(){o._currentVal=o._initialVal=Se(o._areaElement),o._areaElement.addEventListener("scroll",o.update)}),n(this,"update",function(){return o._currentVal=Se(o._areaElement)}),n(this,"stop",function(){o._areaElement.removeEventListener("scroll",o.update),o._initialVal={x:0,y:0},o._canScroll=null}),n(this,"reset",function(){o.stop(),o.start()}),this._areaElement=c,this.DS=p,this.zoom=w,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return o.start()}),this.DS.subscribe("Interaction:end",function(){return o.reset()})}return l(h,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=Oe(this._areaElement)}},{key:"scrollAmount",get:function(){var o=z(this.currentVal,"-",this.initialVal),p=ke(this.zoom),c=z(z(o,"*",p),"-",o);return{x:o.x+c.x,y:o.y+c.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=Se(this._areaElement)),this._currentVal}}]),h}(),rl=function(){function h(s){var o=this,p=s.area,c=p===void 0?document:p,w=s.selectables,_=w===void 0?[]:w,k=s.autoScrollSpeed,S=k===void 0?5:k,V=s.overflowTolerance,E=V===void 0?{x:25,y:25}:V,B=s.zoom,A=B===void 0?1:B,K=s.customStyles,ee=K===void 0?!1:K,W=s.multiSelectMode,De=W===void 0?!1:W,Xe=s.multiSelectToggling,ue=Xe===void 0?!0:Xe,tr=s.multiSelectKeys,ol=tr===void 0?["Control","Shift","Meta"]:tr,rr=s.selector,nl=rr===void 0?void 0:rr,or=s.draggability,pt=or===void 0?!0:or,nr=s.immediateDrag,il=nr===void 0?!0:nr,ir=s.keyboardDrag,al=ir===void 0?!0:ir,sl=s.dragKeys,ar=s.keyboardDragSpeed,ll=ar===void 0?10:ar,sr=s.useTransform,lr=sr===void 0?!0:sr,cr=s.hoverClass,dr=cr===void 0?"ds-hover":cr,hr=s.selectableClass,ur=hr===void 0?"ds-selectable":hr,mr=s.selectedClass,cl=mr===void 0?"ds-selected":mr,fr=s.selectorClass,dl=fr===void 0?"ds-selector":fr,pr=s.selectorAreaClass,hl=pr===void 0?"ds-selector-area":pr,ul=s.callback,ml=s.onDragMove,fl=s.onDragStartBegin,pl=s.onDragStart,gl=s.onElementSelect,vl=s.onElementUnselect;r(this,h),n(this,"continue",!1),n(this,"start",function(){o.stopped=!1,o.Interaction.init()}),n(this,"break",function(){return o.continue=!0}),n(this,"getSelection",function(){return o.SelectedSet.elements}),n(this,"getSelectables",function(){return o.SelectableSet.elements}),n(this,"getInitialCursorPosition",function(){return o.stores.PointerStore.initialVal}),n(this,"getCurrentCursorPosition",function(){return o.stores.PointerStore.currentVal}),n(this,"getPreviousCursorPosition",function(){return o.stores.PointerStore.lastVal}),n(this,"getInitialCursorPositionArea",function(){return o.stores.PointerStore.initialValArea}),n(this,"getCurrentCursorPositionArea",function(){return o.stores.PointerStore.currentValArea}),n(this,"getPreviousCursorPositionArea",function(){return o.stores.PointerStore.lastValArea}),n(this,"isMultiSelect",function(yl){return o.stores.KeyStore.isMultiSelectKeyPressed(yl)}),n(this,"isDragging",function(){return o.Interaction.isDragging}),this.PubSub=new Ws({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this._callbacksTemp({callback:ul,onDragMove:ml,onDragStart:pl,onDragStartBegin:fl,onElementSelect:gl,onElementUnselect:vl}),this.stores={PointerStore:new el({DS:this}),ScrollStore:new tl({DS:this,areaElement:c,zoom:A}),KeyStore:new Qs({DS:this,multiSelectKeys:ol,multiSelectMode:De})},this.Area=new Us({area:c,PS:this.PubSub,zoom:A}),this.Selector=new Js({DS:this,selector:nl,selectorClass:dl,customStyles:ee}),this.SelectorArea=new Zs({DS:this,selectorAreaClass:hl,autoScrollSpeed:S,overflowTolerance:E}),this.SelectableSet=new Xs({elements:_,DS:this,className:ur,hoverClassName:dr,useTransform:lr,draggability:pt}),this.SelectedSet=new qs({DS:this,className:cl}),this.Selection=new Gs({DS:this,hoverClassName:dr,multiSelectToggling:ue}),this.Drag=new Fs({DS:this,draggability:pt,useTransform:lr,keyboardDrag:al,dragKeys:Object.assign({up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},sl),zoom:A,keyboardDragSpeed:ll}),this.Interaction=new Ys({areaElement:c,DS:this,draggability:pt,immediateDrag:il,selectableClass:ur}),Ks({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",function(){return o.continue=!1}),this.start()}return l(h,[{key:"_callbacksTemp",value:function(o){var p=o.callback,c=o.onDragMove,w=o.onDragStart,_=o.onDragStartBegin,k=o.onElementSelect,S=o.onElementUnselect,V=function(B,A){return console.warn("[DragSelect] ".concat(B,' is deprecated. Use DragSelect.subscribe("').concat(A,'", (callbackObject) => {}) instead. Act Now! See docs for more info'))};p&&(V("callback","callback"),this.subscribe("callback",function(E){var B=E.items;E.item;var A=E.event;return p(B,A)})),c&&(V("onDragMove","dragmove"),this.subscribe("dragmove",function(E){E.items,E.item;var B=E.event;return c(B)})),w&&(V("onDragStart","dragstart"),this.subscribe("dragstart",function(E){E.items,E.item;var B=E.event;return w(B)})),_&&(V("onDragStartBegin","dragstart"),this.subscribe("dragstart",function(E){E.items,E.item;var B=E.event;return _(B)})),k&&(V("onElementSelect","elementselect"),this.subscribe("elementselect",function(E){E.items;var B=E.item,A=E.event;return k(B,A)})),S&&(V("onElementUnselect","elementunselect"),this.subscribe("elementunselect",function(E){E.items;var B=E.item,A=E.event;return S(B,A)}))}},{key:"stop",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;c&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(o),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),o&&this.SelectableSet.clear(),p&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(Ee(o)),c||this.addSelectables(o),p&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(Ee(o)),c&&this.removeSelectables(o),p&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(o){var p=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Ee(o).forEach(function(_){return p.SelectedSet.has(_)?p.removeSelection(o,c,w):p.addSelection(o,c,w)}),c&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(o,p,c),this.getSelection()}},{key:"clearSelection",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),o&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=Ee(o);return this.SelectableSet.addAll(c),p&&this.SelectedSet.addAll(c),o}},{key:"setSelectables",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.removeSelectables(o,p),this.addSelectables(o,c)}},{key:"removeSelectables",value:function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.SelectableSet.deleteAll(Ee(o)),p&&this.removeSelection(o),o}},{key:"getCursorPositionDifference",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;console.warn("[DragSelect] Using .getCursorPositionDifference is deprecated. Calculate yourself instead. i.e. `.getCurrentCursorPosition().x - .getInitialCursorPosition().x`");var c=p?this.getCurrentCursorPositionArea():this.getCurrentCursorPosition(),w=o?p?this.getPreviousCursorPositionArea():this.getPreviousCursorPosition():p?this.getInitialCursorPositionArea():this.getInitialCursorPosition();return z(c,"-",w)}}]),h}();return rl})})(yt);const zr=yt.exports,Rr=(a,t,r,i,l)=>(t=Math,r=t.log,i=1024,l=r(a)/r(i)|0,a/t.pow(i,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B"),Hr=(a,t="en-US")=>new Date(a*1e3).toLocaleString(t),Kr={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Ur=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)],Fr={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Yr=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)],Le=Object.assign({name:"VFSortIcon"},{props:{direction:String},setup(a){return(t,r)=>(e.openBlock(),e.createElementBlock("div",null,[a.direction=="down"?(e.openBlock(),e.createElementBlock("svg",Kr,Ur)):e.createCommentVNode("",!0),a.direction=="up"?(e.openBlock(),e.createElementBlock("svg",Fr,Yr)):e.createCommentVNode("",!0)]))}}),Wr=["onClick"],Xr=Object.assign({name:"VFToast.vue"},{setup(a){const t=inject("emitter"),{getStore:r}=inject("storage"),i=e.ref(r("full-screen",!1)),l=g=>g=="error"?"text-red-400 border-red-400":"text-lime-600 border-lime-600",n=e.ref([]),d=g=>{n.value.splice(g,1)},u=g=>{let v=n.value.findIndex(m=>m.id===g);v!==-1&&d(v)};return t.on("vf-toast-push",g=>{let v=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");g.id=v,n.value.push(g),setTimeout(()=>{u(v)},5e3)}),(g,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([i.value.value?"fixed":"absolute","bottom-0 max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(m,f)=>(e.openBlock(),e.createElementBlock("div",{onClick:y=>d(f),key:m,class:e.normalizeClass([l(m.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 border text-xs rounded cursor-pointer"])},e.toDisplayString(m.label),11,Wr))),128))]),_:1})],2))}}),qr={class:"relative flex-auto flex flex-col overflow-hidden"},Gr={key:0,class:"grid grid-cols-12 border-b border-neutral-300 dark:border-gray-700 text-xs select-none"},Jr=e.createTextVNode(" Name "),Zr=e.createTextVNode(" Size "),Qr=e.createTextVNode(" Date "),eo=e.createTextVNode(" Path "),to={class:"absolute"},ro=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),oo={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},no=["onDblclick","onContextmenu","data-type","data-item","data-index"],io={class:"grid grid-cols-12 items-center"},ao={class:"flex col-span-7 items-center"},so={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},lo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],co={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ho=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],uo={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},mo={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},fo=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],po={class:"grid grid-cols-12 items-center"},go={class:"flex col-span-7 items-center"},vo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},yo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],bo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},wo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],_o={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},ko={class:"col-span-2 text-center"},xo={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},So=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Eo={class:"relative"},Do={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},No=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Vo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Co=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Mo={class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},$o={class:"break-all"},Bo=Object.assign({name:"VFExplorer"},{props:{view:String,data:Object,search:Object},setup(a){const t=a,r=inject("emitter"),{setStore:i,getStore:l}=inject("storage"),n=b=>b==null?void 0:b.substring(0,3),d=b=>b.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),u=e.ref(null),g=e.ref(null),v=e.ref(0),m=e.ref(null),f=e.ref(l("full-screen",!1));r.on("vf-fullscreen-toggle",()=>{f.value=!f.value,i("full-screen",f.value)});const y=e.ref("");r.on("vf-search-query",({newQuery:b})=>{y.value=b,b?r.emit("vf-fetch",{q:"search",adapter:t.data.adapter,path:t.data.dirname,filter:b}):r.emit("vf-fetch",{q:"index",adapter:t.data.adapter,path:t.data.dirname})});const C=b=>{b.type=="dir"?(r.emit("vf-search-exit"),r.emit("vf-fetch",{q:"index",adapter:t.data.adapter,path:b.path})):r.emit("vf-modal-show",{type:"preview",adapter:t.data.adapter,item:b})},x=e.reactive({active:!1,column:"",order:""}),D=(b=!0)=>{let $=[...t.data.files],N=x.column,L=x.order=="asc"?1:-1;if(!b)return $;const O=(q,G)=>typeof q=="string"&&typeof G=="string"?q.toLowerCase().localeCompare(G.toLowerCase()):q<G?-1:q>G?1:0;return x.active&&($=$.slice().sort((q,G)=>O(q[N],G[N])*L)),$},M=b=>{x.active&&x.column==b?(x.active=x.order=="asc",x.column=b,x.order="desc"):(x.active=!0,x.column=b,x.order="asc")},T=()=>m.value.getSelection().map(b=>JSON.parse(b.dataset.item)),I=(b,$)=>{if(b.altKey||b.ctrlKey||b.metaKey)return b.preventDefault(),!1;b.dataTransfer.setDragImage(g.value,0,15),b.dataTransfer.effectAllowed="all",b.dataTransfer.dropEffect="copy",b.dataTransfer.setData("items",JSON.stringify(T()))},j=(b,$)=>{b.preventDefault();let N=JSON.parse(b.dataTransfer.getData("items"));if(N.find(L=>L.storage!=l("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}r.emit("vf-modal-show",{type:"move",items:{from:N,to:$}})},Q=(b,$)=>{b.preventDefault(),!$||$.type!=="dir"||m.value.getSelection().find(N=>N==b.currentTarget)?(b.dataTransfer.dropEffect="none",b.dataTransfer.effectAllowed="none"):b.dataTransfer.dropEffect="copy"},U=()=>{m.value=new zr({area:u.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),r.on("vf-explorer-update",()=>e.nextTick(()=>{m.value.clearSelection(),m.value.setSelectables(document.getElementsByClassName("vf-item"))})),m.value.subscribe("predragstart",({event:b,isDragging:$})=>{if($)v.value=m.value.getSelection().length,m.value.break();else{const N=b.target.offsetWidth-b.offsetX,L=b.target.offsetHeight-b.offsetY;N<15&&L<15&&(m.value.clearSelection(),m.value.break())}}),m.value.subscribe("predragmove",({isDragging:b})=>{b&&m.value.break()}),m.value.subscribe("callback",({items:b,event:$,isDragging:N})=>{r.emit("vf-nodes-selected",T()),v.value=m.value.getSelection().length})};return e.onMounted(U),e.onMounted(()=>{e.watch(()=>t.view,()=>r.emit("vf-explorer-update"))}),(b,$)=>(e.openBlock(),e.createElementBlock("div",qr,[a.view=="list"||y.value.length?(e.openBlock(),e.createElementBlock("div",Gr,[e.createElementVNode("div",{onClick:$[0]||($[0]=N=>M("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center pl-1"},[Jr,e.withDirectives(e.createVNode(Le,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="basename"]])]),y.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:$[1]||($[1]=N=>M("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l border-r dark:border-gray-700"},[Zr,e.withDirectives(e.createVNode(Le,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="file_size"]])])),y.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:$[2]||($[2]=N=>M("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center"},[Qr,e.withDirectives(e.createVNode(Le,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="last_modified"]])])),y.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:$[3]||($[3]=N=>M("path")),class:"col-span-5 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l dark:border-gray-700"},[eo,e.withDirectives(e.createVNode(Le,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",to,[e.createElementVNode("div",{ref:N=>g.value=N,class:"absolute -z-50 -top-96"},[ro,e.createElementVNode("div",oo,e.toDisplayString(v.value),1)],512)]),e.createElementVNode("div",{style:e.normalizeStyle(f.value?"height: 100%;":""),class:e.normalizeClass([f.value?"":"resize-y","h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto p-1 z-0"]),ref:N=>u.value=N,onContextmenu:$[4]||($[4]=e.withModifiers(N=>e.unref(r).emit("vf-contextmenu-show",{event:N,area:u.value,items:T()}),["self","prevent"]))},[y.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(D(),(N,L)=>(e.openBlock(),e.createElementBlock("div",{onDblclick:O=>C(N),onContextmenu:e.withModifiers(O=>e.unref(r).emit("vf-contextmenu-show",{event:O,area:u.value,items:T(),target:N}),["prevent"]),class:"vf-item grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none","data-type":N.type,"data-item":JSON.stringify(N),"data-index":L},[e.createElementVNode("div",io,[e.createElementVNode("div",ao,[N.type=="dir"?(e.openBlock(),e.createElementBlock("svg",so,lo)):(e.openBlock(),e.createElementBlock("svg",co,ho)),e.createElementVNode("span",uo,e.toDisplayString(N.basename),1)]),e.createElementVNode("div",mo,e.toDisplayString(N.path),1)])],40,no))),256)):e.createCommentVNode("",!0),a.view=="list"&&!y.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(D(),(N,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:O=>C(N),onContextmenu:e.withModifiers(O=>e.unref(r).emit("vf-contextmenu-show",{event:O,area:u.value,items:T(),target:N}),["prevent"]),onDragstart:O=>I(O),onDragover:O=>Q(O,N),onDrop:O=>j(O,N),class:"vf-item grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none","data-type":N.type,"data-item":JSON.stringify(N),"data-index":L},[e.createElementVNode("div",po,[e.createElementVNode("div",go,[N.type=="dir"?(e.openBlock(),e.createElementBlock("svg",vo,yo)):(e.openBlock(),e.createElementBlock("svg",bo,wo)),e.createElementVNode("span",_o,e.toDisplayString(N.basename),1)]),e.createElementVNode("div",ko,e.toDisplayString(N.file_size?e.unref(Rr)(N.file_size):""),1),e.createElementVNode("div",xo,e.toDisplayString(e.unref(Hr)(N.last_modified)),1)])],40,fo))),256)):e.createCommentVNode("",!0),a.view=="grid"&&!y.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(D(!1),(N,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:O=>C(N),onContextmenu:e.withModifiers(O=>e.unref(r).emit("vf-contextmenu-show",{event:O,area:u.value,items:T(),target:N}),["prevent"]),onDragstart:O=>I(O),onDragover:O=>Q(O,N),onDrop:O=>j(O,N),class:"vf-item border border-transparent hover:bg-neutral-50 m-0.5 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 md:h-24 text-center justify-center select-none","data-type":N.type,"data-item":JSON.stringify(N),"data-index":L},[e.createElementVNode("div",null,[e.createElementVNode("div",Eo,[N.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Do,No)):(e.openBlock(),e.createElementBlock("svg",Vo,Co)),e.createElementVNode("div",Mo,e.toDisplayString(n(N.extension)),1)]),e.createElementVNode("span",$o,e.toDisplayString(d(N.basename)),1)])],40,So))),256)):e.createCommentVNode("",!0)],38),e.createVNode(Xr)]))}}),To={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Ao={class:"flex leading-5 items-center"},Po=e.createElementVNode("div",{class:"mx-2","aria-label":"Storage","data-microtip-position":"top",role:"tooltip"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])],-1),Oo=["value"],jo={class:"ml-3"},Io={key:0},Lo={class:"ml-1"},zo={class:"flex leading-5 items-center"},Ro=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)],Ho=Object.assign({name:"VFStatusbar"},{props:{data:Object},setup(a){var v;const t=a,r=inject("emitter"),{getStore:i,setStore:l}=inject("storage"),n=e.ref(0),d=e.ref((v=i("adapter"))!=null?v:t.data.adapter),u=()=>{r.emit("vf-search-exit"),r.emit("vf-fetch",{q:"index",adapter:d.value}),l("adapter",d.value)};r.on("vf-nodes-selected",m=>{n.value=m.length});const g=e.ref("");return r.on("vf-search-query",({newQuery:m})=>{g.value=m}),(m,f)=>(e.openBlock(),e.createElementBlock("div",To,[e.createElementVNode("div",Ao,[Po,e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":f[0]||(f[0]=y=>d.value=y),onChange:u,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.data.storages,y=>(e.openBlock(),e.createElementBlock("option",{value:y},e.toDisplayString(y),9,Oo))),256))],544),[[e.vModelSelect,d.value]]),e.createElementVNode("div",jo,[g.value.length?(e.openBlock(),e.createElementBlock("span",Io,e.toDisplayString(a.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Lo,e.toDisplayString(n.value>0?n.value+" items selected.":""),1)])]),e.createElementVNode("div",zo,[e.createElementVNode("span",{onClick:f[1]||(f[1]=y=>e.unref(r).emit("vf-modal-show",{type:"message",title:"Vuefinder 1.0",message:"Vuefinder is a file manager component for vue 3."}))},Ro)])]))}}),Ko=(a,t=0,r=!1)=>{let i;return(...l)=>{r&&!i&&a(...l),clearTimeout(i),i=setTimeout(()=>{a(...l)},t)}},Uo=(a,t,r)=>{const i=e.ref(a);return e.customRef((n,d)=>({get(){return n(),i.value},set:Ko(u=>{i.value=u,d()},t,r)}))},Fo={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-xs"},Yo={"aria-label":"Go up a directory","data-microtip-position":"bottom-right",role:"tooltip"},Wo=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)],Xo=["onClick"],qo=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1)],Go={class:"flex leading-5"},Jo=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Zo=["title","onClick"],Qo={key:1,class:"flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},en=e.createElementVNode("svg",{class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),tn=["onKeydown"],rn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)],on=Object.assign({name:"VFBreadcrumb"},{props:{data:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(null),n=e.ref([]),d=e.ref(!1),u=e.ref(null);r.on("vf-explorer-update",()=>{var M;let x=[],D=[];l.value=(M=t.data.dirname)!=null?M:i("adapter","local")+"://",l.value.length==0&&(n.value=[]),l.value.replace(i("adapter","local")+"://","").split("/").forEach(function(T){x.push(T),x.join("/")!=""&&D.push({basename:T,name:T,path:i("adapter","local")+"://"+x.join("/"),type:"dir"})}),D.length>4&&(D=D.slice(-5),D[0].name=".."),n.value=D});const g=()=>{d.value=!1,m.value=""};r.on("vf-search-exit",()=>{g()});const v=()=>{d.value=!0,e.nextTick(()=>u.value.focus())},m=Uo("",400);e.watch(m,x=>{r.emit("vf-search-query",{newQuery:x})});const f=()=>n.value.length&&!d.value,y=x=>{var M;x.preventDefault();let D=JSON.parse(x.dataTransfer.getData("items"));if(D.find(T=>T.storage!=i("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}r.emit("vf-modal-show",{type:"move",items:{from:D,to:(M=n.value[n.value.length-2])!=null?M:{path:i("adapter","local")+"://"}}})},C=x=>{x.preventDefault(),f()?x.dataTransfer.dropEffect="copy":(x.dataTransfer.dropEffect="none",x.dataTransfer.effectAllowed="none")};return(x,D)=>(e.openBlock(),e.createElementBlock("div",Fo,[e.createElementVNode("span",Yo,[(e.openBlock(),e.createElementBlock("svg",{onDragover:D[0]||(D[0]=M=>C(M)),onDrop:D[1]||(D[1]=M=>y(M)),onClick:D[2]||(D[2]=M=>{var T,I;return!f()||e.unref(r).emit("vf-fetch",{q:"index",adapter:a.data.adapter,path:(I=(T=n.value[n.value.length-2])==null?void 0:T.path)!=null?I:e.unref(i)("adapter","local")+"://"})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",f()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Wo,34))]),d.value?(e.openBlock(),e.createElementBlock("div",Qo,[en,e.withDirectives(e.createElementVNode("input",{ref:M=>u.value=M,onKeydown:e.withKeys(g,["esc"]),"onUpdate:modelValue":D[4]||(D[4]=M=>e.isRef(m)?m.value=M:null),placeholder:"Search anything..",class:"py-0 px-2 w-full border-0 ring-0 outline-0 text-sm text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,tn),[[e.vModelText,e.unref(m)]]),(e.openBlock(),e.createElementBlock("svg",{class:"w-6 h-6 cursor-pointer",onClick:g,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},rn))])):(e.openBlock(),e.createElementBlock("div",{key:0,class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full",onClick:e.withModifiers(v,["self"])},[(e.openBlock(),e.createElementBlock("svg",{onClick:D[3]||(D[3]=M=>e.unref(r).emit("vf-fetch",{q:"index",adapter:a.data.adapter})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},qo)),e.createElementVNode("div",Go,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(M,T)=>(e.openBlock(),e.createElementBlock("div",{key:T},[Jo,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:M.basename,onClick:I=>e.unref(r).emit("vf-fetch",{q:"index",adapter:a.data.adapter,path:M.path})},e.toDisplayString(M.name),9,Zo)]))),128))])],8,Xo))]))}}),me=a=>Object.entries(a).map(t=>t.map(encodeURIComponent).join("=")).join("&"),nn=["onClick"],an=e.createElementVNode("span",{class:"px-1"},null,-1),sn=Object.assign({name:"VFContextMenu"},{props:{current:Object},setup(a){const t=a,r=inject("emitter"),i=e.ref(null),{apiUrl:l}=le(),n=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),d=e.ref([]);r.on("vf-context-selected",f=>{d.value=f});const u={newfolder:{title:"New Folder",action:()=>{r.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:"Delete",action:()=>{r.emit("vf-modal-show",{type:"delete",items:d})}},refresh:{title:"Refresh",action:()=>{r.emit("vf-fetch",{q:"index",adapter:t.current.adapter,path:t.current.dirname})}},preview:{title:"Preview",action:()=>{r.emit("vf-modal-show",{type:"preview",adapter:t.current.adapter,item:d.value[0]})}},open:{title:"Open",action:()=>{r.emit("vf-search-exit"),r.emit("vf-fetch",{q:"index",adapter:t.current.adapter,path:d.value[0].path})}},openDir:{title:"Open containing folder",action:()=>{r.emit("vf-search-exit"),r.emit("vf-fetch",{q:"index",adapter:t.current.adapter,path:d.value[0].dir})}},download:{title:"Download",action:()=>{const f=l.value+"?"+me({q:"download",adapter:d.value[0].adapter,path:d.value[0].path});r.emit("vf-download",f)}},archive:{title:"Archive",action:()=>{r.emit("vf-modal-show",{type:"archive",items:d})}},unarchive:{title:"Unarchive",action:()=>{r.emit("vf-modal-show",{type:"unarchive",items:d})}},rename:{title:"Rename",action:()=>{r.emit("vf-modal-show",{type:"rename",items:d})}}},g=f=>{r.emit("vf-contextmenu-hide"),f.action()},v=e.ref("");r.on("vf-search-query",({newQuery:f})=>{v.value=f}),r.on("vf-contextmenu-show",({event:f,area:y,items:C,target:x=null})=>{n.items=[],!x&&!v.value?(n.items.push(u.refresh),n.items.push(u.newfolder),r.emit("vf-context-selected",[]),console.log("no files selected")):C.length>1&&C.some(D=>D.path===x.path)?(n.items.push(u.refresh),n.items.push(u.archive),n.items.push(u.delete),r.emit("vf-context-selected",C),console.log(C.length+" selected (more than 1 item.)")):x&&v.value?(n.items.push(u.openDir),r.emit("vf-context-selected",[x])):(x.type=="dir"?n.items.push(u.open):n.items.push(u.preview),n.items.push(u.rename),n.items.push(u.download),x.mime_type=="application/zip"?n.items.push(u.unarchive):n.items.push(u.archive),n.items.push(u.delete),r.emit("vf-context-selected",[x]),console.log(x.type+" is selected")),m(f,y)}),r.on("vf-contextmenu-hide",()=>{n.active=!1});const m=(f,y)=>{n.active=!0,e.nextTick(()=>{let C=y.getBoundingClientRect(),x=f.pageX,D=f.pageY,M=i.value.offsetHeight,T=i.value.offsetWidth;x=C.right-f.pageX+window.scrollX<T?x-T:x,D=C.bottom-f.pageY+window.scrollY<M?D-M:D,n.positions={left:x+"px",top:D+"px"}})};return(f,y)=>n.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref:C=>i.value=C,style:e.normalizeStyle(n.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,C=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:C.title,onClick:x=>g(C)},[an,e.createElementVNode("span",null,e.toDisplayString(C.title),1)],8,nn))),128))],4)):e.createCommentVNode("",!0)}}),ln=e.createElementVNode("iframe",{id:"download_frame",style:{display:"none"}},null,-1),cn=Object.assign({name:"VueFinder"},{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1}},setup(a){const t=a,r=gr();e.provide("emitter",r);const{setStore:i,getStore:l}=gt(t.id);e.provide("storage",gt(t.id));const{apiUrl:n,setApiUrl:d}=le();d(t.url);const u=e.reactive({adapter:"local",storages:[],dirname:".",files:[]}),g=e.ref(l("viewport","grid")),v=e.ref(l("darkMode",t.dark));r.on("vf-darkMode-toggle",()=>{v.value=!v.value,i("darkMode",v.value)});const m=e.ref(l("full-screen",!1));r.on("vf-fullscreen-toggle",()=>{m.value=!m.value,i("full-screen",m.value)}),r.on("vf-view-toggle",C=>{g.value=C});const f=e.reactive({active:!1,type:"delete",data:{}});r.on("vf-modal-close",()=>{f.active=!1}),r.on("vf-modal-show",C=>{f.active=!0,f.type=C.type,f.data=C});const y=C=>{Object.assign(u,C),r.emit("vf-nodes-selected",{}),r.emit("vf-explorer-update")};return r.on("vf-fetch",C=>{Ie(n.value,{params:C}).then(x=>{r.emit("vf-modal-close"),y(x)})}),r.on("vf-download",C=>{document.getElementById("download_frame").src=C,r.emit("vf-modal-close")}),e.onMounted(()=>{r.emit("vf-fetch",{q:"index",adapter:l("adapter",u.adapter)})}),(C,x)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(v.value?"dark":"")},[e.createElementVNode("div",{class:e.normalizeClass([m.value?"fixed w-screen inset-0 z-20":"relative","border flex flex-col rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),onMousedown:x[0]||(x[0]=D=>e.unref(r).emit("vf-contextmenu-hide"))},[e.createVNode(Ir,{data:u},null,8,["data"]),e.createVNode(on,{data:u},null,8,["data"]),e.createVNode(Bo,{view:g.value,data:u},null,8,["view","data"]),e.createVNode(Ho,{data:u},null,8,["data"])],34),f.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+f.type),{key:0,selection:f.data,current:u},null,8,["selection","current"])):e.createCommentVNode("",!0),e.createVNode(sn,{current:u},null,8,["current"]),ln],2))}}),dn=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),hn={class:"fixed z-10 inset-0 overflow-y-auto"},un={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-5xl sm:w-full"},mn={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fn={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},oe={__name:"ModalLayout",setup(a){const t=inject("emitter");return e.onMounted(()=>{const r=document.querySelector(".v-f-modal input");r&&r.focus()}),(r,i)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:i[1]||(i[1]=e.withKeys(l=>e.unref(t).emit("vf-modal-close"),["esc"])),tabindex:"0"},[dn,e.createElementVNode("div",hn,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:i[0]||(i[0]=e.withModifiers(l=>e.unref(t).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",un,[e.createElementVNode("div",mn,[e.renderSlot(r.$slots,"default")]),e.createElementVNode("div",fn,[e.renderSlot(r.$slots,"buttons")])])],32)])],32))}},pn={class:"sm:flex sm:items-start"},gn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),vn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},yn=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Delete files",-1),bn={class:"mt-2"},wn=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete these files?",-1),_n={class:"flex text-sm text-gray-800 dark:text-gray-400"},kn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},xn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Sn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},En=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Dn={class:"ml-1.5"},Nn=e.createElementVNode("div",{class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},"This action cannot be undone.",-1),Vn=Object.assign({name:"VFModalDelete"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(t.selection.items),n=()=>{l.value.length&&r.emit("vf-fetch",{q:"delete",adapter:i("adapter","local"),path:t.current.dirname,items:JSON.stringify(l.value.map(({path:d,type:u})=>({path:d,type:u})))})};return(d,u)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:n,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, delete!"),e.createElementVNode("button",{type:"button",onClick:u[0]||(u[0]=g=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel"),Nn]),default:e.withCtx(()=>[e.createElementVNode("div",pn,[gn,e.createElementVNode("div",vn,[yn,e.createElementVNode("div",bn,[wn,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,g=>(e.openBlock(),e.createElementBlock("p",_n,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",kn,xn)):(e.openBlock(),e.createElementBlock("svg",Sn,En)),e.createElementVNode("span",Dn,e.toDisplayString(g.basename),1)]))),256))])])])]),_:1}))}}),Cn={class:"sm:flex sm:items-start"},Mn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),$n={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Bn={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Tn={class:"mt-2"},An={class:"text-sm text-gray-500"},Pn=Object.assign({name:"VFModalMessage"},{props:{selection:Object},setup(a){const t=inject("emitter");return(r,i)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i[0]||(i[0]=l=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close")]),default:e.withCtx(()=>{var l,n,d,u;return[e.createElementVNode("div",Cn,[Mn,e.createElementVNode("div",$n,[e.createElementVNode("h3",Bn,e.toDisplayString((n=(l=a.selection)==null?void 0:l.title)!=null?n:"Title"),1),e.createElementVNode("div",Tn,[e.createElementVNode("p",An,e.toDisplayString((u=(d=a.selection)==null?void 0:d.message)!=null?u:"Message")+".",1)])])])]}),_:1}))}}),On={class:"sm:flex sm:items-start"},jn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),In={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ln=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New Folder",-1),zn={class:"mt-2"},Rn=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new folder",-1),Hn=["onKeyup"],Kn=Object.assign({name:"VFModalNewFolder"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(""),n=()=>{l.value!=""&&(r.emit("vf-fetch",{q:"newfolder",adapter:i("adapter","local"),path:t.current.dirname,name:l.value}),r.emit("vf-toast-push",{label:"New Folder is created successfully",type:"success"}))};return(d,u)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:n,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:u[1]||(u[1]=g=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",On,[jn,e.createElementVNode("div",In,[Ln,e.createElementVNode("div",zn,[Rn,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=g=>l.value=g),onKeyup:e.withKeys(n,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Folder Name",type:"text"},null,40,Hn),[[e.vModelText,l.value]])])])])]),_:1}))}}),Un={class:"sm:flex sm:items-start"},Fn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Yn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Wn=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New File",-1),Xn={class:"mt-2"},qn=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new file",-1),Gn=["onKeyup"],Jn=Object.assign({name:"VFModalNewFile"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(""),n=()=>{l.value!=""&&r.emit("vf-fetch",{q:"newfile",adapter:i("adapter","local"),path:t.current.dirname,name:l.value})};return(d,u)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:n,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:u[1]||(u[1]=g=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Un,[Fn,e.createElementVNode("div",Yn,[Wn,e.createElementVNode("div",Xn,[qn,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=g=>l.value=g),onKeyup:e.withKeys(n,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"File Name",type:"text"},null,40,Gn),[[e.vModelText,l.value]])])])])]),_:1}))}}),Zn={class:"flex"},Qn={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ei={class:"ml-auto mb-2"},ti={key:0,class:"p-2 border font-normal border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},ri={key:1},oi={__name:"Text",props:{selection:Object},emits:["load"],setup(a,{emit:t}){const r=a,i=e.ref(""),l=e.ref(""),n=e.ref(null),d=e.ref(!1),{apiUrl:u}=le();e.onMounted(()=>{Ie(u.value,{params:{q:"preview",adapter:r.selection.adapter,path:r.selection.item.path},json:!1}).then(m=>{i.value=m,t("load")})});const g=()=>{d.value=!d.value,l.value=i.value,d.value==!0&&e.nextTick(()=>{n.value.focus()})},v=()=>{Ie(u.value,{method:"POST",params:{q:"save",adapter:r.selection.adapter,path:r.selection.item.path,content:l.value},json:!1}).then(m=>{i.value=m,t("load"),d.value=!d.value}).catch(m=>console.log(m.statusText))};return(m,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Zn,[e.createElementVNode("div",Qn,e.toDisplayString(a.selection.item.basename),1),e.createElementVNode("div",ei,[d.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},"Save")):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:f[0]||(f[0]=y=>g())},e.toDisplayString(d.value?"Cancel":"Edit"),1)])]),e.createElementVNode("div",null,[d.value?(e.openBlock(),e.createElementBlock("div",ri,[e.withDirectives(e.createElementVNode("textarea",{ref:y=>n.value=y,"onUpdate:modelValue":f[1]||(f[1]=y=>l.value=y),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",ti,e.toDisplayString(i.value),1))])],64))}},ec="";/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function bt(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,i)}return r}function wt(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bt(Object(r),!0).forEach(function(i){ai(a,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(r,i))})}return a}function ze(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ze=function(t){return typeof t}:ze=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(a)}function ni(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(a,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function ii(a,t,r){return t&&_t(a.prototype,t),r&&_t(a,r),a}function ai(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function kt(a){return si(a)||li(a)||ci(a)||di()}function si(a){if(Array.isArray(a))return Ge(a)}function li(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ci(a,t){if(!!a){if(typeof a=="string")return Ge(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ge(a,t)}}function Ge(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=a[r];return i}function di(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re=typeof window<"u"&&typeof window.document<"u",ne=Re?window:{},Je=Re&&ne.document.documentElement?"ontouchstart"in ne.document.documentElement:!1,Ze=Re?"PointerEvent"in ne:!1,R="cropper",Qe="all",xt="crop",St="move",Et="zoom",fe="e",pe="w",ve="s",ce="n",Ve="ne",Ce="nw",Me="se",$e="sw",et="".concat(R,"-crop"),Dt="".concat(R,"-disabled"),J="".concat(R,"-hidden"),Nt="".concat(R,"-hide"),hi="".concat(R,"-invisible"),He="".concat(R,"-modal"),tt="".concat(R,"-move"),Be="".concat(R,"Action"),Ke="".concat(R,"Preview"),rt="crop",Vt="move",Ct="none",ot="crop",nt="cropend",it="cropmove",at="cropstart",Mt="dblclick",ui=Je?"touchstart":"mousedown",mi=Je?"touchmove":"mousemove",fi=Je?"touchend touchcancel":"mouseup",$t=Ze?"pointerdown":ui,Bt=Ze?"pointermove":mi,Tt=Ze?"pointerup pointercancel":fi,At="ready",Pt="resize",Ot="wheel",st="zoom",jt="image/jpeg",pi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,gi=/^data:/,vi=/^data:image\/jpeg;base64,/,yi=/^img|canvas$/i,It=200,Lt=100,zt={viewMode:0,dragMode:rt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:It,minContainerHeight:Lt,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},bi='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',wi=Number.isNaN||ne.isNaN;function P(a){return typeof a=="number"&&!wi(a)}var Rt=function(t){return t>0&&t<1/0};function lt(a){return typeof a>"u"}function ge(a){return ze(a)==="object"&&a!==null}var _i=Object.prototype.hasOwnProperty;function ye(a){if(!ge(a))return!1;try{var t=a.constructor,r=t.prototype;return t&&r&&_i.call(r,"isPrototypeOf")}catch{return!1}}function Z(a){return typeof a=="function"}var ki=Array.prototype.slice;function Ht(a){return Array.from?Array.from(a):ki.call(a)}function Y(a,t){return a&&Z(t)&&(Array.isArray(a)||P(a.length)?Ht(a).forEach(function(r,i){t.call(a,r,i,a)}):ge(a)&&Object.keys(a).forEach(function(r){t.call(a,a[r],r,a)})),a}var H=Object.assign||function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];return ge(t)&&i.length>0&&i.forEach(function(n){ge(n)&&Object.keys(n).forEach(function(d){t[d]=n[d]})}),t},xi=/\.\d*(?:0|9){12}\d*$/;function be(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return xi.test(a)?Math.round(a*t)/t:a}var Si=/^width|height|left|top|marginLeft|marginTop$/;function de(a,t){var r=a.style;Y(t,function(i,l){Si.test(l)&&P(i)&&(i="".concat(i,"px")),r[l]=i})}function Ei(a,t){return a.classList?a.classList.contains(t):a.className.indexOf(t)>-1}function X(a,t){if(!!t){if(P(a.length)){Y(a,function(i){X(i,t)});return}if(a.classList){a.classList.add(t);return}var r=a.className.trim();r?r.indexOf(t)<0&&(a.className="".concat(r," ").concat(t)):a.className=t}}function ie(a,t){if(!!t){if(P(a.length)){Y(a,function(r){ie(r,t)});return}if(a.classList){a.classList.remove(t);return}a.className.indexOf(t)>=0&&(a.className=a.className.replace(t,""))}}function we(a,t,r){if(!!t){if(P(a.length)){Y(a,function(i){we(i,t,r)});return}r?X(a,t):ie(a,t)}}var Di=/([a-z\d])([A-Z])/g;function ct(a){return a.replace(Di,"$1-$2").toLowerCase()}function dt(a,t){return ge(a[t])?a[t]:a.dataset?a.dataset[t]:a.getAttribute("data-".concat(ct(t)))}function Te(a,t,r){ge(r)?a[t]=r:a.dataset?a.dataset[t]=r:a.setAttribute("data-".concat(ct(t)),r)}function Ni(a,t){if(ge(a[t]))try{delete a[t]}catch{a[t]=void 0}else if(a.dataset)try{delete a.dataset[t]}catch{a.dataset[t]=void 0}else a.removeAttribute("data-".concat(ct(t)))}var Kt=/\s\s*/,Ut=function(){var a=!1;if(Re){var t=!1,r=function(){},i=Object.defineProperty({},"once",{get:function(){return a=!0,t},set:function(n){t=n}});ne.addEventListener("test",r,i),ne.removeEventListener("test",r,i)}return a}();function re(a,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=r;t.trim().split(Kt).forEach(function(n){if(!Ut){var d=a.listeners;d&&d[n]&&d[n][r]&&(l=d[n][r],delete d[n][r],Object.keys(d[n]).length===0&&delete d[n],Object.keys(d).length===0&&delete a.listeners)}a.removeEventListener(n,l,i)})}function te(a,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=r;t.trim().split(Kt).forEach(function(n){if(i.once&&!Ut){var d=a.listeners,u=d===void 0?{}:d;l=function(){delete u[n][r],a.removeEventListener(n,l,i);for(var v=arguments.length,m=new Array(v),f=0;f<v;f++)m[f]=arguments[f];r.apply(a,m)},u[n]||(u[n]={}),u[n][r]&&a.removeEventListener(n,u[n][r],i),u[n][r]=l,a.listeners=u}a.addEventListener(n,l,i)})}function _e(a,t,r){var i;return Z(Event)&&Z(CustomEvent)?i=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,r)),a.dispatchEvent(i)}function Ft(a){var t=a.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var ht=ne.location,Vi=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Yt(a){var t=a.match(Vi);return t!==null&&(t[1]!==ht.protocol||t[2]!==ht.hostname||t[3]!==ht.port)}function Wt(a){var t="timestamp=".concat(new Date().getTime());return a+(a.indexOf("?")===-1?"?":"&")+t}function Ae(a){var t=a.rotate,r=a.scaleX,i=a.scaleY,l=a.translateX,n=a.translateY,d=[];P(l)&&l!==0&&d.push("translateX(".concat(l,"px)")),P(n)&&n!==0&&d.push("translateY(".concat(n,"px)")),P(t)&&t!==0&&d.push("rotate(".concat(t,"deg)")),P(r)&&r!==1&&d.push("scaleX(".concat(r,")")),P(i)&&i!==1&&d.push("scaleY(".concat(i,")"));var u=d.length?d.join(" "):"none";return{WebkitTransform:u,msTransform:u,transform:u}}function Ci(a){var t=wt({},a),r=0;return Y(a,function(i,l){delete t[l],Y(t,function(n){var d=Math.abs(i.startX-n.startX),u=Math.abs(i.startY-n.startY),g=Math.abs(i.endX-n.endX),v=Math.abs(i.endY-n.endY),m=Math.sqrt(d*d+u*u),f=Math.sqrt(g*g+v*v),y=(f-m)/m;Math.abs(y)>Math.abs(r)&&(r=y)})}),r}function Ue(a,t){var r=a.pageX,i=a.pageY,l={endX:r,endY:i};return t?l:wt({startX:r,startY:i},l)}function Mi(a){var t=0,r=0,i=0;return Y(a,function(l){var n=l.startX,d=l.startY;t+=n,r+=d,i+=1}),t/=i,r/=i,{pageX:t,pageY:r}}function he(a){var t=a.aspectRatio,r=a.height,i=a.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Rt(i),d=Rt(r);if(n&&d){var u=r*t;l==="contain"&&u>i||l==="cover"&&u<i?r=i/t:i=r*t}else n?r=i/t:d&&(i=r*t);return{width:i,height:r}}function $i(a){var t=a.width,r=a.height,i=a.degree;if(i=Math.abs(i)%180,i===90)return{width:r,height:t};var l=i%90*Math.PI/180,n=Math.sin(l),d=Math.cos(l),u=t*d+r*n,g=t*n+r*d;return i>90?{width:g,height:u}:{width:u,height:g}}function Bi(a,t,r,i){var l=t.aspectRatio,n=t.naturalWidth,d=t.naturalHeight,u=t.rotate,g=u===void 0?0:u,v=t.scaleX,m=v===void 0?1:v,f=t.scaleY,y=f===void 0?1:f,C=r.aspectRatio,x=r.naturalWidth,D=r.naturalHeight,M=i.fillColor,T=M===void 0?"transparent":M,I=i.imageSmoothingEnabled,j=I===void 0?!0:I,Q=i.imageSmoothingQuality,U=Q===void 0?"low":Q,b=i.maxWidth,$=b===void 0?1/0:b,N=i.maxHeight,L=N===void 0?1/0:N,O=i.minWidth,q=O===void 0?0:O,G=i.minHeight,ae=G===void 0?0:G,z=document.createElement("canvas"),F=z.getContext("2d"),se=he({aspectRatio:C,width:$,height:L}),ke=he({aspectRatio:C,width:q,height:ae},"cover"),Pe=Math.min(se.width,Math.max(ke.width,x)),Oe=Math.min(se.height,Math.max(ke.height,D)),Fe=he({aspectRatio:l,width:$,height:L}),Ye=he({aspectRatio:l,width:q,height:ae},"cover"),We=Math.min(Fe.width,Math.max(Ye.width,n)),xe=Math.min(Fe.height,Math.max(Ye.height,d)),mt=[-We/2,-xe/2,We,xe];return z.width=be(Pe),z.height=be(Oe),F.fillStyle=T,F.fillRect(0,0,Pe,Oe),F.save(),F.translate(Pe/2,Oe/2),F.rotate(g*Math.PI/180),F.scale(m,y),F.imageSmoothingEnabled=j,F.imageSmoothingQuality=U,F.drawImage.apply(F,[a].concat(kt(mt.map(function(Se){return Math.floor(be(Se))})))),F.restore(),z}var Xt=String.fromCharCode;function Ti(a,t,r){var i="";r+=t;for(var l=t;l<r;l+=1)i+=Xt(a.getUint8(l));return i}var Ai=/^data:.*,/;function Pi(a){var t=a.replace(Ai,""),r=atob(t),i=new ArrayBuffer(r.length),l=new Uint8Array(i);return Y(l,function(n,d){l[d]=r.charCodeAt(d)}),i}function Oi(a,t){for(var r=[],i=8192,l=new Uint8Array(a);l.length>0;)r.push(Xt.apply(null,Ht(l.subarray(0,i)))),l=l.subarray(i);return"data:".concat(t,";base64,").concat(btoa(r.join("")))}function ji(a){var t=new DataView(a),r;try{var i,l,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var d=t.byteLength,u=2;u+1<d;){if(t.getUint8(u)===255&&t.getUint8(u+1)===225){l=u;break}u+=1}if(l){var g=l+4,v=l+10;if(Ti(t,g,4)==="Exif"){var m=t.getUint16(v);if(i=m===18761,(i||m===19789)&&t.getUint16(v+2,i)===42){var f=t.getUint32(v+4,i);f>=8&&(n=v+f)}}}if(n){var y=t.getUint16(n,i),C,x;for(x=0;x<y;x+=1)if(C=n+x*12+2,t.getUint16(C,i)===274){C+=8,r=t.getUint16(C,i),t.setUint16(C,1,i);break}}}catch{r=1}return r}function Ii(a){var t=0,r=1,i=1;switch(a){case 2:r=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:r,scaleY:i}}var Li={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,r=this.options,i=this.container,l=this.cropper,n=Number(r.minContainerWidth),d=Number(r.minContainerHeight);X(l,J),ie(t,J);var u={width:Math.max(i.offsetWidth,n>=0?n:It),height:Math.max(i.offsetHeight,d>=0?d:Lt)};this.containerData=u,de(l,{width:u.width,height:u.height}),X(t,J),ie(l,J)},initCanvas:function(){var t=this.containerData,r=this.imageData,i=this.options.viewMode,l=Math.abs(r.rotate)%180===90,n=l?r.naturalHeight:r.naturalWidth,d=l?r.naturalWidth:r.naturalHeight,u=n/d,g=t.width,v=t.height;t.height*u>t.width?i===3?g=t.height*u:v=t.width/u:i===3?v=t.width/u:g=t.height*u;var m={aspectRatio:u,naturalWidth:n,naturalHeight:d,width:g,height:v};this.canvasData=m,this.limited=i===1||i===2,this.limitCanvas(!0,!0),m.width=Math.min(Math.max(m.width,m.minWidth),m.maxWidth),m.height=Math.min(Math.max(m.height,m.minHeight),m.maxHeight),m.left=(t.width-m.width)/2,m.top=(t.height-m.height)/2,m.oldLeft=m.left,m.oldTop=m.top,this.initialCanvasData=H({},m)},limitCanvas:function(t,r){var i=this.options,l=this.containerData,n=this.canvasData,d=this.cropBoxData,u=i.viewMode,g=n.aspectRatio,v=this.cropped&&d;if(t){var m=Number(i.minCanvasWidth)||0,f=Number(i.minCanvasHeight)||0;u>1?(m=Math.max(m,l.width),f=Math.max(f,l.height),u===3&&(f*g>m?m=f*g:f=m/g)):u>0&&(m?m=Math.max(m,v?d.width:0):f?f=Math.max(f,v?d.height:0):v&&(m=d.width,f=d.height,f*g>m?m=f*g:f=m/g));var y=he({aspectRatio:g,width:m,height:f});m=y.width,f=y.height,n.minWidth=m,n.minHeight=f,n.maxWidth=1/0,n.maxHeight=1/0}if(r)if(u>(v?0:1)){var C=l.width-n.width,x=l.height-n.height;n.minLeft=Math.min(0,C),n.minTop=Math.min(0,x),n.maxLeft=Math.max(0,C),n.maxTop=Math.max(0,x),v&&this.limited&&(n.minLeft=Math.min(d.left,d.left+(d.width-n.width)),n.minTop=Math.min(d.top,d.top+(d.height-n.height)),n.maxLeft=d.left,n.maxTop=d.top,u===2&&(n.width>=l.width&&(n.minLeft=Math.min(0,C),n.maxLeft=Math.max(0,C)),n.height>=l.height&&(n.minTop=Math.min(0,x),n.maxTop=Math.max(0,x))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=l.width,n.maxTop=l.height},renderCanvas:function(t,r){var i=this.canvasData,l=this.imageData;if(r){var n=$i({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),d=n.width,u=n.height,g=i.width*(d/i.naturalWidth),v=i.height*(u/i.naturalHeight);i.left-=(g-i.width)/2,i.top-=(v-i.height)/2,i.width=g,i.height=v,i.aspectRatio=d/u,i.naturalWidth=d,i.naturalHeight=u,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,de(this.canvas,H({width:i.width,height:i.height},Ae({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var r=this.canvasData,i=this.imageData,l=i.naturalWidth*(r.width/r.naturalWidth),n=i.naturalHeight*(r.height/r.naturalHeight);H(i,{width:l,height:n,left:(r.width-l)/2,top:(r.height-n)/2}),de(this.image,H({width:i.width,height:i.height},Ae(H({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,r=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,n={width:r.width,height:r.height};i&&(r.height*i>r.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*l),n.height=Math.max(n.minHeight,n.height*l),n.left=r.left+(r.width-n.width)/2,n.top=r.top+(r.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=H({},n)},limitCropBox:function(t,r){var i=this.options,l=this.containerData,n=this.canvasData,d=this.cropBoxData,u=this.limited,g=i.aspectRatio;if(t){var v=Number(i.minCropBoxWidth)||0,m=Number(i.minCropBoxHeight)||0,f=u?Math.min(l.width,n.width,n.width+n.left,l.width-n.left):l.width,y=u?Math.min(l.height,n.height,n.height+n.top,l.height-n.top):l.height;v=Math.min(v,l.width),m=Math.min(m,l.height),g&&(v&&m?m*g>v?m=v/g:v=m*g:v?m=v/g:m&&(v=m*g),y*g>f?y=f/g:f=y*g),d.minWidth=Math.min(v,f),d.minHeight=Math.min(m,y),d.maxWidth=f,d.maxHeight=y}r&&(u?(d.minLeft=Math.max(0,n.left),d.minTop=Math.max(0,n.top),d.maxLeft=Math.min(l.width,n.left+n.width)-d.width,d.maxTop=Math.min(l.height,n.top+n.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=l.width-d.width,d.maxTop=l.height-d.height))},renderCropBox:function(){var t=this.options,r=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Te(this.face,Be,i.width>=r.width&&i.height>=r.height?St:Qe),de(this.cropBox,H({width:i.width,height:i.height},Ae({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),_e(this.element,ot,this.getData())}},zi={initPreview:function(){var t=this.element,r=this.crossOrigin,i=this.options.preview,l=r?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",d=document.createElement("img");if(r&&(d.crossOrigin=r),d.src=l,d.alt=n,this.viewBox.appendChild(d),this.viewBoxImage=d,!!i){var u=i;typeof i=="string"?u=t.ownerDocument.querySelectorAll(i):i.querySelector&&(u=[i]),this.previews=u,Y(u,function(g){var v=document.createElement("img");Te(g,Ke,{width:g.offsetWidth,height:g.offsetHeight,html:g.innerHTML}),r&&(v.crossOrigin=r),v.src=l,v.alt=n,v.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',g.innerHTML="",g.appendChild(v)})}},resetPreview:function(){Y(this.previews,function(t){var r=dt(t,Ke);de(t,{width:r.width,height:r.height}),t.innerHTML=r.html,Ni(t,Ke)})},preview:function(){var t=this.imageData,r=this.canvasData,i=this.cropBoxData,l=i.width,n=i.height,d=t.width,u=t.height,g=i.left-r.left-t.left,v=i.top-r.top-t.top;!this.cropped||this.disabled||(de(this.viewBoxImage,H({width:d,height:u},Ae(H({translateX:-g,translateY:-v},t)))),Y(this.previews,function(m){var f=dt(m,Ke),y=f.width,C=f.height,x=y,D=C,M=1;l&&(M=y/l,D=n*M),n&&D>C&&(M=C/n,x=l*M,D=C),de(m,{width:x,height:D}),de(m.getElementsByTagName("img")[0],H({width:d*M,height:u*M},Ae(H({translateX:-g*M,translateY:-v*M},t))))}))}},Ri={bind:function(){var t=this.element,r=this.options,i=this.cropper;Z(r.cropstart)&&te(t,at,r.cropstart),Z(r.cropmove)&&te(t,it,r.cropmove),Z(r.cropend)&&te(t,nt,r.cropend),Z(r.crop)&&te(t,ot,r.crop),Z(r.zoom)&&te(t,st,r.zoom),te(i,$t,this.onCropStart=this.cropStart.bind(this)),r.zoomable&&r.zoomOnWheel&&te(i,Ot,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&te(i,Mt,this.onDblclick=this.dblclick.bind(this)),te(t.ownerDocument,Bt,this.onCropMove=this.cropMove.bind(this)),te(t.ownerDocument,Tt,this.onCropEnd=this.cropEnd.bind(this)),r.responsive&&te(window,Pt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,r=this.options,i=this.cropper;Z(r.cropstart)&&re(t,at,r.cropstart),Z(r.cropmove)&&re(t,it,r.cropmove),Z(r.cropend)&&re(t,nt,r.cropend),Z(r.crop)&&re(t,ot,r.crop),Z(r.zoom)&&re(t,st,r.zoom),re(i,$t,this.onCropStart),r.zoomable&&r.zoomOnWheel&&re(i,Ot,this.onWheel,{passive:!1,capture:!0}),r.toggleDragModeOnDblclick&&re(i,Mt,this.onDblclick),re(t.ownerDocument,Bt,this.onCropMove),re(t.ownerDocument,Tt,this.onCropEnd),r.responsive&&re(window,Pt,this.onResize)}},Hi={resize:function(){if(!this.disabled){var t=this.options,r=this.container,i=this.containerData,l=r.offsetWidth/i.width,n=r.offsetHeight/i.height,d=Math.abs(l-1)>Math.abs(n-1)?l:n;if(d!==1){var u,g;t.restore&&(u=this.getCanvasData(),g=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Y(u,function(v,m){u[m]=v*d})),this.setCropBoxData(Y(g,function(v,m){g[m]=v*d})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ct||this.setDragMode(Ei(this.dragBox,et)?Vt:rt)},wheel:function(t){var r=this,i=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*i,t)))},cropStart:function(t){var r=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(P(r)&&r!==1||P(i)&&i!==0||t.ctrlKey))){var l=this.options,n=this.pointers,d;t.changedTouches?Y(t.changedTouches,function(u){n[u.identifier]=Ue(u)}):n[t.pointerId||0]=Ue(t),Object.keys(n).length>1&&l.zoomable&&l.zoomOnTouch?d=Et:d=dt(t.target,Be),!!pi.test(d)&&_e(this.element,at,{originalEvent:t,action:d})!==!1&&(t.preventDefault(),this.action=d,this.cropping=!1,d===xt&&(this.cropping=!0,X(this.dragBox,He)))}},cropMove:function(t){var r=this.action;if(!(this.disabled||!r)){var i=this.pointers;t.preventDefault(),_e(this.element,it,{originalEvent:t,action:r})!==!1&&(t.changedTouches?Y(t.changedTouches,function(l){H(i[l.identifier]||{},Ue(l,!0))}):H(i[t.pointerId||0]||{},Ue(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var r=this.action,i=this.pointers;t.changedTouches?Y(t.changedTouches,function(l){delete i[l.identifier]}):delete i[t.pointerId||0],r&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,we(this.dragBox,He,this.cropped&&this.options.modal)),_e(this.element,nt,{originalEvent:t,action:r}))}}},Ki={change:function(t){var r=this.options,i=this.canvasData,l=this.containerData,n=this.cropBoxData,d=this.pointers,u=this.action,g=r.aspectRatio,v=n.left,m=n.top,f=n.width,y=n.height,C=v+f,x=m+y,D=0,M=0,T=l.width,I=l.height,j=!0,Q;!g&&t.shiftKey&&(g=f&&y?f/y:1),this.limited&&(D=n.minLeft,M=n.minTop,T=D+Math.min(l.width,i.width,i.left+i.width),I=M+Math.min(l.height,i.height,i.top+i.height));var U=d[Object.keys(d)[0]],b={x:U.endX-U.startX,y:U.endY-U.startY},$=function(L){switch(L){case fe:C+b.x>T&&(b.x=T-C);break;case pe:v+b.x<D&&(b.x=D-v);break;case ce:m+b.y<M&&(b.y=M-m);break;case ve:x+b.y>I&&(b.y=I-x);break}};switch(u){case Qe:v+=b.x,m+=b.y;break;case fe:if(b.x>=0&&(C>=T||g&&(m<=M||x>=I))){j=!1;break}$(fe),f+=b.x,f<0&&(u=pe,f=-f,v-=f),g&&(y=f/g,m+=(n.height-y)/2);break;case ce:if(b.y<=0&&(m<=M||g&&(v<=D||C>=T))){j=!1;break}$(ce),y-=b.y,m+=b.y,y<0&&(u=ve,y=-y,m-=y),g&&(f=y*g,v+=(n.width-f)/2);break;case pe:if(b.x<=0&&(v<=D||g&&(m<=M||x>=I))){j=!1;break}$(pe),f-=b.x,v+=b.x,f<0&&(u=fe,f=-f,v-=f),g&&(y=f/g,m+=(n.height-y)/2);break;case ve:if(b.y>=0&&(x>=I||g&&(v<=D||C>=T))){j=!1;break}$(ve),y+=b.y,y<0&&(u=ce,y=-y,m-=y),g&&(f=y*g,v+=(n.width-f)/2);break;case Ve:if(g){if(b.y<=0&&(m<=M||C>=T)){j=!1;break}$(ce),y-=b.y,m+=b.y,f=y*g}else $(ce),$(fe),b.x>=0?C<T?f+=b.x:b.y<=0&&m<=M&&(j=!1):f+=b.x,b.y<=0?m>M&&(y-=b.y,m+=b.y):(y-=b.y,m+=b.y);f<0&&y<0?(u=$e,y=-y,f=-f,m-=y,v-=f):f<0?(u=Ce,f=-f,v-=f):y<0&&(u=Me,y=-y,m-=y);break;case Ce:if(g){if(b.y<=0&&(m<=M||v<=D)){j=!1;break}$(ce),y-=b.y,m+=b.y,f=y*g,v+=n.width-f}else $(ce),$(pe),b.x<=0?v>D?(f-=b.x,v+=b.x):b.y<=0&&m<=M&&(j=!1):(f-=b.x,v+=b.x),b.y<=0?m>M&&(y-=b.y,m+=b.y):(y-=b.y,m+=b.y);f<0&&y<0?(u=Me,y=-y,f=-f,m-=y,v-=f):f<0?(u=Ve,f=-f,v-=f):y<0&&(u=$e,y=-y,m-=y);break;case $e:if(g){if(b.x<=0&&(v<=D||x>=I)){j=!1;break}$(pe),f-=b.x,v+=b.x,y=f/g}else $(ve),$(pe),b.x<=0?v>D?(f-=b.x,v+=b.x):b.y>=0&&x>=I&&(j=!1):(f-=b.x,v+=b.x),b.y>=0?x<I&&(y+=b.y):y+=b.y;f<0&&y<0?(u=Ve,y=-y,f=-f,m-=y,v-=f):f<0?(u=Me,f=-f,v-=f):y<0&&(u=Ce,y=-y,m-=y);break;case Me:if(g){if(b.x>=0&&(C>=T||x>=I)){j=!1;break}$(fe),f+=b.x,y=f/g}else $(ve),$(fe),b.x>=0?C<T?f+=b.x:b.y>=0&&x>=I&&(j=!1):f+=b.x,b.y>=0?x<I&&(y+=b.y):y+=b.y;f<0&&y<0?(u=Ce,y=-y,f=-f,m-=y,v-=f):f<0?(u=$e,f=-f,v-=f):y<0&&(u=Ve,y=-y,m-=y);break;case St:this.move(b.x,b.y),j=!1;break;case Et:this.zoom(Ci(d),t),j=!1;break;case xt:if(!b.x||!b.y){j=!1;break}Q=Ft(this.cropper),v=U.startX-Q.left,m=U.startY-Q.top,f=n.minWidth,y=n.minHeight,b.x>0?u=b.y>0?Me:Ve:b.x<0&&(v-=f,u=b.y>0?$e:Ce),b.y<0&&(m-=y),this.cropped||(ie(this.cropBox,J),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}j&&(n.width=f,n.height=y,n.left=v,n.top=m,this.action=u,this.renderCropBox()),Y(d,function(N){N.startX=N.endX,N.startY=N.endY})}},Ui={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&X(this.dragBox,He),ie(this.cropBox,J),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=H({},this.initialImageData),this.canvasData=H({},this.initialCanvasData),this.cropBoxData=H({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(H(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ie(this.dragBox,He),X(this.cropBox,J)),this},replace:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),r?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Y(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ie(this.cropper,Dt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,X(this.cropper,Dt)),this},destroy:function(){var t=this.element;return t[R]?(t[R]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,l=i.left,n=i.top;return this.moveTo(lt(t)?t:l+Number(t),lt(r)?r:n+Number(r))},moveTo:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,l=!1;return t=Number(t),r=Number(r),this.ready&&!this.disabled&&this.options.movable&&(P(t)&&(i.left=t,l=!0),P(r)&&(i.top=r,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,r){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,r)},zoomTo:function(t,r,i){var l=this.options,n=this.canvasData,d=n.width,u=n.height,g=n.naturalWidth,v=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var m=g*t,f=v*t;if(_e(this.element,st,{ratio:t,oldRatio:d/g,originalEvent:i})===!1)return this;if(i){var y=this.pointers,C=Ft(this.cropper),x=y&&Object.keys(y).length?Mi(y):{pageX:i.pageX,pageY:i.pageY};n.left-=(m-d)*((x.pageX-C.left-n.left)/d),n.top-=(f-u)*((x.pageY-C.top-n.top)/u)}else ye(r)&&P(r.x)&&P(r.y)?(n.left-=(m-d)*((r.x-n.left)/d),n.top-=(f-u)*((r.y-n.top)/u)):(n.left-=(m-d)/2,n.top-=(f-u)/2);n.width=m,n.height=f,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),P(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var r=this.imageData.scaleY;return this.scale(t,P(r)?r:1)},scaleY:function(t){var r=this.imageData.scaleX;return this.scale(P(r)?r:1,t)},scale:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,l=!1;return t=Number(t),r=Number(r),this.ready&&!this.disabled&&this.options.scalable&&(P(t)&&(i.scaleX=t,l=!0),P(r)&&(i.scaleY=r,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.options,i=this.imageData,l=this.canvasData,n=this.cropBoxData,d;if(this.ready&&this.cropped){d={x:n.left-l.left,y:n.top-l.top,width:n.width,height:n.height};var u=i.width/i.naturalWidth;if(Y(d,function(m,f){d[f]=m/u}),t){var g=Math.round(d.y+d.height),v=Math.round(d.x+d.width);d.x=Math.round(d.x),d.y=Math.round(d.y),d.width=v-d.x,d.height=g-d.y}}else d={x:0,y:0,width:0,height:0};return r.rotatable&&(d.rotate=i.rotate||0),r.scalable&&(d.scaleX=i.scaleX||1,d.scaleY=i.scaleY||1),d},setData:function(t){var r=this.options,i=this.imageData,l=this.canvasData,n={};if(this.ready&&!this.disabled&&ye(t)){var d=!1;r.rotatable&&P(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,d=!0),r.scalable&&(P(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,d=!0),P(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,d=!0)),d&&this.renderCanvas(!0,!0);var u=i.width/i.naturalWidth;P(t.x)&&(n.left=t.x*u+l.left),P(t.y)&&(n.top=t.y*u+l.top),P(t.width)&&(n.width=t.width*u),P(t.height)&&(n.height=t.height*u),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?H({},this.containerData):{}},getImageData:function(){return this.sized?H({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,r={};return this.ready&&Y(["left","top","width","height","naturalWidth","naturalHeight"],function(i){r[i]=t[i]}),r},setCanvasData:function(t){var r=this.canvasData,i=r.aspectRatio;return this.ready&&!this.disabled&&ye(t)&&(P(t.left)&&(r.left=t.left),P(t.top)&&(r.top=t.top),P(t.width)?(r.width=t.width,r.height=t.width/i):P(t.height)&&(r.height=t.height,r.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,r;return this.ready&&this.cropped&&(r={left:t.left,top:t.top,width:t.width,height:t.height}),r||{}},setCropBoxData:function(t){var r=this.cropBoxData,i=this.options.aspectRatio,l,n;return this.ready&&this.cropped&&!this.disabled&&ye(t)&&(P(t.left)&&(r.left=t.left),P(t.top)&&(r.top=t.top),P(t.width)&&t.width!==r.width&&(l=!0,r.width=t.width),P(t.height)&&t.height!==r.height&&(n=!0,r.height=t.height),i&&(l?r.height=r.width/i:n&&(r.width=r.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var r=this.canvasData,i=Bi(this.image,this.imageData,r,t);if(!this.cropped)return i;var l=this.getData(),n=l.x,d=l.y,u=l.width,g=l.height,v=i.width/Math.floor(r.naturalWidth);v!==1&&(n*=v,d*=v,u*=v,g*=v);var m=u/g,f=he({aspectRatio:m,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),y=he({aspectRatio:m,width:t.minWidth||0,height:t.minHeight||0},"cover"),C=he({aspectRatio:m,width:t.width||(v!==1?i.width:u),height:t.height||(v!==1?i.height:g)}),x=C.width,D=C.height;x=Math.min(f.width,Math.max(y.width,x)),D=Math.min(f.height,Math.max(y.height,D));var M=document.createElement("canvas"),T=M.getContext("2d");M.width=be(x),M.height=be(D),T.fillStyle=t.fillColor||"transparent",T.fillRect(0,0,x,D);var I=t.imageSmoothingEnabled,j=I===void 0?!0:I,Q=t.imageSmoothingQuality;T.imageSmoothingEnabled=j,Q&&(T.imageSmoothingQuality=Q);var U=i.width,b=i.height,$=n,N=d,L,O,q,G,ae,z;$<=-u||$>U?($=0,L=0,q=0,ae=0):$<=0?(q=-$,$=0,L=Math.min(U,u+$),ae=L):$<=U&&(q=0,L=Math.min(u,U-$),ae=L),L<=0||N<=-g||N>b?(N=0,O=0,G=0,z=0):N<=0?(G=-N,N=0,O=Math.min(b,g+N),z=O):N<=b&&(G=0,O=Math.min(g,b-N),z=O);var F=[$,N,L,O];if(ae>0&&z>0){var se=x/u;F.push(q*se,G*se,ae*se,z*se)}return T.drawImage.apply(T,[i].concat(kt(F.map(function(ke){return Math.floor(be(ke))})))),M},setAspectRatio:function(t){var r=this.options;return!this.disabled&&!lt(t)&&(r.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var r=this.options,i=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var n=t===rt,d=r.movable&&t===Vt;t=n||d?t:Ct,r.dragMode=t,Te(i,Be,t),we(i,et,n),we(i,tt,d),r.cropBoxMovable||(Te(l,Be,t),we(l,et,n),we(l,tt,d))}return this}},Fi=ne.Cropper,qt=function(){function a(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ni(this,a),!t||!yi.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=H({},zt,ye(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return ii(a,[{key:"init",value:function(){var r=this.element,i=r.tagName.toLowerCase(),l;if(!r[R]){if(r[R]=this,i==="img"){if(this.isImg=!0,l=r.getAttribute("src")||"",this.originalUrl=l,!l)return;l=r.src}else i==="canvas"&&window.HTMLCanvasElement&&(l=r.toDataURL());this.load(l)}}},{key:"load",value:function(r){var i=this;if(!!r){this.url=r,this.imageData={};var l=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(gi.test(r)){vi.test(r)?this.read(Pi(r)):this.clone();return}var d=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=d,d.onabort=u,d.onerror=u,d.ontimeout=u,d.onprogress=function(){d.getResponseHeader("content-type")!==jt&&d.abort()},d.onload=function(){i.read(d.response)},d.onloadend=function(){i.reloading=!1,i.xhr=null},n.checkCrossOrigin&&Yt(r)&&l.crossOrigin&&(r=Wt(r)),d.open("GET",r,!0),d.responseType="arraybuffer",d.withCredentials=l.crossOrigin==="use-credentials",d.send()}}},{key:"read",value:function(r){var i=this.options,l=this.imageData,n=ji(r),d=0,u=1,g=1;if(n>1){this.url=Oi(r,jt);var v=Ii(n);d=v.rotate,u=v.scaleX,g=v.scaleY}i.rotatable&&(l.rotate=d),i.scalable&&(l.scaleX=u,l.scaleY=g),this.clone()}},{key:"clone",value:function(){var r=this.element,i=this.url,l=r.crossOrigin,n=i;this.options.checkCrossOrigin&&Yt(i)&&(l||(l="anonymous"),n=Wt(i)),this.crossOrigin=l,this.crossOriginUrl=n;var d=document.createElement("img");l&&(d.crossOrigin=l),d.src=n||i,d.alt=r.alt||"The image to crop",this.image=d,d.onload=this.start.bind(this),d.onerror=this.stop.bind(this),X(d,Nt),r.parentNode.insertBefore(d,r.nextSibling)}},{key:"start",value:function(){var r=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var l=ne.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ne.navigator.userAgent),n=function(v,m){H(r.imageData,{naturalWidth:v,naturalHeight:m,aspectRatio:v/m}),r.initialImageData=H({},r.imageData),r.sizing=!1,r.sized=!0,r.build()};if(i.naturalWidth&&!l){n(i.naturalWidth,i.naturalHeight);return}var d=document.createElement("img"),u=document.body||document.documentElement;this.sizingImage=d,d.onload=function(){n(d.width,d.height),l||u.removeChild(d)},d.src=i.src,l||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",u.appendChild(d))}},{key:"stop",value:function(){var r=this.image;r.onload=null,r.onerror=null,r.parentNode.removeChild(r),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var r=this.element,i=this.options,l=this.image,n=r.parentNode,d=document.createElement("div");d.innerHTML=bi;var u=d.querySelector(".".concat(R,"-container")),g=u.querySelector(".".concat(R,"-canvas")),v=u.querySelector(".".concat(R,"-drag-box")),m=u.querySelector(".".concat(R,"-crop-box")),f=m.querySelector(".".concat(R,"-face"));this.container=n,this.cropper=u,this.canvas=g,this.dragBox=v,this.cropBox=m,this.viewBox=u.querySelector(".".concat(R,"-view-box")),this.face=f,g.appendChild(l),X(r,J),n.insertBefore(u,r.nextSibling),this.isImg||ie(l,Nt),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,X(m,J),i.guides||X(m.getElementsByClassName("".concat(R,"-dashed")),J),i.center||X(m.getElementsByClassName("".concat(R,"-center")),J),i.background&&X(u,"".concat(R,"-bg")),i.highlight||X(f,hi),i.cropBoxMovable&&(X(f,tt),Te(f,Be,Qe)),i.cropBoxResizable||(X(m.getElementsByClassName("".concat(R,"-line")),J),X(m.getElementsByClassName("".concat(R,"-point")),J)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),Z(i.ready)&&te(r,At,i.ready,{once:!0}),_e(r,At)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ie(this.element,J))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Fi,a}},{key:"setDefaults",value:function(r){H(zt,ye(r)&&r)}}]),a}();H(qt.prototype,Li,zi,Ri,Hi,Ki,Ui);const Yi={class:"flex"},Wi={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Xi={class:"ml-auto mb-2"},qi={class:"w-full flex justify-center"},Gi=["src"],Ji={__name:"Image",props:{selection:Object},emits:["load"],setup(a,{emit:t}){const r=a,{apiUrl:i}=le(),l=()=>i.value+"?"+me({q:"preview",adapter:r.selection.adapter,path:r.selection.item.path}),n=e.ref(null),d=e.ref(null),u=e.ref(!1),g=()=>{u.value=!u.value,u.value?d.value=new qt(n.value,{crop(m){}}):d.value.destroy()},v=()=>{d.value.getCroppedCanvas({width:795,height:341}).toBlob(m=>{Ie(i.value,{method:"POST",params:{q:"upload",adapter:r.selection.adapter,path:r.selection.item.path,file:m},name:r.selection.item.basename,json:!1}).then(f=>{n.value.src=l(),g(),t("load")}).catch(f=>console.log(f.statusText))})};return onMounted(()=>{t("load")}),(m,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Yi,[e.createElementVNode("h3",Wi,e.toDisplayString(a.selection.item.basename),1),e.createElementVNode("div",Xi,[u.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},"Crop")):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:f[0]||(f[0]=y=>g())},e.toDisplayString(u.value?"Cancel":"Edit"),1)])]),e.createElementVNode("div",qi,[e.createElementVNode("img",{ref:y=>n.value=y,class:"max-w-[60vh] max-h-[60vh]",src:l(),alt:""},null,8,Gi)])],64))}},Zi={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Qi=e.createElementVNode("div",null," Default view.. ",-1),ea={__name:"Default",props:{selection:Object},emits:["load"],setup(a,{emit:t}){return e.onMounted(()=>{t("load")}),(r,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",Zi,e.toDisplayString(a.selection.item.basename),1),Qi],64))}},ta={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ra={class:"w-full",preload:"",controls:""},oa=["src"],na=e.createTextVNode(" Your browser does not support the video tag. "),ia={__name:"Video",props:{selection:Object},emits:["load"],setup(a,{emit:t}){const r=a,{apiUrl:i}=le(),l=()=>i.value+"?"+me({q:"preview",adapter:r.selection.adapter,path:r.selection.item.path});return e.onMounted(()=>{t("load")}),(n,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",ta,e.toDisplayString(a.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("video",ra,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,oa),na])])],64))}},aa={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},sa={class:"w-full",controls:""},la=["src"],ca=e.createTextVNode(" Your browser does not support the audio element. "),da={__name:"Audio",props:{selection:Object},emits:["load"],setup(a,{emit:t}){const r=a,{apiUrl:i}=le(),l=()=>i.value+"?"+me({q:"preview",adapter:r.selection.adapter,path:r.selection.item.path});return e.onMounted(()=>{t("load")}),(n,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",aa,e.toDisplayString(a.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("audio",sa,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,la),ca])])],64))}},ha={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ua=["data"],ma=["src"],fa={__name:"Pdf",props:{selection:Object},emits:["load"],setup(a,{emit:t}){const r=a,{apiUrl:i}=le(),l=()=>i.value+"?"+me({q:"preview",adapter:r.selection.adapter,path:r.selection.item.path});return e.onMounted(()=>{t("load")}),(n,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",ha,e.toDisplayString(a.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:l(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,ma)],8,ua)])],64))}},pa={class:"sm:flex sm:items-start"},ga={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},va={class:"text-gray-700 dark:text-gray-200 text-sm"},ya={key:0,class:"flex leading-5"},ba=[e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e.createElementVNode("span",null,"Loading",-1)],wa=Object.assign({name:"VFModalPreview"},{props:{selection:Object},setup(a){const t=a,{apiUrl:r}=le(),i=inject("emitter"),l=e.ref(!1),n=u=>{var g;return((g=t.selection.item.mime_type)!=null?g:"").startsWith(u)},d=()=>{const u=r.value+"?"+me({q:"download",adapter:t.selection.adapter,path:t.selection.item.path});i.emit("vf-download",u)};return(u,g)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g[6]||(g[6]=v=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close"),e.createElementVNode("button",{type:"button",onClick:g[7]||(g[7]=v=>d()),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Download")]),default:e.withCtx(()=>[e.createElementVNode("div",pa,[e.createElementVNode("div",ga,[e.createElementVNode("div",null,[n("text")?(e.openBlock(),e.createBlock(oi,{key:0,selection:a.selection,onLoad:g[0]||(g[0]=v=>l.value=!0)},null,8,["selection"])):n("image")?(e.openBlock(),e.createBlock(Ji,{key:1,selection:a.selection,onLoad:g[1]||(g[1]=v=>l.value=!0)},null,8,["selection"])):n("video")?(e.openBlock(),e.createBlock(ia,{key:2,selection:a.selection,onLoad:g[2]||(g[2]=v=>l.value=!0)},null,8,["selection"])):n("audio")?(e.openBlock(),e.createBlock(da,{key:3,selection:a.selection,onLoad:g[3]||(g[3]=v=>l.value=!0)},null,8,["selection"])):n("application/pdf")?(e.openBlock(),e.createBlock(fa,{key:4,selection:a.selection,onLoad:g[4]||(g[4]=v=>l.value=!0)},null,8,["selection"])):(e.openBlock(),e.createBlock(ea,{key:5,selection:a.selection,onLoad:g[5]||(g[5]=v=>l.value=!0)},null,8,["selection"]))]),e.createElementVNode("div",va,[e.createElementVNode("p",null,e.toDisplayString(a.selection.item.path),1),e.createElementVNode("p",null,"mime_type: "+e.toDisplayString(a.selection.item.mime_type),1),l.value==!1?(e.openBlock(),e.createElementBlock("div",ya,ba)):e.createCommentVNode("",!0)])])])]),_:1}))}}),_a={class:"sm:flex sm:items-start"},ka=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),xa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Sa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ea={class:"mt-2"},Da={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},Na={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Va=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Ca={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ma=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],$a={class:"ml-1.5"},Ba=["onKeyup"],Ta=Object.assign({name:"VFModalRename"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(t.selection.items[0]),n=e.ref(t.selection.items[0].basename),d=()=>{n.value!=""&&r.emit("vf-fetch",{q:"rename",adapter:i("adapter","local"),path:t.current.dirname,item:l.value.path,name:n.value})};return(u,g)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Rename!"),e.createElementVNode("button",{type:"button",onClick:g[1]||(g[1]=v=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",_a,[ka,e.createElementVNode("div",xa,[e.createElementVNode("h3",Sa,"Rename your "+e.toDisplayString(l.value.type=="dir"?"folder":"file"),1),e.createElementVNode("div",Ea,[e.createElementVNode("p",Da,[l.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Na,Va)):(e.openBlock(),e.createElementBlock("svg",Ca,Ma)),e.createElementVNode("span",$a,e.toDisplayString(l.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":g[0]||(g[0]=v=>n.value=v),onKeyup:e.withKeys(d,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,Ba),[[e.vModelText,n.value]])])])])]),_:1}))}}),Aa={class:"sm:flex sm:items-start"},Pa=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),Oa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ja=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Upload files",-1),Ia={class:"mt-2"},La={class:"text-gray-500 mb-1"},za=["id"],Ra={key:0,class:"py-2"},Ha=["disabled","onClick"],Ka=Object.assign({name:"VFModalUpload"},{props:{current:Object},setup(a){const t=a,r=inject("emitter"),{apiUrl:i}=le(),l=e.ref(null),n=e.ref(null),d=e.ref(null),u=e.ref([]),g=e.ref(!0),v=()=>{l.value.start()};return e.onMounted(()=>{l.value=new qe.default.Uploader({runtimes:"html5",browse_button:d.value,container:n.value,max_file_size:"10mb",multiple_queues:!0,file_data_name:"file",url:i.value+"?"+me({q:"upload",adapter:t.current.adapter,path:t.current.dirname}),init:{PostInit:function(){},FilesAdded:function(m,f){g.value=!1,qe.default.each(f,function(y){u.value.push({id:y.id,name:y.name,size:qe.default.formatSize(y.size),percent:""})})},UploadProgress:function(m,f){u.value[u.value.findIndex(y=>y.id==f.id)].percent=f.percent+"%"},UploadComplete:function(){g.value=!0,r.emit("vf-fetch",{q:"index",adapter:t.current.adapter,path:t.current.dirname})},Error:function(m,f){}}}),l.value.init()}),(m,f)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{disabled:g.value,onClick:e.withModifiers(v,["prevent"]),type:"button",class:e.normalizeClass([g.value?"bg-red-200 hover:bg-red-200":"bg-red-600 hover:bg-red-700","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"])},"Upload!",10,Ha),e.createElementVNode("button",{type:"button",onClick:f[0]||(f[0]=y=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Aa,[Pa,e.createElementVNode("div",Oa,[ja,e.createElementVNode("div",Ia,[e.createElementVNode("div",La,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,y=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{id:y.id},[e.createTextVNode(e.toDisplayString(y.name)+" ( "+e.toDisplayString(y.size)+") ",1),e.createElementVNode("b",null,e.toDisplayString(y.percent),1)],8,za)]))),256)),u.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ra," No files selected!"))]),e.createElementVNode("div",{class:"text-gray-500",ref:y=>n.value=y},[e.createElementVNode("button",{ref:y=>d.value=y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Select Files",512)],512)])])])]),_:1}))}}),Ua={class:"sm:flex sm:items-start"},Fa=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ya={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Wa=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Archive files",-1),Xa={class:"mt-2"},qa={class:"flex text-sm text-gray-800 dark:text-gray-400"},Ga={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ja=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Za={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Qa=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],es={class:"ml-1.5"},ts=e.createElementVNode("p",{class:"my-1 text-sm text-gray-500"},"Archive name. (.zip file will be created)",-1),rs=["onKeyup"],os=Object.assign({name:"VFModalArchive"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(""),n=e.ref(t.selection.items),d=()=>{n.value.length&&r.emit("vf-fetch",{q:"archive",adapter:i("adapter","local"),path:t.current.dirname,items:JSON.stringify(n.value.map(({path:u,type:g})=>({path:u,type:g}))),name:l.value})};return(u,g)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Archive!"),e.createElementVNode("button",{type:"button",onClick:g[1]||(g[1]=v=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Ua,[Fa,e.createElementVNode("div",Ya,[Wa,e.createElementVNode("div",Xa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,v=>(e.openBlock(),e.createElementBlock("p",qa,[v.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Ga,Ja)):(e.openBlock(),e.createElementBlock("svg",Za,Qa)),e.createElementVNode("span",es,e.toDisplayString(v.basename),1)]))),256)),ts,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":g[0]||(g[0]=v=>l.value=v),onKeyup:e.withKeys(d,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,rs),[[e.vModelText,l.value]])])])])]),_:1}))}}),ns={class:"sm:flex sm:items-start"},is=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),as={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ss=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Unarchive files",-1),ls={class:"mt-2"},cs={class:"flex text-sm text-gray-800 dark:text-gray-400"},ds={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hs=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],us={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ms=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],fs={class:"ml-1.5"},ps={class:"my-1 text-sm text-gray-500"},gs=Object.assign({name:"VFModalUnarchive"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage");e.ref("");const l=e.ref(t.selection.items[0]),n=e.ref([]),d=()=>{r.emit("vf-fetch",{q:"unarchive",adapter:i("adapter","local"),path:t.current.dirname,item:l.value.path})};return(u,g)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Unarchive!"),e.createElementVNode("button",{type:"button",onClick:g[0]||(g[0]=v=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",ns,[is,e.createElementVNode("div",as,[ss,e.createElementVNode("div",ls,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,v=>(e.openBlock(),e.createElementBlock("p",cs,[v.type=="dir"?(e.openBlock(),e.createElementBlock("svg",ds,hs)):(e.openBlock(),e.createElementBlock("svg",us,ms)),e.createElementVNode("span",fs,e.toDisplayString(v.basename),1)]))),256)),e.createElementVNode("p",ps,"Archive will be unarchived at ("+e.toDisplayString(a.current.dirname)+")",1)])])])]),_:1}))}}),vs={class:"sm:flex sm:items-start"},ys=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),bs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ws=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Move files",-1),_s={class:"mt-2"},ks={class:"flex text-sm text-gray-800 dark:text-gray-400"},xs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ss=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Es={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ds=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ns={class:"ml-1.5"},Vs=e.createElementVNode("p",{class:"text-sm text-gray-500 pb-1 pt-3"},"Are you sure you want to move these files to ?",-1),Cs={class:"flex text-sm text-gray-800 dark:text-gray-400"},Ms=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),$s={class:"ml-1.5 overflow-auto"},ut={VueFinder:cn,...Object.freeze(Object.defineProperty({__proto__:null,ModalDelete:Vn,ModalMessage:Pn,ModalNewFolder:Kn,ModalNewFile:Jn,ModalPreview:wa,ModalRename:Ta,ModalUpload:Ka,ModalArchive:os,ModalUnarchive:gs,ModalMove:Object.assign({name:"VFModalMove"},{props:{selection:Object,current:Object},setup(a){const t=a,r=inject("emitter"),{getStore:i}=inject("storage"),l=e.ref(t.selection.items.from),n=()=>{l.value.length&&r.emit("vf-fetch",{q:"move",adapter:i("adapter","local"),path:t.current.dirname,items:JSON.stringify(l.value.map(({path:d,type:u})=>({path:d,type:u}))),item:t.selection.items.to.path})};return(d,u)=>(e.openBlock(),e.createBlock(oe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:n,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, move!"),e.createElementVNode("button",{type:"button",onClick:u[0]||(u[0]=g=>e.unref(r).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",vs,[ys,e.createElementVNode("div",bs,[ws,e.createElementVNode("div",_s,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,g=>(e.openBlock(),e.createElementBlock("p",ks,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",xs,Ss)):(e.openBlock(),e.createElementBlock("svg",Es,Ds)),e.createElementVNode("span",Ns,e.toDisplayString(g.path),1)]))),256)),Vs,e.createElementVNode("p",Cs,[Ms,e.createElementVNode("span",$s,e.toDisplayString(a.selection.items.to.path),1)])])])])]),_:1}))}})},Symbol.toStringTag,{value:"Module"}))},bc="",wc="";return{install(a){for(const t in ut)if(ut.hasOwnProperty(t)){const r=ut[t];a.component(r.name,r)}}}});
