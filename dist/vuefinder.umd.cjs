(function(e,J){typeof exports=="object"&&typeof module<"u"?module.exports=J(require("vue"),require("plupload")):typeof define=="function"&&define.amd?define(["vue","plupload"],J):(e=typeof globalThis<"u"?globalThis:e||self,e.VueFinder=J(e.Vue,e.plupload))})(this,function(e,J){"use strict";const ee=(h=>h&&typeof h=="object"&&"default"in h?h:{default:h})(J),te=(h,{method:u="get",params:i={},json:y=!0})=>{const d={method:u};if(u=="get")h+="?"+new URLSearchParams(i);else{d.headers={};let s=new FormData;for(const[k,f]of Object.entries(i))s.append(k,f);d.body=s}return fetch(h,d).then(s=>s.ok?y?s.json():s.text():Promise.reject(s))};function je(h){return{all:h=h||new Map,on:function(u,i){var y=h.get(u);y?y.push(i):h.set(u,[i])},off:function(u,i){var y=h.get(u);y&&(i?y.splice(y.indexOf(i)>>>0,1):h.set(u,[]))},emit:function(u,i){var y=h.get(u);y&&y.slice().map(function(d){d(i)}),(y=h.get("*"))&&y.slice().map(function(d){d(u,i)})}}}function ce(h){let u=localStorage.getItem(h+"_storage");const i=e.ref(JSON.parse(u));e.watch(i,y);function y(){i.value===null||i.value===""?localStorage.removeItem(h+"_storage"):localStorage.setItem(h+"_storage",JSON.stringify(i.value))}function d(f,g){i.value=Object.assign({...i.value},{[f]:g})}function s(){i.value=null}return{getStore:(f,g=null)=>i.value===null||i.value===""?g:i.value.hasOwnProperty(f)?i.value[f]:g,setStore:d,clearStore:s}}const de=e.ref("");function z(){function h(u){de.value=u}return{apiUrl:de,setApiUrl:h}}const Ae={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},Te={class:"flex text-center"},Ie=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)],Le=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)],Oe=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)],ze=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)],Ke=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)],He=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)],Fe=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"},null,-1)],Re={class:"flex text-center items-center justify-end"},Ue={class:"mx-1.5","aria-label":"Dark Mode","data-microtip-position":"bottom",role:"tooltip"},qe=[e.createStaticVNode('<g class="dark:opacity-0"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path d="M12 4v.01M17.66 6.345l-.007.007M20.005 12.005h-.01M17.66 17.665l-.007-.007M12 20.01V20M6.34 17.665l.007-.007M3.995 12.005h.01M6.34 6.344l.007.007" fill="none"></path></g><g class="opacity-0 dark:opacity-100"><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"></path><path d="M12 3v1M18.66 5.345l-.828.828M21.005 12.005h-1M18.66 18.665l-.828-.828M12 21.01V20M5.34 18.666l.835-.836M2.995 12.005h1.01M5.34 5.344l.835.836" fill="none"></path></g>',2)],We={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ye=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},null,-1)],Je={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ze=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"},null,-1)],Xe=Object.assign({name:"VFToolbar"},{setup(h){const u=inject("emitter"),{getStore:i,setStore:y}=inject("storage"),d=e.ref(i("viewport","grid")),s=e.ref([]);return u.on("vf-nodes-selected",k=>{s.value=k}),u.on("vf-view-toggle",k=>{y("viewport",k),d.value=k}),(k,f)=>(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("div",Te,[e.createElementVNode("div",{class:"mx-1.5","aria-label":"New Folder","data-microtip-position":"bottom",role:"tooltip",onClick:f[0]||(f[0]=g=>e.unref(u).emit("vf-modal-show",{type:"new-folder",items:s.value}))},Ie),e.createElementVNode("div",{class:"mx-1.5","aria-label":"New File","data-microtip-position":"bottom",role:"tooltip",onClick:f[1]||(f[1]=g=>e.unref(u).emit("vf-modal-show",{type:"new-file",items:s.value}))},Le),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Rename","data-microtip-position":"bottom",role:"tooltip",onClick:f[2]||(f[2]=g=>s.value.length!=1||e.unref(u).emit("vf-modal-show",{type:"rename",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length==1?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Oe,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Delete","data-microtip-position":"bottom",role:"tooltip",onClick:f[3]||(f[3]=g=>!s.value.length||e.unref(u).emit("vf-modal-show",{type:"delete",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},ze,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Upload","data-microtip-position":"bottom",role:"tooltip",onClick:f[4]||(f[4]=g=>e.unref(u).emit("vf-modal-show",{type:"upload",items:s.value}))},Ke),s.value.length==1&&s.value[0].mime_type=="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":"Unrchive","data-microtip-position":"bottom",role:"tooltip",onClick:f[5]||(f[5]=g=>!s.value.length||e.unref(u).emit("vf-modal-show",{type:"unarchive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},He,2))])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":"Archive","data-microtip-position":"bottom",role:"tooltip",onClick:f[6]||(f[6]=g=>!s.value.length||e.unref(u).emit("vf-modal-show",{type:"archive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Fe,2))]))]),e.createElementVNode("div",Re,[e.createElementVNode("div",Ue,[(e.openBlock(),e.createElementBlock("svg",{onClick:f[7]||(f[7]=g=>e.unref(u).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},qe))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Change View","data-microtip-position":"bottom",role:"tooltip",onClick:f[8]||(f[8]=g=>e.unref(u).emit("vf-view-toggle",d.value=="list"?"grid":"list"))},[d.value=="grid"?(e.openBlock(),e.createElementBlock("svg",We,Ye)):e.createCommentVNode("",!0),d.value=="list"?(e.openBlock(),e.createElementBlock("svg",Je,Ze)):e.createCommentVNode("",!0)])])]))}});var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ue={exports:{}};(function(h,u){(function(i,y){h.exports=y()})(Ge,function(){function i(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function y(n,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function d(n,r,t){return r&&y(n.prototype,r),t&&y(n,t),n}function s(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function k(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,a)}return t}function f(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?k(Object(t),!0).forEach(function(a){s(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function g(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&w(n,r)}function _(n){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(n)}function w(n,r){return w=Object.setPrototypeOf||function(a,o){return a.__proto__=o,a},w(n,r)}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function S(n,r,t){return x()?S=Reflect.construct:S=function(o,l,c){var m=[null];m.push.apply(m,l);var p=Function.bind.apply(o,m),v=new p;return c&&w(v,c.prototype),v},S.apply(null,arguments)}function C(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function A(n){var r=typeof Map=="function"?new Map:void 0;return A=function(a){if(a===null||!C(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(a))return r.get(a);r.set(a,o)}function o(){return S(a,arguments,_(this).constructor)}return o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),w(o,a)},A(n)}function B(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function U(n,r){return r&&(typeof r=="object"||typeof r=="function")?r:B(n)}function Z(n){var r=x();return function(){var a=_(n),o;if(r){var l=_(this).constructor;o=Reflect.construct(a,arguments,l)}else o=a.apply(this,arguments);return U(this,o)}}function ne(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=_(n),n!==null););return n}function D(n,r,t){return typeof Reflect<"u"&&Reflect.get?D=Reflect.get:D=function(o,l,c){var m=ne(o,l);if(!!m){var p=Object.getOwnPropertyDescriptor(m,l);return p.get?p.get.call(c):p.value}},D(n,r,t||n)}function N(n,r){return P(n)||H(n,r)||me(n,r)||jn()}function V(n){return L(n)||K(n)||me(n)||Pn()}function L(n){if(Array.isArray(n))return se(n)}function P(n){if(Array.isArray(n))return n}function K(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function H(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],a=!0,o=!1,l=void 0;try{for(var c=n[Symbol.iterator](),m;!(a=(m=c.next()).done)&&(t.push(m.value),!(r&&t.length===r));a=!0);}catch(p){o=!0,l=p}finally{try{!a&&c.return!=null&&c.return()}finally{if(o)throw l}}return t}}function me(n,r){if(!!n){if(typeof n=="string")return se(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return se(n,r)}}function se(n,r){(r==null||r>n.length)&&(r=n.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=n[t];return a}function Pn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T=function(r,t,a){var o=r.x,l=r.y,c=a.x,m=a.y,p={"+":{x:o+c,y:l+m},"-":{x:o-c,y:l-m},"*":{x:o*c,y:l*m},"/":{x:o/c,y:l/m}};return p[t]},q=function(r){return{x:r.left,y:r.top}},he=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:r.x,top:r.y,right:r.x,bottom:r.y,width:t,height:t}},An=function(r){return{x:r,y:r}},Tn=function(n,r,t){window.addEventListener("resize",r),window.addEventListener("scroll",r),n.forEach(function(a,o){t.observe(a,{childList:o!==0,attributes:!0})})},In=function(n){var r=G(n);return r.x||r.y?!0:n instanceof HTMLDocument?n.body?!!(n.body.scrollTop=1):!!(n.documentElement.scrollTop=1):!!(n.scrollTop=1)},Ln=function(n){var r=document.createElement("div");return r.style.position="fixed",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.zIndex="999999999999999999",r.classList.add(n),r},On=function(n){var r=document.createElement("div");return r.style.position="absolute",n||(r.style.background="rgba(0, 0, 255, 0.1)",r.style.border="1px solid rgba(0, 0, 255, 0.45)",r.style.display="none",r.style.pointerEvents="none"),r},zn=function(n,r){var t;return function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=function(){t=null,n.apply(void 0,o)};clearTimeout(t),t=setTimeout(c,r)}},ae=function(){var n,r,t,a;return{y:((n=document.body)===null||n===void 0?void 0:n.scrollTop)||((r=document.documentElement)===null||r===void 0?void 0:r.scrollTop)||0,x:((t=document.body)===null||t===void 0?void 0:t.scrollLeft)||((a=document.documentElement)===null||a===void 0?void 0:a.scrollLeft)||0}},Kn=function(n,r){if(n instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var t=n.getBoundingClientRect();return{top:t.top,left:t.left,bottom:t.bottom,right:t.right,width:(n.clientWidth||t.width)*r,height:(n.clientHeight||t.height)*r}},G=function(n){return!n||n instanceof Document?ae():{x:n.scrollLeft>=0?n.scrollLeft:ae().x,y:n.scrollTop>=0?n.scrollTop:ae().y}},fe=function(n){var r=n.elementRect,t=n.containerRect,a=n.tolerance,o=a===void 0?{x:0,y:0}:a,l=[];return r.top-o.y<t.top&&l.push("top"),r.left-o.x<t.left&&l.push("left"),r.bottom+o.y>t.bottom&&l.push("bottom"),r.right+o.y>t.right&&l.push("right"),l},Hn=function(n){var r=n.event;return{x:r.clientX,y:r.clientY}},Fn=function(n){var r=n.scrollAmount,t=n.initialPointerPos,a=n.pointerPos,o={};return a.x>t.x-r.x?(o.left=t.x-r.x,o.width=a.x-t.x+r.x):(o.left=a.x,o.width=t.x-a.x-r.x),a.y>t.y-r.y?(o.top=t.y-r.y,o.height=a.y-t.y+r.y):(o.top=a.y,o.height=t.y-a.y-r.y),o},ge=function(r){var t={x:0,y:0},a=window.getComputedStyle(r);if(!a.transform||a.transform==="none")return t;if(a.transform.indexOf("3d")>=0){var o=a.transform.trim().match(/matrix3d\((.*?)\)/);if(o&&o.length){var l,c=(l=o[1])===null||l===void 0?void 0:l.split(",");t.x=parseInt(c[12])||0,t.y=parseInt(c[13])||0}return t}else{var m=a.transform.trim().match(/matrix\((.*?)\)/);if(m&&m.length){var p,v=(p=m[1])===null||p===void 0?void 0:p.split(",");t.x=parseInt(v[4])||0,t.y=parseInt(v[5])||0}return t}},Rn=function(r){var t=r.style.transform;if(!t||t.indexOf("translate")<0)return ge(r);var a={x:0,y:0},o=t.trim().match(/translate[3dD]*?\(.*?\)/);if(o){var l,c=(l=o[0])===null||l===void 0?void 0:l.split("(");if(c){var m,p=(m=c[1])===null||m===void 0?void 0:m.split(",");a.x=parseInt(p[0])||0,a.y=parseInt(p[1])||0}}return!a.x&&!a.x?ge(r):a},Un=function(r){var t=r.style,a={x:parseInt(t.left)||0,y:parseInt(t.top)||0};if(!a.x&&!a.x){var o=window.getComputedStyle(r);return{x:parseInt(o.left)||0,y:parseInt(o.top)||0}}return a},qn=function(n,r){return r?Rn(n):Un(n)},Wn=function(n){var r=n.element,t=n.edges,a=n.elementRect,o=n.containerRect,l=n.elementPos,c=n.useTransform;t.includes("top")&&X(r,{y:l.y+o.top-a.top,x:l.x},c),t.includes("left")&&X(r,{y:l.y,x:l.x+o.left-a.left},c),t.includes("bottom")&&X(r,{y:l.y+o.bottom-a.bottom,x:l.x},c),t.includes("right")&&X(r,{y:l.y,x:l.x+o.right-a.right},c)},pe=function(n){var r=n.computedStyle,t=n.node,a=r.position,o=a==="absolute"||a==="relative"||a==="fixed";!(t instanceof HTMLDocument)&&!o&&(t.style.position="relative")},Yn=function(n){var r=n.shiftKey,t=n.keyboardDragSpeed,a=n.zoom,o=n.key,l=n.dragKeys,c=n.scrollDiff,m=n.canScroll,p=n.scrollCallback,v={x:0,y:0},b=r?t*4*a:t*a;return l.left.includes(o)&&(v.x=c.x||-b,!r&&!c.x&&m&&p(["left"],t)),l.right.includes(o)&&(v.x=c.x||b,!r&&!c.x&&m&&p(["right"],t)),l.up.includes(o)&&(v.y=c.y||-b,!r&&!c.y&&m&&p(["top"],t)),l.down.includes(o)&&(v.y=c.y||b,!r&&!c.y&&m&&p(["bottom"],t)),v},Jn=function(n){var r=n.element,t=n.force,a=n.multiSelectionToggle,o=n.SelectedSet,l=n.hoverClassName;r.classList.contains(l)&&!t||(o.has(r)?a&&o.delete(r):o.add(r),r.classList.add(l))},Zn=function(n){var r=n.element,t=n.force,a=n.SelectedSet,o=n.PrevSelectedSet,l=n.hoverClassName;if(!r.classList.contains(l)&&!t)return!1;var c=a.has(r),m=o.has(r);c&&!m?a.delete(r):!c&&m&&a.add(r),r.classList.remove(l)},ie=function(n,r){return n.left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top},ye=function(n){var r=n.element,t=n.posDirection,a=n.containerRect,o=n.useTransform,l=qn(r,o),c=T(l,"+",t);X(r,c,o);var m=r.getBoundingClientRect(),p=fe({elementRect:m,containerRect:a});Wn({element:r,edges:p,elementRect:m,containerRect:a,elementPos:c,useTransform:o})},Xn=function(n,r){window.removeEventListener("resize",r),window.removeEventListener("scroll",r),n.disconnect()},Gn=function(n,r,t){if(!!r.length){var a=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,o=n instanceof HTMLDocument?a||document.body:n,l=r.includes("top")&&o.scrollTop>0,c=r.includes("bottom")&&o.scrollTop<o.scrollHeight,m=r.includes("left")&&o.scrollLeft>0,p=r.includes("right")&&o.scrollLeft<o.scrollWidth;l&&(o.scrollTop-=1*t),c&&(o.scrollTop+=1*t),m&&(o.scrollLeft-=1*t),p&&(o.scrollLeft+=1*t)}},X=function(n,r,t){if(t){var a=n.style.transform;n.style.transform="translate3d(".concat(r.x,"px,").concat(r.y,"px,1px) ").concat(a.replace(/translate.*?\)/g,""))}else n.style.left="".concat(r.x,"px"),n.style.top="".concat(r.y,"px");return n},Qn=function(n){for(var r=n.subscribe,t=n.publish,a=n.Interaction,o=n.SelectedSet,l={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(b){return b.event}}],"Interaction:end":[{name:"callback"}]},c=function(){var b=N(p[m],2),E=b[0],$=b[1];["pre",!1].forEach(function(M){return r(M?"".concat(E,":").concat(M):E,function(I){return $.forEach(function(j){return(!j.condition||j.condition(I))&&t(M?"".concat(M).concat(j.name):j.name,f({items:o.elements,isDragging:a.isDragging},I))})})})},m=0,p=Object.entries(l);m<p.length;m++)c()},W=function(n){return n?!Array.isArray(n)&&(n instanceof HTMLElement||n instanceof SVGElement)?[n]:V(n):[]},be=function(n,r){n.style.left="".concat(r.left,"px"),n.style.top="".concat(r.top,"px"),n.style.width="".concat(r.width,"px"),n.style.height="".concat(r.height,"px")},es=function(){function n(r){var t=this,a=r.area,o=r.PS,l=r.zoom;i(this,n),s(this,"_modificationCallback",void 0),s(this,"_modificationObserver",void 0),s(this,"_zoom",void 0),s(this,"_node",void 0),s(this,"_parentNodes",void 0),s(this,"_computedStyle",void 0),s(this,"_computedBorder",void 0),s(this,"_rect",void 0),s(this,"setArea",function(c){t._node=c,pe({computedStyle:t.computedStyle,node:t._node}),setTimeout(function(){t.PubSub.publish("Area:modified:pre",{item:t}),t.reset(),t.PubSub.publish("Area:modified",{item:t})})}),s(this,"start",function(){Tn(t.parentNodes,t._modificationCallback,t._modificationObserver)}),s(this,"reset",function(){t._computedStyle=void 0,t._rect=void 0,t._computedBorder=void 0,t._parentNodes=void 0}),s(this,"stop",function(){Xn(t._modificationObserver,t._modificationCallback),t.reset()}),s(this,"scroll",function(c,m){var p={scroll_directions:c,scroll_multiplier:m};t.PubSub.publish("Area:scroll:pre",p),Gn(t._node,c,m),t.PubSub.publish("Area:scroll",p)}),this._zoom=l,this.PubSub=o,this.setArea(a),this._modificationCallback=zn(function(c){t.PubSub.publish("Area:modified:pre",{event:c,item:t}),t.reset(),t.PubSub.publish("Area:modified",{event:c,item:t})},60),this._modificationObserver=new MutationObserver(this._modificationCallback),this.PubSub.subscribe("Interaction:init",this.start),this.PubSub.subscribe("Interaction:end",this.reset)}return d(n,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=Kn(this.HTMLNode,this._zoom)}},{key:"parentNodes",get:function(){if(this._parentNodes)return this._parentNodes;var t=function a(o){var l,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=(l=o[c])===null||l===void 0?void 0:l.parentNode;return m?(o.push(m),c++,a(o,c)):o};return this._parentNodes=t([this.HTMLNode]),this._parentNodes}}]),n}(),ts=function(){function n(r){var t=this,a=r.DS,o=r.dragKeys,l=r.draggability,c=r.keyboardDrag,m=r.keyboardDragSpeed,p=r.useTransform,v=r.zoom;i(this,n),s(this,"_useTransform",void 0),s(this,"_prevCursorPos",void 0),s(this,"_prevScrollPos",void 0),s(this,"_elements",[]),s(this,"_draggability",void 0),s(this,"_dragKeys",void 0),s(this,"_dragKeysFlat",void 0),s(this,"_keyboardDrag",void 0),s(this,"_keyboardDragSpeed",void 0),s(this,"_zoom",void 0),s(this,"keyboardDrag",function(b){var E=b.event,$=b.key;if(!(!t._keyboardDrag||!t._dragKeysFlat.includes($)||!t.DS.SelectedSet.size||!t._draggability||t.DS.continue)){var M={event:E,isDragging:!0,isDraggingKeyboard:!0};t.DS.publish(["Interaction:start:pre","Interaction:start"],M),t._elements=t.DS.getSelection(),t.handleZIndex(!0);var I=Yn({shiftKey:t.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:t._keyboardDragSpeed,zoom:t._zoom,key:$,scrollCallback:t.DS.Area.scroll,scrollDiff:t._scrollDiff,canScroll:t.DS.stores.ScrollStore.canScroll,dragKeys:t._dragKeys});t._elements.forEach(function(j){return ye({element:j,posDirection:I,containerRect:t.DS.SelectorArea.rect,useTransform:t._useTransform})}),t.DS.publish(["Interaction:update:pre","Interaction:update"],M)}}),s(this,"keyboardEnd",function(b){var E=b.event,$=b.key;if(!(!t._keyboardDrag||!t._dragKeysFlat.includes($)||!t.DS.SelectedSet.size||!t._draggability)){var M={event:E,isDragging:t._draggability,isDraggingKeyboard:!0};t.DS.publish(["Interaction:end:pre","Interaction:end"],M)}}),s(this,"start",function(b){var E=b.isDragging,$=b.isDraggingKeyboard;!E||$||(t._prevCursorPos=null,t._prevScrollPos=null,t._elements=t.DS.getSelection(),t.handleZIndex(!0))}),s(this,"stop",function(b){b!=null&&b.isKeyboard||(t._prevCursorPos=null,t._prevScrollPos=null,t.handleZIndex(!1),t._elements=[])}),s(this,"update",function(b){var E=b.isDragging,$=b.isDraggingKeyboard;if(!(!E||!t._elements.length||$||t.DS.continue)){var M=T(t._cursorDiff,"+",t._scrollDiff);t._elements.forEach(function(I){return ye({element:I,posDirection:M,containerRect:t.DS.SelectorArea.rect,useTransform:t._useTransform})})}}),s(this,"handleZIndex",function(b){t._elements.forEach(function(E){return E.style.zIndex="".concat((parseInt(E.style.zIndex)||0)+b?9999:-9998)})}),this.DS=a,this._useTransform=p,this._keyboardDragSpeed=m,this._keyboardDrag=c,this._zoom=v,this._draggability=l,this._dragKeys={up:o.up.map(function(b){return b.toLowerCase()}),down:o.down.map(function(b){return b.toLowerCase()}),left:o.left.map(function(b){return b.toLowerCase()}),right:o.right.map(function(b){return b.toLowerCase()})},this._dragKeysFlat=[].concat(V(this._dragKeys.up),V(this._dragKeys.down),V(this._dragKeys.left),V(this._dragKeys.right)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return d(n,[{key:"_cursorDiff",get:function(){var t=this.DS.stores.PointerStore.currentVal,a=this._prevCursorPos?T(t,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=t,a}},{key:"_scrollDiff",get:function(){var t=this.DS.stores.ScrollStore.currentVal,a=this._prevScrollPos?T(t,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=t,a}}]),n}(),rs=function(){function n(r){var t=this,a=r.DS,o=r.areaElement,l=r.draggability,c=r.immediateDrag,m=r.selectableClass;i(this,n),s(this,"_areaElement",void 0),s(this,"_draggability",void 0),s(this,"_immediateDrag",void 0),s(this,"_selectableClass",void 0),s(this,"isInteracting",void 0),s(this,"isDragging",void 0),s(this,"init",function(){return t.DS.publish("Interaction:init:pre",{})}),s(this,"_init",function(){t.stop(),t._areaElement.addEventListener("mousedown",t.start),t._areaElement.addEventListener("touchstart",t.start,{passive:!1}),t.DS.publish("Interaction:init",{})}),s(this,"start",function(p){return t.DS.publish("Interaction:start:pre",{event:p,isDragging:t.isDragging})}),s(this,"_start",function(p){p.type==="touchstart"&&p.preventDefault(),t._canInteract(p)&&(t.isInteracting=!0,t.isDragging=t.isDragEvent(p),t.DS.publish("Interaction:start",{event:p,isDragging:t.isDragging}),document.addEventListener("mouseup",t.reset),document.addEventListener("touchend",t.reset))}),s(this,"isDragEvent",function(p){var v=p.target.closest(".".concat(t._selectableClass));return!t._draggability||t.DS.stores.KeyStore.isMultiSelectKeyPressed(p)||!v?!1:(t._immediateDrag&&(t.DS.SelectedSet.size?t.DS.SelectedSet.has(v)||(t.DS.SelectedSet.clear(),t.DS.SelectedSet.add(v)):t.DS.SelectedSet.add(v)),!!t.DS.SelectedSet.has(v))}),s(this,"onClick",function(p){var v=p.event;if(!!t._canInteract(v)&&!(v.detail>0)){var b=t.DS,E=b.stores,$=E.PointerStore,M=E.KeyStore,I=b.SelectableSet,j=b.SelectedSet;$.start(v);var Y=v.target;!I.has(Y)||(M.isMultiSelectKeyPressed(v)||j.clear(),j.toggle(Y),t.reset())}}),s(this,"stop",function(){t.isInteracting=!1,t.isDragging=!1,t._areaElement.removeEventListener("mousedown",t.start),t._areaElement.removeEventListener("touchstart",t.start,{passive:!1}),document.removeEventListener("mouseup",t.reset),document.removeEventListener("touchend",t.reset)}),s(this,"update",function(p){var v=p.event,b=p.scroll_directions,E=p.scroll_multiplier;t.isInteracting&&t.DS.publish(["Interaction:update:pre","Interaction:update"],{event:v,scroll_directions:b,scroll_multiplier:E,isDragging:t.isDragging})}),s(this,"reset",function(p){return t.DS.publish("Interaction:end:pre",{event:p,isDragging:t.isDragging})}),s(this,"_reset",function(p){var v=t.isDragging;t.stop(),t.init(),t.DS.publish("Interaction:end",{event:p,isDragging:v})}),this._areaElement=o,this._draggability=l,this._immediateDrag=c,this._selectableClass=m,this.DS=a,this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(p){var v=p.event;return t.start(v)}),this.DS.subscribe("Interaction:start:pre",function(p){var v=p.event;return t._start(v)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(p){var v=p.event;return t._reset(v)}),this.DS.subscribe("Area:scroll",this.update)}return d(n,[{key:"_canInteract",value:function(t){var a=t.clientX===0&&t.clientY===0&&t.detail===0&&t.target;return!(t.button===2||this.isInteracting||t.target&&!this.DS.SelectorArea.isInside(t.target)||!a&&!this.DS.SelectorArea.isClicked(t))}}]),n}(),os=function n(r){var t=this,a=r.DS;i(this,n),s(this,"subscribers",{}),s(this,"subscribe",function(o,l){return Array.isArray(t.subscribers[o])||(t.subscribers[o]=[]),t.subscribers[o].push(l),t.subscribers[o].length-1}),s(this,"unsubscribe",function(o,l,c){c>=0?t.subscribers[o].splice(c,1):l&&(t.subscribers[o]=t.subscribers[o].filter(function(m){return m!==l}))}),s(this,"publish",function(o,l){Array.isArray(o)?o.forEach(function(c){return t._publish(c,l)}):t._publish(o,l)}),s(this,"_publish",function(o,l){var c=t.subscribers[o];!Array.isArray(c)||(o.includes(":pre")?t._handlePrePublish(c,l):t._handlePublish(c,l))}),s(this,"_handlePublish",function(o,l){for(var c=0,m=o.length;c<m;c++){if(t.DS.stopped)return;o[c](l)}}),s(this,"_handlePrePublish",function(o,l){for(var c=o.length;c--;){if(t.DS.stopped)return;o[c](l)}}),this.DS=a},ns=function(n){g(t,n);var r=Z(t);function t(a){var o,l=a.elements,c=a.className,m=a.hoverClassName,p=a.draggability,v=a.useTransform,b=a.DS;return i(this,t),o=r.call(this),s(B(o),"_initElements",void 0),s(B(o),"_className",void 0),s(B(o),"_hoverClassName",void 0),s(B(o),"_useTransform",void 0),s(B(o),"_draggability",void 0),s(B(o),"init",function(){return o._initElements.forEach(function(E){return o.add(E)})}),s(B(o),"clear",function(){return o.forEach(function(E){return o.delete(E)})}),s(B(o),"_onClick",function(E){return o.DS.publish(["Selectable:click:pre","Selectable:click"],{event:E})}),s(B(o),"_onPointer",function(E){return o.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:E})}),s(B(o),"addAll",function(E){return E.forEach(function($){return o.add($)})}),s(B(o),"deleteAll",function(E){return E.forEach(function($){return o.delete($)})}),o.DS=b,o._initElements=W(l),o._className=c,o._hoverClassName=m,o._useTransform=v,o._draggability=p,o.DS.subscribe("Interaction:init",o.init),o}return d(t,[{key:"add",value:function(o){return o.classList.add(this._className),o.addEventListener("click",this._onClick),o.addEventListener("mousedown",this._onPointer),o.addEventListener("touchstart",this._onPointer,{passive:!1}),this._draggability&&!this._useTransform&&pe({computedStyle:window.getComputedStyle(o),node:o}),D(_(t.prototype),"add",this).call(this,o)}},{key:"delete",value:function(o){return o.classList.remove(this._className),o.classList.remove(this._hoverClassName),o.removeEventListener("click",this._onClick),o.removeEventListener("mousedown",this._onPointer),o.removeEventListener("touchstart",this._onPointer,{passive:!1}),D(_(t.prototype),"delete",this).call(this,o)}},{key:"elements",get:function(){return Array.from(this.values())}}]),t}(A(Set)),ss=function(n){g(t,n);var r=Z(t);function t(a){var o,l=a.className,c=a.DS;return i(this,t),o=r.call(this),s(B(o),"_className",void 0),s(B(o),"clear",function(){return o.forEach(function(m){return o.delete(m)})}),s(B(o),"addAll",function(m){return m.forEach(function(p){return o.add(p)})}),s(B(o),"deleteAll",function(m){return m.forEach(function(p){return o.delete(p)})}),o.DS=c,o._className=l,o}return d(t,[{key:"add",value:function(o){if(!D(_(t.prototype),"has",this).call(this,o)){var l={items:this.elements,item:o};return this.DS.publish("Selected:added:pre",l),D(_(t.prototype),"add",this).call(this,o),o.classList.add(this._className),o.style.zIndex="".concat((parseInt(o.style.zIndex)||0)+1),this.DS.publish("Selected:added",l),this}}},{key:"delete",value:function(o){if(!!D(_(t.prototype),"has",this).call(this,o)){var l={items:this.elements,item:o};this.DS.publish("Selected:removed:pre",l);var c=D(_(t.prototype),"delete",this).call(this,o);return o.classList.remove(this._className),o.style.zIndex="".concat((parseInt(o.style.zIndex)||0)-1),this.DS.publish("Selected:removed",l),c}}},{key:"toggle",value:function(o){return this.has(o)?this.delete(o):this.add(o),o}},{key:"elements",get:function(){return Array.from(this.values())}}]),t}(A(Set)),as=function(){function n(r){var t=this,a=r.DS,o=r.hoverClassName,l=r.multiSelectToggling;i(this,n),s(this,"_prevSelectedSet",void 0),s(this,"_hoverClassName",void 0),s(this,"_multiSelectToggling",void 0),s(this,"start",function(c){var m=c.event,p=c.isDragging;p||(t._storePrevious(m),t._handleInsideSelection(!0,m))}),s(this,"update",function(c){var m=c.isDragging;m||t.DS.continue||t._handleInsideSelection()}),s(this,"_handleInsideSelection",function(c,m){for(var p=t.DS,v=p.SelectableSet,b=p.SelectorArea,E=p.Selector,$=v.elements.map(function(F){return[F,F.getBoundingClientRect()]}),M=[],I=[],j=0,Y=$.length;j<Y;j++)!b.isInside($[j][0],$[j][1])||(ie($[j][1],E.rect)?M.push($[j][0]):I.push($[j][0]));var Q=t.DS.stores.KeyStore.isMultiSelectKeyPressed(m)&&t._multiSelectToggling;t.DS.continue||(M.forEach(function(F){return Jn({element:F,force:c,multiSelectionToggle:Q,SelectedSet:t.DS.SelectedSet,hoverClassName:t._hoverClassName})}),I.forEach(function(F){return Zn({element:F,force:c,SelectedSet:t.DS.SelectedSet,hoverClassName:t._hoverClassName,PrevSelectedSet:t._prevSelectedSet})}))}),this._hoverClassName=o,this._multiSelectToggling=l,this.DS=a,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return d(n,[{key:"_storePrevious",value:function(t){var a=this.DS,o=a.stores.KeyStore,l=a.SelectedSet;o.isMultiSelectKeyPressed(t)?this._prevSelectedSet=new Set(l):this._prevSelectedSet=new Set}}]),n}(),is=function(){function n(r){var t=this,a=r.DS,o=r.selector,l=r.selectorClass,c=r.customStyles;i(this,n),s(this,"_rect",void 0),s(this,"start",function(m){var p=m.isDragging;if(!p){var v=t.DS.stores.PointerStore,b=v.initialValArea;be(t.HTMLNode,he(b,1)),t.HTMLNode.style.display="block",t._rect=null}}),s(this,"stop",function(){t.HTMLNode.style.width="0",t.HTMLNode.style.height="0",t.HTMLNode.style.display="none"}),s(this,"update",function(m){var p=m.isDragging;if(!(p||t.DS.continue)){var v=t.DS.stores,b=v.ScrollStore,E=v.PointerStore,$=Fn({scrollAmount:b.scrollAmount,initialPointerPos:E.initialValArea,pointerPos:E.currentValArea});be(t.HTMLNode,$),t._rect=null}}),this.DS=a,this.HTMLNode=o||On(c),this.HTMLNode.classList.add(l),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return d(n,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),n}(),ls=function(){function n(r){var t=this,a=r.DS,o=r.selectorAreaClass,l=r.autoScrollSpeed,c=r.overflowTolerance;i(this,n),s(this,"_autoScrollSpeed",void 0),s(this,"_scrollInterval",void 0),s(this,"_rect",void 0),s(this,"currentEdges",[]),s(this,"_overflowTolerance",void 0),s(this,"start",function(){return t.applyElements("append")}),s(this,"applyElements",function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",p=document.body?"body":"documentElement",v="".concat(m,"Child");t.HTMLNode[v](t.DS.Selector.HTMLNode),document[p][v](t.HTMLNode)}),s(this,"updatePos",function(){t._rect=null;var m=t.DS.Area.rect,p=t.DS.Area.computedBorder,v=t.HTMLNode.style,b="".concat(m.top+p.top,"px"),E="".concat(m.left+p.left,"px"),$="".concat(m.width,"px"),M="".concat(m.height,"px");v.top!==b&&(v.top=b),v.left!==E&&(v.left=E),v.width!==$&&(v.width=$),v.height!==M&&(v.height=M)}),s(this,"stop",function(m){t.stopAutoScroll(),m&&t.applyElements("remove")}),s(this,"startAutoScroll",function(){t.currentEdges=[],t._scrollInterval=setInterval(function(){return t.handleAutoScroll()},16)}),s(this,"handleAutoScroll",function(){if(!t.DS.continue){var m=t.DS,p=m.stores.PointerStore,v=m.Area;t.currentEdges=fe({elementRect:he(p.currentVal),containerRect:t.rect,tolerance:t._overflowTolerance}),t.currentEdges.length&&v.scroll(t.currentEdges,t._autoScrollSpeed)}}),s(this,"stopAutoScroll",function(){t.currentEdges=[],clearInterval(t._scrollInterval)}),s(this,"isInside",function(m,p){return t.DS.Area.HTMLNode.contains(m)&&t.DS.stores.ScrollStore.canScroll?!0:ie(t.rect,p||m.getBoundingClientRect())}),this._autoScrollSpeed=l,this._overflowTolerance=c,this.DS=a,this.HTMLNode=Ln(o),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){t.updatePos(),t.stopAutoScroll()})}return d(n,[{key:"isClicked",value:function(t){var a=this.DS.stores.PointerStore,o=t?a.getPointerPosition(t):a.initialVal;return ie({left:o.x,top:o.y,right:o.x,bottom:o.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),n}(),cs=function(){function n(r){var t=this,a=r.DS,o=r.multiSelectKeys,l=r.multiSelectMode;i(this,n),s(this,"_multiSelectMode",void 0),s(this,"_multiSelectKeys",void 0),s(this,"_currentValues",new Set),s(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),s(this,"init",function(){document.addEventListener("keydown",t.keydown),document.addEventListener("keyup",t.keyup),window.addEventListener("blur",t.reset)}),s(this,"keydown",function(c){var m=c.key.toLowerCase();t.DS.publish("KeyStore:down:pre",{event:c,key:m}),t._currentValues.add(m),t.DS.publish("KeyStore:down",{event:c,key:m})}),s(this,"keyup",function(c){var m=c.key.toLowerCase();t.DS.publish("KeyStore:up:pre",{event:c,key:m}),t._currentValues.delete(m),t.DS.publish("KeyStore:up",{event:c,key:m})}),s(this,"stop",function(){document.removeEventListener("keydown",t.keydown),document.removeEventListener("keyup",t.reset),window.removeEventListener("blur",t.reset),t.reset()}),s(this,"reset",function(){return t._currentValues.clear()}),this.DS=a,this._multiSelectMode=l,this._multiSelectKeys=o.map(function(c){var m={ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"},p=m[c];return p?(console.warn("[DragSelect] ".concat(c,' is deprecated. Use "').concat(p,'" instead. Act Now!. See docs for more info')),p.toLowerCase()):c.toLowerCase()}),this.DS.subscribe("Interaction:init",this.init)}return d(n,[{key:"isMultiSelectKeyPressed",value:function(t){var a=this;return!!(this._multiSelectMode||this.currentValues.some(function(o){return a._multiSelectKeys.includes(o)})||t&&this._multiSelectKeys.some(function(o){return t[a._keyMapping[o]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),n}(),ds=function(){function n(r){var t=this,a=r.DS;i(this,n),s(this,"_isMouseInteraction",!1),s(this,"_initialValArea",void 0),s(this,"_currentValArea",void 0),s(this,"_lastValArea",void 0),s(this,"_initialVal",void 0),s(this,"_currentVal",void 0),s(this,"_lastVal",void 0),s(this,"_lastTouch",void 0),s(this,"init",function(){document.addEventListener("mousemove",t.update),document.addEventListener("touchmove",t.update,{passive:!1})}),s(this,"getPointerPosition",function(o){return Hn({event:t._normalizedEvent(o)})}),s(this,"update",function(o){!o||(t.DS.publish("PointerStore:updated:pre",{event:o}),t.currentVal=t.getPointerPosition(o),t._isMouseInteraction&&t.DS.publish("PointerStore:updated",{event:o}))}),s(this,"stop",function(){document.removeEventListener("mousemove",t.update),document.removeEventListener("touchmove",t.update,{passive:!1}),setTimeout(function(){return t._isMouseInteraction=!1},100)}),s(this,"reset",function(o){!o||(t.currentVal=t.lastVal=t.getPointerPosition(o),t.stop(),t.init())}),this.DS=a,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(o){var l=o.event;return t.start(l)}),this.DS.subscribe("Interaction:end",function(o){var l=o.event;return t.reset(l)})}return d(n,[{key:"start",value:function(t){!t||(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(t))}},{key:"_normalizedEvent",value:function(t){return"touches"in t&&t.type!=="touchend"&&(this._lastTouch=t),"touches"in t?this._lastTouch.touches[0]:t}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(t){this._initialVal=t,this._initialValArea=t&&T(t,"-",T(q(this.DS.Area.rect),"+",q(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(t){this._currentVal=t,this._currentValArea=t&&T(t,"-",T(q(this.DS.Area.rect),"+",q(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(t){this._lastVal=t,this._lastValArea=t&&T(t,"-",T(q(this.DS.Area.rect),"+",q(this.DS.Area.computedBorder)))}}]),n}(),us=function(){function n(r){var t=this,a=r.DS,o=r.areaElement,l=r.zoom;i(this,n),s(this,"_initialVal",void 0),s(this,"_currentVal",void 0),s(this,"_areaElement",void 0),s(this,"_canScroll",void 0),s(this,"init",function(){return t._areaElement.addEventListener("scroll",t.update)}),s(this,"start",function(){t._currentVal=t._initialVal=G(t._areaElement),t._areaElement.addEventListener("scroll",t.update)}),s(this,"update",function(){return t._currentVal=G(t._areaElement)}),s(this,"stop",function(){t._areaElement.removeEventListener("scroll",t.update),t._initialVal={x:0,y:0},t._canScroll=null}),s(this,"reset",function(){t.stop(),t.start()}),this._areaElement=o,this.DS=a,this.zoom=l,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return t.start()}),this.DS.subscribe("Interaction:end",function(){return t.reset()})}return d(n,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=In(this._areaElement)}},{key:"scrollAmount",get:function(){var t=T(this.currentVal,"-",this.initialVal),a=An(this.zoom),o=T(T(t,"*",a),"-",t);return{x:t.x+o.x,y:t.y+o.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=G(this._areaElement)),this._currentVal}}]),n}(),ms=function(){function n(r){var t=this,a=r.area,o=a===void 0?document:a,l=r.selectables,c=l===void 0?[]:l,m=r.autoScrollSpeed,p=m===void 0?5:m,v=r.overflowTolerance,b=v===void 0?{x:25,y:25}:v,E=r.zoom,$=E===void 0?1:E,M=r.customStyles,I=M===void 0?!1:M,j=r.multiSelectMode,Y=j===void 0?!1:j,Q=r.multiSelectToggling,F=Q===void 0?!0:Q,_e=r.multiSelectKeys,hs=_e===void 0?["Control","Shift","Meta"]:_e,ke=r.selector,fs=ke===void 0?void 0:ke,ve=r.draggability,le=ve===void 0?!0:ve,we=r.immediateDrag,gs=we===void 0?!0:we,Se=r.keyboardDrag,ps=Se===void 0?!0:Se,ys=r.dragKeys,xe=r.keyboardDragSpeed,bs=xe===void 0?10:xe,Ee=r.useTransform,De=Ee===void 0?!0:Ee,Ve=r.hoverClass,$e=Ve===void 0?"ds-hover":Ve,Ne=r.selectableClass,Ce=Ne===void 0?"ds-selectable":Ne,Be=r.selectedClass,_s=Be===void 0?"ds-selected":Be,Me=r.selectorClass,ks=Me===void 0?"ds-selector":Me,Pe=r.selectorAreaClass,vs=Pe===void 0?"ds-selector-area":Pe,ws=r.callback,Ss=r.onDragMove,xs=r.onDragStartBegin,Es=r.onDragStart,Ds=r.onElementSelect,Vs=r.onElementUnselect;i(this,n),s(this,"continue",!1),s(this,"start",function(){t.stopped=!1,t.Interaction.init()}),s(this,"break",function(){return t.continue=!0}),s(this,"getSelection",function(){return t.SelectedSet.elements}),s(this,"getSelectables",function(){return t.SelectableSet.elements}),s(this,"getInitialCursorPosition",function(){return t.stores.PointerStore.initialVal}),s(this,"getCurrentCursorPosition",function(){return t.stores.PointerStore.currentVal}),s(this,"getPreviousCursorPosition",function(){return t.stores.PointerStore.lastVal}),s(this,"getInitialCursorPositionArea",function(){return t.stores.PointerStore.initialValArea}),s(this,"getCurrentCursorPositionArea",function(){return t.stores.PointerStore.currentValArea}),s(this,"getPreviousCursorPositionArea",function(){return t.stores.PointerStore.lastValArea}),s(this,"isMultiSelect",function($s){return t.stores.KeyStore.isMultiSelectKeyPressed($s)}),s(this,"isDragging",function(){return t.Interaction.isDragging}),this.PubSub=new os({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this._callbacksTemp({callback:ws,onDragMove:Ss,onDragStart:Es,onDragStartBegin:xs,onElementSelect:Ds,onElementUnselect:Vs}),this.stores={PointerStore:new ds({DS:this}),ScrollStore:new us({DS:this,areaElement:o,zoom:$}),KeyStore:new cs({DS:this,multiSelectKeys:hs,multiSelectMode:Y})},this.Area=new es({area:o,PS:this.PubSub,zoom:$}),this.Selector=new is({DS:this,selector:fs,selectorClass:ks,customStyles:I}),this.SelectorArea=new ls({DS:this,selectorAreaClass:vs,autoScrollSpeed:p,overflowTolerance:b}),this.SelectableSet=new ns({elements:c,DS:this,className:Ce,hoverClassName:$e,useTransform:De,draggability:le}),this.SelectedSet=new ss({DS:this,className:_s}),this.Selection=new as({DS:this,hoverClassName:$e,multiSelectToggling:F}),this.Drag=new ts({DS:this,draggability:le,useTransform:De,keyboardDrag:ps,dragKeys:Object.assign({up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},ys),zoom:$,keyboardDragSpeed:bs}),this.Interaction=new rs({areaElement:o,DS:this,draggability:le,immediateDrag:gs,selectableClass:Ce}),Qn({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",function(){return t.continue=!1}),this.start()}return d(n,[{key:"_callbacksTemp",value:function(t){var a=t.callback,o=t.onDragMove,l=t.onDragStart,c=t.onDragStartBegin,m=t.onElementSelect,p=t.onElementUnselect,v=function(E,$){return console.warn("[DragSelect] ".concat(E,' is deprecated. Use DragSelect.subscribe("').concat($,'", (callbackObject) => {}) instead. Act Now! See docs for more info'))};a&&(v("callback","callback"),this.subscribe("callback",function(b){var E=b.items;b.item;var $=b.event;return a(E,$)})),o&&(v("onDragMove","dragmove"),this.subscribe("dragmove",function(b){b.items,b.item;var E=b.event;return o(E)})),l&&(v("onDragStart","dragstart"),this.subscribe("dragstart",function(b){b.items,b.item;var E=b.event;return l(E)})),c&&(v("onDragStartBegin","dragstart"),this.subscribe("dragstart",function(b){b.items,b.item;var E=b.event;return c(E)})),m&&(v("onElementSelect","elementselect"),this.subscribe("elementselect",function(b){b.items;var E=b.item,$=b.event;return m(E,$)})),p&&(v("onElementUnselect","elementunselect"),this.subscribe("elementunselect",function(b){b.items;var E=b.item,$=b.event;return p(E,$)}))}},{key:"stop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;o&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(t),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),t&&this.SelectableSet.clear(),a&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(W(t)),o||this.addSelectables(t),a&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(W(t)),o&&this.removeSelectables(t),a&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(t){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return W(t).forEach(function(c){return a.SelectedSet.has(c)?a.removeSelection(t,o,l):a.addSelection(t,o,l)}),o&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(t,a,o),this.getSelection()}},{key:"clearSelection",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=W(t);return this.SelectableSet.addAll(o),a&&this.SelectedSet.addAll(o),t}},{key:"setSelectables",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.removeSelectables(t,a),this.addSelectables(t,o)}},{key:"removeSelectables",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.SelectableSet.deleteAll(W(t)),a&&this.removeSelection(t),t}},{key:"getCursorPositionDifference",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;console.warn("[DragSelect] Using .getCursorPositionDifference is deprecated. Calculate yourself instead. i.e. `.getCurrentCursorPosition().x - .getInitialCursorPosition().x`");var o=a?this.getCurrentCursorPositionArea():this.getCurrentCursorPosition(),l=t?a?this.getPreviousCursorPositionArea():this.getPreviousCursorPosition():a?this.getInitialCursorPositionArea():this.getInitialCursorPosition();return T(o,"-",l)}}]),n}();return ms})})(ue);const Qe=ue.exports,et=(h,u,i,y,d)=>(u=Math,i=u.log,y=1024,d=i(h)/i(y)|0,h/u.pow(y,d)).toFixed(0)+" "+(d?"KMGTPEZY"[--d]+"iB":"B"),tt=(h,u="en-US")=>new Date(h*1e3).toLocaleString(u),rt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},ot=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)],nt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},st=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)],re=Object.assign({name:"VFSortIcon"},{props:{direction:String},setup(h){return(u,i)=>(e.openBlock(),e.createElementBlock("div",null,[h.direction=="down"?(e.openBlock(),e.createElementBlock("svg",rt,ot)):e.createCommentVNode("",!0),h.direction=="up"?(e.openBlock(),e.createElementBlock("svg",nt,st)):e.createCommentVNode("",!0)]))}}),at={class:"relative h-full"},it={key:0,class:"grid grid-cols-12 border-b border-neutral-300 dark:border-gray-700 text-xs select-none"},lt=e.createTextVNode(" Name "),ct=e.createTextVNode(" Size "),dt=e.createTextVNode(" Date "),ut={class:"absolute"},mt=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),ht={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},ft=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],gt={class:"grid grid-cols-12 items-center"},pt={class:"flex col-span-7 items-center"},yt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},bt=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],_t={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},kt=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],vt={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},wt={class:"col-span-2 text-center"},St={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},xt=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Et={class:"relative"},Dt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vt=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],$t={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Nt=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ct={class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},Bt={class:"break-all"},Mt=Object.assign({name:"VFExplorer"},{props:{view:String,data:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=D=>D==null?void 0:D.substring(0,3),s=D=>D.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),k=e.ref(null),f=e.ref(null),g=e.ref(0),_=e.ref(null),w=D=>{D.type=="dir"?i.emit("vf-fetch",{q:"index",adapter:u.data.adapter,path:D.path}):i.emit("vf-modal-show",{type:"preview",adapter:u.data.adapter,item:D})},x=e.reactive({active:!1,column:"",order:""}),S=(D=!0)=>{let N=[...u.data.files],V=x.column,L=x.order=="asc"?1:-1;if(!D)return N;const P=(K,H)=>typeof K=="string"&&typeof H=="string"?K.toLowerCase().localeCompare(H.toLowerCase()):K<H?-1:K>H?1:0;return x.active&&(N=N.slice().sort((K,H)=>P(K[V],H[V])*L)),N},C=D=>{x.active&&x.column==D?(x.active=x.order=="asc",x.column=D,x.order="desc"):(x.active=!0,x.column=D,x.order="asc")},A=()=>_.value.getSelection().map(D=>JSON.parse(D.dataset.item)),B=(D,N)=>{if(D.altKey||D.ctrlKey||D.metaKey)return D.preventDefault(),!1;D.dataTransfer.setDragImage(f.value,0,15),D.dataTransfer.effectAllowed="all",D.dataTransfer.dropEffect="copy",D.dataTransfer.setData("items",JSON.stringify(A()))},U=(D,N)=>{D.preventDefault();let V=JSON.parse(D.dataTransfer.getData("items"));if(V.find(L=>L.storage!=y("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}i.emit("vf-modal-show",{type:"move",items:{from:V,to:N}})},Z=(D,N)=>{D.preventDefault(),!N||N.type!=="dir"||_.value.getSelection().find(V=>V==D.currentTarget)?(D.dataTransfer.dropEffect="none",D.dataTransfer.effectAllowed="none"):D.dataTransfer.dropEffect="copy"},ne=()=>{_.value=new Qe({area:k.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),i.on("vf-explorer-update",()=>e.nextTick(()=>{_.value.clearSelection(),_.value.setSelectables(document.getElementsByClassName("vf-item"))})),_.value.subscribe("predragstart",({event:D,isDragging:N})=>{if(N)g.value=_.value.getSelection().length,_.value.break();else{const V=D.target.offsetWidth-D.offsetX,L=D.target.offsetHeight-D.offsetY;V<15&&L<15&&(_.value.clearSelection(),_.value.break())}}),_.value.subscribe("predragmove",({isDragging:D})=>{D&&_.value.break()}),_.value.subscribe("callback",({items:D,event:N,isDragging:V})=>{i.emit("vf-nodes-selected",A()),g.value=_.value.getSelection().length})};return e.onMounted(ne),e.onMounted(()=>{e.watch(()=>u.view,()=>i.emit("vf-explorer-update"))}),(D,N)=>(e.openBlock(),e.createElementBlock("div",at,[h.view=="list"?(e.openBlock(),e.createElementBlock("div",it,[e.createElementVNode("div",{onClick:N[0]||(N[0]=V=>C("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center pl-1"},[lt,e.withDirectives(e.createVNode(re,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="basename"]])]),e.createElementVNode("div",{onClick:N[1]||(N[1]=V=>C("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center justify-center border-l border-r dark:border-gray-700"},[ct,e.withDirectives(e.createVNode(re,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="file_size"]])]),e.createElementVNode("div",{onClick:N[2]||(N[2]=V=>C("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center justify-center"},[dt,e.withDirectives(e.createVNode(re,{direction:x.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,x.active&&x.column=="last_modified"]])])])):e.createCommentVNode("",!0),e.createElementVNode("div",ut,[e.createElementVNode("div",{ref:V=>f.value=V,class:"absolute -z-50"},[mt,e.createElementVNode("div",ht,e.toDisplayString(g.value),1)],512)]),e.createElementVNode("div",{class:"h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto resize-y p-1 z-0",ref:V=>k.value=V,onContextmenu:N[3]||(N[3]=e.withModifiers(V=>e.unref(i).emit("vf-contextmenu-show",{event:V,area:k.value,items:A()}),["self","prevent"]))},[h.view=="list"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(S(),(V,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:P=>w(V),onContextmenu:e.withModifiers(P=>e.unref(i).emit("vf-contextmenu-show",{event:P,area:k.value,items:A(),target:V}),["prevent"]),onDragstart:P=>B(P),onDragover:P=>Z(P,V),onDrop:P=>U(P,V),class:"vf-item grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none","data-type":V.type,"data-item":JSON.stringify(V),"data-index":L},[e.createElementVNode("div",gt,[e.createElementVNode("div",pt,[V.type=="dir"?(e.openBlock(),e.createElementBlock("svg",yt,bt)):(e.openBlock(),e.createElementBlock("svg",_t,kt)),e.createElementVNode("span",vt,e.toDisplayString(V.basename),1)]),e.createElementVNode("div",wt,e.toDisplayString(V.file_size?e.unref(et)(V.file_size):""),1),e.createElementVNode("div",St,e.toDisplayString(e.unref(tt)(V.last_modified)),1)])],40,ft))),256)):e.createCommentVNode("",!0),h.view=="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(S(!1),(V,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:P=>w(V),onContextmenu:e.withModifiers(P=>e.unref(i).emit("vf-contextmenu-show",{event:P,area:k.value,items:A(),target:V}),["prevent"]),onDragstart:P=>B(P),onDragover:P=>Z(P,V),onDrop:P=>U(P,V),class:"vf-item border border-transparent hover:bg-neutral-50 m-0.5 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 md:h-24 text-center justify-center select-none","data-type":V.type,"data-item":JSON.stringify(V),"data-index":L},[e.createElementVNode("div",null,[e.createElementVNode("div",Et,[V.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Dt,Vt)):(e.openBlock(),e.createElementBlock("svg",$t,Nt)),e.createElementVNode("div",Ct,e.toDisplayString(d(V.extension)),1)]),e.createElementVNode("span",Bt,e.toDisplayString(s(V.basename)),1)])],40,xt))),256)):e.createCommentVNode("",!0)],544)]))}}),Pt={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},jt={class:"flex leading-5 items-center"},At=e.createElementVNode("div",{class:"mx-2","aria-label":"Storage","data-microtip-position":"top",role:"tooltip"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])],-1),Tt=["value"],It={class:"ml-3"},Lt={class:"flex leading-5 items-center"},Ot=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)],zt=Object.assign({name:"VFStatusbar"},{props:{data:Object},setup(h){var g;const u=h,i=inject("emitter"),{getStore:y,setStore:d}=inject("storage"),s=e.ref(0),k=e.ref((g=y("adapter"))!=null?g:u.data.adapter),f=()=>{i.emit("vf-fetch",{q:"index",adapter:k.value}),d("adapter",k.value)};return i.on("vf-nodes-selected",_=>{s.value=_.length}),(_,w)=>(e.openBlock(),e.createElementBlock("div",Pt,[e.createElementVNode("div",jt,[At,e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":w[0]||(w[0]=x=>k.value=x),onChange:f,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.data.storages,x=>(e.openBlock(),e.createElementBlock("option",{value:x},e.toDisplayString(x),9,Tt))),256))],544),[[e.vModelSelect,k.value]]),e.createElementVNode("span",It,e.toDisplayString(s.value>0?s.value+" items selected.":""),1)]),e.createElementVNode("div",Lt,[e.createElementVNode("span",{onClick:w[1]||(w[1]=x=>e.unref(i).emit("vf-modal-show",{type:"message",title:"Vuefinder 1.0",message:"Vuefinder is a file manager component for vue 3."}))},Ot)])]))}}),Kt={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none"},Ht=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)],Ft={class:"flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},Rt=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1)],Ut={class:"flex leading-5"},qt=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Wt=["title","onClick"],Yt=Object.assign({name:"VFBreadcrumb"},{props:{data:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(null),s=e.ref([]);i.on("vf-explorer-update",g=>{var x;let _=[],w=[];d.value=(x=u.data.dirname)!=null?x:y("adapter","local")+"://",d.value.length==0&&(s.value=[]),d.value.replace(y("adapter","local")+"://","").split("/").forEach(function(S){_.push(S),_.join("/")!=""&&w.push({basename:S,name:S,path:y("adapter","local")+"://"+_.join("/"),type:"dir"})}),w.length>4&&(w=w.slice(-5),w[0].name=".."),s.value=w});const k=g=>{var w;g.preventDefault();let _=JSON.parse(g.dataTransfer.getData("items"));if(_.find(x=>x.storage!=y("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}i.emit("vf-modal-show",{type:"move",items:{from:_,to:(w=s.value[s.value.length-2])!=null?w:{path:y("adapter","local")+"://"}}})},f=g=>{g.preventDefault(),s.value.length<1?(g.dataTransfer.dropEffect="none",g.dataTransfer.effectAllowed="none"):g.dataTransfer.dropEffect="copy"};return(g,_)=>(e.openBlock(),e.createElementBlock("div",Kt,[(e.openBlock(),e.createElementBlock("svg",{onDragover:_[0]||(_[0]=w=>f(w)),onDrop:_[1]||(_[1]=w=>k(w)),onClick:_[2]||(_[2]=w=>{var x,S;return!s.value.length||e.unref(i).emit("vf-fetch",{q:"index",adapter:h.data.adapter,path:(S=(x=s.value[s.value.length-2])==null?void 0:x.path)!=null?S:e.unref(y)("adapter","local")+"://"})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",s.value.length?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ht,34)),e.createElementVNode("div",Ft,[(e.openBlock(),e.createElementBlock("svg",{onClick:_[3]||(_[3]=w=>e.unref(i).emit("vf-fetch",{q:"index",adapter:h.data.adapter})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Rt)),e.createElementVNode("div",Ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(w,x)=>(e.openBlock(),e.createElementBlock("div",{key:x},[qt,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:w.basename,onClick:S=>e.unref(i).emit("vf-fetch",{q:"index",adapter:h.data.adapter,path:w.path})},e.toDisplayString(w.name),9,Wt)]))),128))])])]))}}),R=h=>Object.entries(h).map(u=>u.map(encodeURIComponent).join("=")).join("&"),Jt=["onClick"],Zt=e.createElementVNode("span",{class:"px-1"},null,-1),Xt=Object.assign({name:"VFContextMenu"},{props:{current:Object},setup(h){const u=h,i=inject("emitter"),y=e.ref(null),{apiUrl:d}=z(),s=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),k=e.ref([]);i.on("vf-context-selected",w=>{k.value=w});const f={newfolder:{title:"New Folder",action:()=>{i.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:"Delete",action:()=>{i.emit("vf-modal-show",{type:"delete",items:k})}},refresh:{title:"Refresh",action:()=>{i.emit("vf-fetch",{q:"index",adapter:u.current.adapter,path:u.current.dirname})}},preview:{title:"Preview",action:()=>{i.emit("vf-modal-show",{type:"preview",adapter:u.current.adapter,item:k.value[0]})}},download:{title:"Download",action:()=>{const w=d.value+"?"+R({q:"download",adapter:k.value[0].adapter,path:k.value[0].path});i.emit("vf-download",w)}},archive:{title:"Archive",action:()=>{i.emit("vf-modal-show",{type:"archive",items:k})}},unarchive:{title:"Unarchive",action:()=>{i.emit("vf-modal-show",{type:"unarchive",items:k})}},rename:{title:"Rename",action:()=>{i.emit("vf-modal-show",{type:"rename",items:k})}}},g=w=>{i.emit("vf-contextmenu-hide"),w.action()};i.on("vf-contextmenu-show",({event:w,area:x,items:S,target:C=null})=>{s.items=[],C?S.length>1&&S.some(A=>A.path===C.path)?(s.items.push(f.refresh),s.items.push(f.archive),s.items.push(f.delete),i.emit("vf-context-selected",S),console.log(S.length+" selected (more than 1 item.)")):(s.items.push(f.preview),s.items.push(f.rename),s.items.push(f.download),C.mime_type=="application/zip"?s.items.push(f.unarchive):s.items.push(f.archive),s.items.push(f.delete),i.emit("vf-context-selected",[C]),console.log(C.type+" is selected")):(s.items.push(f.refresh),s.items.push(f.newfolder),i.emit("vf-context-selected",[]),console.log("no files selected")),_(w,x)}),i.on("vf-contextmenu-hide",()=>{s.active=!1});const _=(w,x)=>{s.active=!0,e.nextTick(()=>{let S=x.getBoundingClientRect(),C=w.pageX,A=w.pageY,B=y.value.offsetHeight,U=y.value.offsetWidth;C=S.right-w.pageX+window.scrollX<U?C-U:C,A=S.bottom-w.pageY+window.scrollY<B?A-B:A,s.positions={left:C+"px",top:A+"px"}})};return(w,x)=>s.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"absolute text-xs bg-neutral-50 dark:bg-gray-800 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref:S=>y.value=S,style:e.normalizeStyle(s.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.items,S=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:S.title,onClick:C=>g(S)},[Zt,e.createElementVNode("span",null,e.toDisplayString(S.title),1)],8,Jt))),128))],4)):e.createCommentVNode("",!0)}}),Gt=e.createElementVNode("iframe",{id:"download_frame",style:{display:"none"}},null,-1),Qt=Object.assign({name:"VueFinder"},{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1}},setup(h){const u=h,i=je();e.provide("emitter",i);const{setStore:y,getStore:d}=ce(u.id);e.provide("storage",ce(u.id));const{apiUrl:s,setApiUrl:k}=z();k(u.url);const f=e.reactive({adapter:"local",storages:[],dirname:".",files:[]}),g=e.ref(d("viewport","grid")),_=e.ref(d("darkMode",u.dark));i.on("vf-darkMode-toggle",()=>{_.value=!_.value,y("darkMode",_.value)}),i.on("vf-view-toggle",S=>{g.value=S});const w=e.reactive({active:!1,type:"delete",data:{}});i.on("vf-modal-close",()=>{w.active=!1}),i.on("vf-modal-show",S=>{w.active=!0,w.type=S.type,w.data=S});const x=S=>{Object.assign(f,S),i.emit("vf-nodes-selected",{}),i.emit("vf-explorer-update",S)};return i.on("vf-fetch",S=>{te(s.value,{params:S}).then(C=>{i.emit("vf-modal-close"),x(C)})}),i.on("vf-download",S=>{document.getElementById("download_frame").src=S,i.emit("vf-modal-close")}),e.onMounted(()=>{i.emit("vf-fetch",{q:"index",adapter:d("adapter",f.adapter)})}),(S,C)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(_.value?"dark":"")},[e.createElementVNode("div",{class:"relative border rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none",onMousedown:C[0]||(C[0]=A=>e.unref(i).emit("vf-contextmenu-hide"))},[e.createVNode(Xe),e.createVNode(Yt,{data:f},null,8,["data"]),e.createVNode(Mt,{view:g.value,data:f},null,8,["view","data"]),e.createVNode(zt,{data:f},null,8,["data"])],32),w.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+w.type),{key:0,selection:w.data,current:f},null,8,["selection","current"])):e.createCommentVNode("",!0),e.createVNode(Xt,{current:f},null,8,["current"]),Gt],2))}}),er=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),tr={class:"fixed z-10 inset-0 overflow-y-auto"},rr={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full"},or={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},nr={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},O={__name:"ModalLayout",setup(h){const u=inject("emitter");return e.onMounted(()=>{const i=document.querySelector(".v-f-modal input");i&&i.focus()}),(i,y)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-20","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:y[1]||(y[1]=e.withKeys(d=>e.unref(u).emit("vf-modal-close"),["esc"])),tabindex:"0"},[er,e.createElementVNode("div",tr,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:y[0]||(y[0]=e.withModifiers(d=>e.unref(u).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",rr,[e.createElementVNode("div",or,[e.renderSlot(i.$slots,"default")]),e.createElementVNode("div",nr,[e.renderSlot(i.$slots,"buttons")])])],32)])],32))}},sr={class:"sm:flex sm:items-start"},ar=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),ir={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},lr=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Delete files",-1),cr={class:"mt-2"},dr=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete these files?",-1),ur={class:"flex text-sm text-gray-800 dark:text-gray-400"},mr={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],fr={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},gr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],pr={class:"ml-1.5"},yr=e.createElementVNode("div",{class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},"This action cannot be undone.",-1),br=Object.assign({name:"VFModalDelete"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(u.selection.items),s=()=>{d.value.length&&i.emit("vf-fetch",{q:"delete",adapter:y("adapter","local"),path:u.current.dirname,items:JSON.stringify(d.value.map(({path:k,type:f})=>({path:k,type:f})))})};return(k,f)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, delete!"),e.createElementVNode("button",{type:"button",onClick:f[0]||(f[0]=g=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel"),yr]),default:e.withCtx(()=>[e.createElementVNode("div",sr,[ar,e.createElementVNode("div",ir,[lr,e.createElementVNode("div",cr,[dr,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,g=>(e.openBlock(),e.createElementBlock("p",ur,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",mr,hr)):(e.openBlock(),e.createElementBlock("svg",fr,gr)),e.createElementVNode("span",pr,e.toDisplayString(g.basename),1)]))),256))])])])]),_:1}))}}),_r={class:"sm:flex sm:items-start"},kr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),vr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},wr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Sr={class:"mt-2"},xr={class:"text-sm text-gray-500"},Er=Object.assign({name:"VFModalMessage"},{props:{selection:Object},setup(h){const u=inject("emitter");return(i,y)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y[0]||(y[0]=d=>e.unref(u).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close")]),default:e.withCtx(()=>{var d,s,k,f;return[e.createElementVNode("div",_r,[kr,e.createElementVNode("div",vr,[e.createElementVNode("h3",wr,e.toDisplayString((s=(d=h.selection)==null?void 0:d.title)!=null?s:"Title"),1),e.createElementVNode("div",Sr,[e.createElementVNode("p",xr,e.toDisplayString((f=(k=h.selection)==null?void 0:k.message)!=null?f:"Message")+".",1)])])])]}),_:1}))}}),Dr={class:"sm:flex sm:items-start"},Vr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),$r={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Nr=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New Folder",-1),Cr={class:"mt-2"},Br=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new folder",-1),Mr=["onKeyup"],Pr=Object.assign({name:"VFModalNewFolder"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(""),s=()=>{d.value!=""&&i.emit("vf-fetch",{q:"newfolder",adapter:y("adapter","local"),path:u.current.dirname,name:d.value})};return(k,f)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:f[1]||(f[1]=g=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Dr,[Vr,e.createElementVNode("div",$r,[Nr,e.createElementVNode("div",Cr,[Br,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=g=>d.value=g),onKeyup:e.withKeys(s,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Folder Name",type:"text"},null,40,Mr),[[e.vModelText,d.value]])])])])]),_:1}))}}),jr={class:"sm:flex sm:items-start"},Ar=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Tr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ir=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New File",-1),Lr={class:"mt-2"},Or=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new file",-1),zr=["onKeyup"],Kr=Object.assign({name:"VFModalNewFile"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(""),s=()=>{d.value!=""&&i.emit("vf-fetch",{q:"newfile",adapter:y("adapter","local"),path:u.current.dirname,name:d.value})};return(k,f)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:f[1]||(f[1]=g=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",jr,[Ar,e.createElementVNode("div",Tr,[Ir,e.createElementVNode("div",Lr,[Or,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=g=>d.value=g),onKeyup:e.withKeys(s,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"File Name",type:"text"},null,40,zr),[[e.vModelText,d.value]])])])])]),_:1}))}}),Hr={class:"flex"},Fr={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Rr={class:"ml-auto mb-2"},Ur={key:0,class:"p-2 border font-normal border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[100px] text-xs"},qr={key:1},Wr={__name:"Text",props:{selection:Object},emits:["load"],setup(h,{emit:u}){const i=h,y=e.ref(""),d=e.ref(""),s=e.ref(null),k=e.ref(!1),{apiUrl:f}=z();e.onMounted(()=>{te(f.value,{params:{q:"preview",adapter:i.selection.adapter,path:i.selection.item.path},json:!1}).then(w=>{y.value=w,u("load")})});const g=()=>{k.value=!k.value,d.value=y.value,k.value==!0&&e.nextTick(()=>{s.value.focus()})},_=()=>{te(f.value,{method:"POST",params:{q:"save",adapter:i.selection.adapter,path:i.selection.item.path,content:d.value},json:!1}).then(w=>{y.value=w,u("load"),k.value=!k.value}).catch(w=>console.log(w.statusText))};return(w,x)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Hr,[e.createElementVNode("div",Fr,e.toDisplayString(h.selection.item.basename),1),e.createElementVNode("div",Rr,[k.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:_,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},"Save")):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:x[0]||(x[0]=S=>g())},e.toDisplayString(k.value?"Cancel":"Edit"),1)])]),e.createElementVNode("div",null,[k.value?(e.openBlock(),e.createElementBlock("div",qr,[e.withDirectives(e.createElementVNode("textarea",{ref:S=>s.value=S,"onUpdate:modelValue":x[1]||(x[1]=S=>d.value=S),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,d.value]])])):(e.openBlock(),e.createElementBlock("pre",Ur,e.toDisplayString(y.value),1))])],64))}},Yr={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Jr={class:"w-full flex justify-center"},Zr=["src"],Xr={__name:"Image",props:{selection:Object},emits:["load"],setup(h,{emit:u}){const i=h,{apiUrl:y}=z(),d=()=>y.value+"?"+R({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return onMounted(()=>{u("load")}),(s,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",Yr,e.toDisplayString(h.selection.item.basename),1),e.createElementVNode("div",Jr,[e.createElementVNode("img",{class:"max-w-[350px] max-h-[350px]",src:d(),alt:""},null,8,Zr)])],64))}},Gr={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Qr=e.createElementVNode("div",null," Default view.. ",-1),eo={__name:"Default",emits:["load"],setup(h,{emit:u}){return e.onMounted(()=>{u("load")}),(i,y)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",Gr,e.toDisplayString(i.selection.item.basename),1),Qr],64))}},to={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ro={class:"w-full",preload:"",controls:""},oo=["src"],no=e.createTextVNode(" Your browser does not support the video tag. "),so={__name:"Video",props:{selection:Object},emits:["load"],setup(h,{emit:u}){const i=h,{apiUrl:y}=z(),d=()=>y.value+"?"+R({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return e.onMounted(()=>{u("load")}),(s,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",to,e.toDisplayString(h.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("video",ro,[e.createElementVNode("source",{src:d(),type:"video/mp4"},null,8,oo),no])])],64))}},ao={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},io={class:"w-full",controls:""},lo=["src"],co=e.createTextVNode(" Your browser does not support the audio element. "),uo={__name:"Audio",props:{selection:Object},emits:["load"],setup(h,{emit:u}){const i=h,{apiUrl:y}=z(),d=()=>y.value+"?"+R({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return e.onMounted(()=>{u("load")}),(s,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",ao,e.toDisplayString(h.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("audio",io,[e.createElementVNode("source",{src:d(),type:"audio/mpeg"},null,8,lo),co])])],64))}},mo={class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ho=["data"],fo=["src"],go={__name:"Pdf",props:{selection:Object},emits:["load"],setup(h,{emit:u}){const i=h,{apiUrl:y}=z(),d=()=>y.value+"?"+R({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return e.onMounted(()=>{u("load")}),(s,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",mo,e.toDisplayString(h.selection.item.basename),1),e.createElementVNode("div",null,[e.createElementVNode("object",{data:d(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:d(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,fo)],8,ho)])],64))}},po={class:"sm:flex sm:items-start"},yo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},bo={class:"text-gray-700 dark:text-gray-200 text-sm"},_o={key:0,class:"flex leading-5"},ko=[e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e.createElementVNode("span",null,"Loading",-1)],vo=Object.assign({name:"VFModalPreview"},{props:{selection:Object},setup(h){const u=h,{apiUrl:i}=z(),y=inject("emitter"),d=e.ref(!1),s=f=>{var g;return((g=u.selection.item.mime_type)!=null?g:"").startsWith(f)},k=()=>{const f=i.value+"?"+R({q:"download",adapter:u.selection.adapter,path:u.selection.item.path});y.emit("vf-download",f)};return(f,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g[6]||(g[6]=_=>e.unref(y).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close"),e.createElementVNode("button",{type:"button",onClick:g[7]||(g[7]=_=>k()),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Download")]),default:e.withCtx(()=>[e.createElementVNode("div",po,[e.createElementVNode("div",yo,[e.createElementVNode("div",null,[s("text")?(e.openBlock(),e.createBlock(Wr,{key:0,selection:h.selection,onLoad:g[0]||(g[0]=_=>d.value=!0)},null,8,["selection"])):s("image")?(e.openBlock(),e.createBlock(Xr,{key:1,selection:h.selection,onLoad:g[1]||(g[1]=_=>d.value=!0)},null,8,["selection"])):s("video")?(e.openBlock(),e.createBlock(so,{key:2,selection:h.selection,onLoad:g[2]||(g[2]=_=>d.value=!0)},null,8,["selection"])):s("audio")?(e.openBlock(),e.createBlock(uo,{key:3,selection:h.selection,onLoad:g[3]||(g[3]=_=>d.value=!0)},null,8,["selection"])):s("application/pdf")?(e.openBlock(),e.createBlock(go,{key:4,selection:h.selection,onLoad:g[4]||(g[4]=_=>d.value=!0)},null,8,["selection"])):(e.openBlock(),e.createBlock(eo,{key:5,selection:h.selection,onLoad:g[5]||(g[5]=_=>d.value=!0)},null,8,["selection"]))]),e.createElementVNode("div",bo,[e.createElementVNode("p",null,e.toDisplayString(h.selection.item.path),1),e.createElementVNode("p",null,"mime_type: "+e.toDisplayString(h.selection.item.mime_type),1),d.value==!1?(e.openBlock(),e.createElementBlock("div",_o,ko)):e.createCommentVNode("",!0)])])])]),_:1}))}}),wo={class:"sm:flex sm:items-start"},So=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),xo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Eo={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Do={class:"mt-2"},Vo={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},$o={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},No=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Co={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Bo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Mo={class:"ml-1.5"},Po=["onKeyup"],jo=Object.assign({name:"VFModalRename"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(u.selection.items[0]),s=e.ref(u.selection.items[0].basename),k=()=>{s.value!=""&&i.emit("vf-fetch",{q:"rename",adapter:y("adapter","local"),path:u.current.dirname,item:d.value.path,name:s.value})};return(f,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Rename!"),e.createElementVNode("button",{type:"button",onClick:g[1]||(g[1]=_=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",wo,[So,e.createElementVNode("div",xo,[e.createElementVNode("h3",Eo,"Rename your "+e.toDisplayString(d.value.type=="dir"?"folder":"file"),1),e.createElementVNode("div",Do,[e.createElementVNode("p",Vo,[d.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",$o,No)):(e.openBlock(),e.createElementBlock("svg",Co,Bo)),e.createElementVNode("span",Mo,e.toDisplayString(d.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":g[0]||(g[0]=_=>s.value=_),onKeyup:e.withKeys(k,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,Po),[[e.vModelText,s.value]])])])])]),_:1}))}}),Ao={class:"sm:flex sm:items-start"},To=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),Io={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Lo=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Upload files",-1),Oo={class:"mt-2"},zo={class:"text-gray-500 mb-1"},Ko=["id"],Ho=["disabled","onClick"],Fo=Object.assign({name:"VFModalUpload"},{props:{current:Object},setup(h){const u=h,i=inject("emitter"),{apiUrl:y}=z(),d=e.ref(null),s=e.ref(null),k=e.ref(null),f=e.ref([]),g=e.ref(!0),_=()=>{d.value.start()};return e.onMounted(()=>{d.value=new ee.default.Uploader({runtimes:"html5",browse_button:k.value,container:s.value,max_file_size:"10mb",multiple_queues:!0,file_data_name:"file",url:y.value+"?"+R({q:"upload",adapter:u.current.adapter,path:u.current.dirname}),init:{PostInit:function(){},FilesAdded:function(w,x){g.value=!1,ee.default.each(x,function(S){f.value.push({id:S.id,name:S.name,size:ee.default.formatSize(S.size),percent:""})})},UploadProgress:function(w,x){f.value[f.value.findIndex(S=>S.id==x.id)].percent=x.percent+"%"},UploadComplete:function(){g.value=!0,i.emit("vf-fetch",{q:"index",adapter:u.current.adapter,path:u.current.dirname})},Error:function(w,x){}}}),d.value.init()}),(w,x)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{disabled:g.value,onClick:e.withModifiers(_,["prevent"]),type:"button",class:e.normalizeClass([g.value?"bg-red-200 hover:bg-red-200":"bg-red-600 hover:bg-red-700","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"])},"Upload!",10,Ho),e.createElementVNode("button",{type:"button",onClick:x[0]||(x[0]=S=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Ao,[To,e.createElementVNode("div",Io,[Lo,e.createElementVNode("div",Oo,[e.createElementVNode("div",zo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,S=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{id:S.id},[e.createTextVNode(e.toDisplayString(S.name)+" ( "+e.toDisplayString(S.size)+") ",1),e.createElementVNode("b",null,e.toDisplayString(S.percent),1)],8,Ko)]))),256))]),e.createElementVNode("div",{class:"text-gray-500",ref:S=>s.value=S},[e.createElementVNode("a",{ref:S=>k.value=S,href:"javascript:;"},"[Select files]",512)],512)])])])]),_:1}))}}),Ro={class:"sm:flex sm:items-start"},Uo=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})])],-1),qo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Wo=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Archive files",-1),Yo={class:"mt-2"},Jo={class:"flex text-sm text-gray-800 dark:text-gray-400"},Zo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Xo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Go={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Qo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],en={class:"ml-1.5"},tn=e.createElementVNode("p",{class:"my-1 text-sm text-gray-500"},"Archive name. (.zip file will be created)",-1),rn=["onKeyup"],on=Object.assign({name:"VFModalArchive"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(""),s=e.ref(u.selection.items),k=()=>{s.value.length&&i.emit("vf-fetch",{q:"archive",adapter:y("adapter","local"),path:u.current.dirname,items:JSON.stringify(s.value.map(({path:f,type:g})=>({path:f,type:g}))),name:d.value})};return(f,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Archive!"),e.createElementVNode("button",{type:"button",onClick:g[1]||(g[1]=_=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Ro,[Uo,e.createElementVNode("div",qo,[Wo,e.createElementVNode("div",Yo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,_=>(e.openBlock(),e.createElementBlock("p",Jo,[_.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Zo,Xo)):(e.openBlock(),e.createElementBlock("svg",Go,Qo)),e.createElementVNode("span",en,e.toDisplayString(_.basename),1)]))),256)),tn,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":g[0]||(g[0]=_=>d.value=_),onKeyup:e.withKeys(k,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,rn),[[e.vModelText,d.value]])])])])]),_:1}))}}),nn={class:"sm:flex sm:items-start"},sn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])],-1),an={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ln=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Archive files",-1),cn={class:"mt-2"},dn={class:"flex text-sm text-gray-800 dark:text-gray-400"},un={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},mn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],hn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},fn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],gn={class:"ml-1.5"},pn={class:"my-1 text-sm text-gray-500"},yn=Object.assign({name:"VFModalUnarchive"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage");e.ref("");const d=e.ref(u.selection.items[0]),s=e.ref([]),k=()=>{i.emit("vf-fetch",{q:"unarchive",adapter:y("adapter","local"),path:u.current.dirname,item:d.value.path})};return(f,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Unarchive!"),e.createElementVNode("button",{type:"button",onClick:g[0]||(g[0]=_=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",nn,[sn,e.createElementVNode("div",an,[ln,e.createElementVNode("div",cn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,_=>(e.openBlock(),e.createElementBlock("p",dn,[_.type=="dir"?(e.openBlock(),e.createElementBlock("svg",un,mn)):(e.openBlock(),e.createElementBlock("svg",hn,fn)),e.createElementVNode("span",gn,e.toDisplayString(_.basename),1)]))),256)),e.createElementVNode("p",pn,"Archive will be unarchived at ("+e.toDisplayString(h.current.dirname)+")",1)])])])]),_:1}))}}),bn={class:"sm:flex sm:items-start"},_n=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),kn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},vn=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Move files",-1),wn={class:"mt-2"},Sn={class:"flex text-sm text-gray-800 dark:text-gray-400"},xn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},En=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Dn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],$n={class:"ml-1.5"},Nn=e.createElementVNode("p",{class:"text-sm text-gray-500 pb-1 pt-3"},"Are you sure you want to move these files to ?",-1),Cn={class:"flex text-sm text-gray-800 dark:text-gray-400"},Bn=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),Mn={class:"ml-1.5 overflow-auto"},oe={VueFinder:Qt,...Object.freeze(Object.defineProperty({__proto__:null,ModalDelete:br,ModalMessage:Er,ModalNewFolder:Pr,ModalNewFile:Kr,ModalPreview:vo,ModalRename:jo,ModalUpload:Fo,ModalArchive:on,ModalUnarchive:yn,ModalMove:Object.assign({name:"VFModalMove"},{props:{selection:Object,current:Object},setup(h){const u=h,i=inject("emitter"),{getStore:y}=inject("storage"),d=e.ref(u.selection.items.from),s=()=>{d.value.length&&i.emit("vf-fetch",{q:"move",adapter:y("adapter","local"),path:u.current.dirname,items:JSON.stringify(d.value.map(({path:k,type:f})=>({path:k,type:f}))),item:u.selection.items.to.path})};return(k,f)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, move!"),e.createElementVNode("button",{type:"button",onClick:f[0]||(f[0]=g=>e.unref(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",bn,[_n,e.createElementVNode("div",kn,[vn,e.createElementVNode("div",wn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,g=>(e.openBlock(),e.createElementBlock("p",Sn,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",xn,En)):(e.openBlock(),e.createElementBlock("svg",Dn,Vn)),e.createElementVNode("span",$n,e.toDisplayString(g.path),1)]))),256)),Nn,e.createElementVNode("p",Cn,[Bn,e.createElementVNode("span",Mn,e.toDisplayString(h.selection.items.to.path),1)])])])])]),_:1}))}})},Symbol.toStringTag,{value:"Module"}))},Da="",Va="";return{install(h){for(const u in oe)if(oe.hasOwnProperty(u)){const i=oe[u];h.component(i.name,i)}}}});
