(function(e,F){typeof exports=="object"&&typeof module<"u"?module.exports=F(require("vue")):typeof define=="function"&&define.amd?define(["vue"],F):(e=typeof globalThis<"u"?globalThis:e||self,e.VueFinder=F(e.Vue))})(this,function(e){"use strict";const F=(f,{method:m="get",params:a={},json:g=!0})=>{const c={method:m};return m=="get"?f+="?"+new URLSearchParams(a):c.body=a,g?fetch(f,c).then(s=>s.json()):fetch(f,c)};function Ce(f){return{all:f=f||new Map,on:function(m,a){var g=f.get(m);g?g.push(a):f.set(m,[a])},off:function(m,a){var g=f.get(m);g&&(a?g.splice(g.indexOf(a)>>>0,1):f.set(m,[]))},emit:function(m,a){var g=f.get(m);g&&g.slice().map(function(c){c(a)}),(g=f.get("*"))&&g.slice().map(function(c){c(m,a)})}}}function ie(f){let m=localStorage.getItem(f+"_storage");const a=e.ref(JSON.parse(m));e.watch(a,g);function g(){a.value===null||a.value===""?localStorage.removeItem(f+"_storage"):localStorage.setItem(f+"_storage",JSON.stringify(a.value))}function c(_,k){a.value=Object.assign({...a.value},{[_]:k})}function s(){a.value=null}return{getStore:(_,k=null)=>a.value===null||a.value===""?k:a.value.hasOwnProperty(_)?a.value[_]:k,setStore:c,clearStore:s}}const Be={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},Me={class:"flex text-center"},Pe=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)],je=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)],Ae=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"},null,-1)],Te=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)],Ie=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)],Le=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)],Oe=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"},null,-1)],ze={class:"flex text-center items-center justify-end"},Ke={class:"mx-1.5","aria-label":"Dark Mode","data-microtip-position":"bottom",role:"tooltip"},He=[e.createStaticVNode('<g class="dark:opacity-0"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path d="M12 4v.01M17.66 6.345l-.007.007M20.005 12.005h-.01M17.66 17.665l-.007-.007M12 20.01V20M6.34 17.665l.007-.007M3.995 12.005h.01M6.34 6.344l.007.007" fill="none"></path></g><g class="opacity-0 dark:opacity-100"><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"></path><path d="M12 3v1M18.66 5.345l-.828.828M21.005 12.005h-1M18.66 18.665l-.828-.828M12 21.01V20M5.34 18.666l.835-.836M2.995 12.005h1.01M5.34 5.344l.835.836" fill="none"></path></g>',2)],Fe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Re=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},null,-1)],Ue={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},qe=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"},null,-1)],We=Object.assign({name:"VFToolbar"},{setup(f){const m=inject("emitter"),{getStore:a,setStore:g}=inject("storage"),c=e.ref(a("viewport","grid")),s=e.ref([]);return m.on("vf-nodes-selected",y=>{s.value=y}),m.on("vf-view-toggle",y=>{g("viewport",y),c.value=y}),(y,_)=>(e.openBlock(),e.createElementBlock("div",Be,[e.createElementVNode("div",Me,[e.createElementVNode("div",{class:"mx-1.5","aria-label":"New Folder","data-microtip-position":"bottom",role:"tooltip",onClick:_[0]||(_[0]=k=>e.unref(m).emit("vf-modal-show",{type:"new-folder",items:s.value}))},Pe),e.createElementVNode("div",{class:"mx-1.5","aria-label":"New File","data-microtip-position":"bottom",role:"tooltip",onClick:_[1]||(_[1]=k=>e.unref(m).emit("vf-modal-show",{type:"new-file",items:s.value}))},je),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Rename","data-microtip-position":"bottom",role:"tooltip",onClick:_[2]||(_[2]=k=>s.value.length!=1||e.unref(m).emit("vf-modal-show",{type:"rename",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length==1?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ae,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Delete","data-microtip-position":"bottom",role:"tooltip",onClick:_[3]||(_[3]=k=>!s.value.length||e.unref(m).emit("vf-modal-show",{type:"delete",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Te,2))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Upload","data-microtip-position":"bottom",role:"tooltip",onClick:_[4]||(_[4]=k=>e.unref(m).emit("vf-modal-show",{type:"upload",items:s.value}))},Ie),s.value.length==1&&s.value[0].mime_type=="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":"Unrchive","data-microtip-position":"bottom",role:"tooltip",onClick:_[5]||(_[5]=k=>!s.value.length||e.unref(m).emit("vf-modal-show",{type:"unarchive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Le,2))])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":"Archive","data-microtip-position":"bottom",role:"tooltip",onClick:_[6]||(_[6]=k=>!s.value.length||e.unref(m).emit("vf-modal-show",{type:"archive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-800 hover:stroke-cyan-700 dark:stroke-gray-300 dark:hover:stroke-gray-100":"stroke-gray-200  dark:stroke-gray-600","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Oe,2))]))]),e.createElementVNode("div",ze,[e.createElementVNode("div",Ke,[(e.openBlock(),e.createElementBlock("svg",{onClick:_[7]||(_[7]=k=>e.unref(m).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},He))]),e.createElementVNode("div",{class:"mx-1.5","aria-label":"Change View","data-microtip-position":"bottom",role:"tooltip",onClick:_[8]||(_[8]=k=>e.unref(m).emit("vf-view-toggle",c.value=="list"?"grid":"list"))},[c.value=="grid"?(e.openBlock(),e.createElementBlock("svg",Fe,Re)):e.createCommentVNode("",!0),c.value=="list"?(e.openBlock(),e.createElementBlock("svg",Ue,qe)):e.createCommentVNode("",!0)])])]))}});var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae={exports:{}};(function(f,m){(function(a,g){f.exports=g()})(Ye,function(){function a(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function g(n,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function c(n,r,t){return r&&g(n.prototype,r),t&&g(n,t),n}function s(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function y(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function _(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(i){s(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&E(n,r)}function b(n){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(n)}function E(n,r){return E=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i},E(n,r)}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function $(n,r,t){return w()?$=Reflect.construct:$=function(o,l,d){var u=[null];u.push.apply(u,l);var h=Function.bind.apply(o,u),v=new h;return d&&E(v,d.prototype),v},$.apply(null,arguments)}function I(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function A(n){var r=typeof Map=="function"?new Map:void 0;return A=function(i){if(i===null||!I(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,o)}function o(){return $(i,arguments,b(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),E(o,i)},A(n)}function C(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Z(n,r){return r&&(typeof r=="object"||typeof r=="function")?r:C(n)}function W(n){var r=w();return function(){var i=b(n),o;if(r){var l=b(this).constructor;o=Reflect.construct(i,arguments,l)}else o=i.apply(this,arguments);return Z(this,o)}}function te(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=b(n),n!==null););return n}function x(n,r,t){return typeof Reflect<"u"&&Reflect.get?x=Reflect.get:x=function(o,l,d){var u=te(o,l);if(!!u){var h=Object.getOwnPropertyDescriptor(u,l);return h.get?h.get.call(d):h.value}},x(n,r,t||n)}function N(n,r){return M(n)||K(n,r)||le(n,r)||gn()}function D(n){return L(n)||z(n)||le(n)||fn()}function L(n){if(Array.isArray(n))return re(n)}function M(n){if(Array.isArray(n))return n}function z(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function K(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],i=!0,o=!1,l=void 0;try{for(var d=n[Symbol.iterator](),u;!(i=(u=d.next()).done)&&(t.push(u.value),!(r&&t.length===r));i=!0);}catch(h){o=!0,l=h}finally{try{!i&&d.return!=null&&d.return()}finally{if(o)throw l}}return t}}function le(n,r){if(!!n){if(typeof n=="string")return re(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return re(n,r)}}function re(n,r){(r==null||r>n.length)&&(r=n.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=n[t];return i}function fn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=function(r,t,i){var o=r.x,l=r.y,d=i.x,u=i.y,h={"+":{x:o+d,y:l+u},"-":{x:o-d,y:l-u},"*":{x:o*d,y:l*u},"/":{x:o/d,y:l/u}};return h[t]},R=function(r){return{x:r.left,y:r.top}},ce=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:r.x,top:r.y,right:r.x,bottom:r.y,width:t,height:t}},pn=function(r){return{x:r,y:r}},yn=function(n,r,t){window.addEventListener("resize",r),window.addEventListener("scroll",r),n.forEach(function(i,o){t.observe(i,{childList:o!==0,attributes:!0})})},_n=function(n){var r=X(n);return r.x||r.y?!0:n instanceof HTMLDocument?n.body?!!(n.body.scrollTop=1):!!(n.documentElement.scrollTop=1):!!(n.scrollTop=1)},bn=function(n){var r=document.createElement("div");return r.style.position="fixed",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.zIndex="999999999999999999",r.classList.add(n),r},kn=function(n){var r=document.createElement("div");return r.style.position="absolute",n||(r.style.background="rgba(0, 0, 255, 0.1)",r.style.border="1px solid rgba(0, 0, 255, 0.45)",r.style.display="none",r.style.pointerEvents="none"),r},vn=function(n,r){var t;return function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var d=function(){t=null,n.apply(void 0,o)};clearTimeout(t),t=setTimeout(d,r)}},oe=function(){var n,r,t,i;return{y:((n=document.body)===null||n===void 0?void 0:n.scrollTop)||((r=document.documentElement)===null||r===void 0?void 0:r.scrollTop)||0,x:((t=document.body)===null||t===void 0?void 0:t.scrollLeft)||((i=document.documentElement)===null||i===void 0?void 0:i.scrollLeft)||0}},wn=function(n,r){if(n instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var t=n.getBoundingClientRect();return{top:t.top,left:t.left,bottom:t.bottom,right:t.right,width:(n.clientWidth||t.width)*r,height:(n.clientHeight||t.height)*r}},X=function(n){return!n||n instanceof Document?oe():{x:n.scrollLeft>=0?n.scrollLeft:oe().x,y:n.scrollTop>=0?n.scrollTop:oe().y}},de=function(n){var r=n.elementRect,t=n.containerRect,i=n.tolerance,o=i===void 0?{x:0,y:0}:i,l=[];return r.top-o.y<t.top&&l.push("top"),r.left-o.x<t.left&&l.push("left"),r.bottom+o.y>t.bottom&&l.push("bottom"),r.right+o.y>t.right&&l.push("right"),l},Sn=function(n){var r=n.event;return{x:r.clientX,y:r.clientY}},xn=function(n){var r=n.scrollAmount,t=n.initialPointerPos,i=n.pointerPos,o={};return i.x>t.x-r.x?(o.left=t.x-r.x,o.width=i.x-t.x+r.x):(o.left=i.x,o.width=t.x-i.x-r.x),i.y>t.y-r.y?(o.top=t.y-r.y,o.height=i.y-t.y+r.y):(o.top=i.y,o.height=t.y-i.y-r.y),o},ue=function(r){var t={x:0,y:0},i=window.getComputedStyle(r);if(!i.transform||i.transform==="none")return t;if(i.transform.indexOf("3d")>=0){var o=i.transform.trim().match(/matrix3d\((.*?)\)/);if(o&&o.length){var l,d=(l=o[1])===null||l===void 0?void 0:l.split(",");t.x=parseInt(d[12])||0,t.y=parseInt(d[13])||0}return t}else{var u=i.transform.trim().match(/matrix\((.*?)\)/);if(u&&u.length){var h,v=(h=u[1])===null||h===void 0?void 0:h.split(",");t.x=parseInt(v[4])||0,t.y=parseInt(v[5])||0}return t}},En=function(r){var t=r.style.transform;if(!t||t.indexOf("translate")<0)return ue(r);var i={x:0,y:0},o=t.trim().match(/translate[3dD]*?\(.*?\)/);if(o){var l,d=(l=o[0])===null||l===void 0?void 0:l.split("(");if(d){var u,h=(u=d[1])===null||u===void 0?void 0:u.split(",");i.x=parseInt(h[0])||0,i.y=parseInt(h[1])||0}}return!i.x&&!i.x?ue(r):i},Dn=function(r){var t=r.style,i={x:parseInt(t.left)||0,y:parseInt(t.top)||0};if(!i.x&&!i.x){var o=window.getComputedStyle(r);return{x:parseInt(o.left)||0,y:parseInt(o.top)||0}}return i},Vn=function(n,r){return r?En(n):Dn(n)},$n=function(n){var r=n.element,t=n.edges,i=n.elementRect,o=n.containerRect,l=n.elementPos,d=n.useTransform;t.includes("top")&&Y(r,{y:l.y+o.top-i.top,x:l.x},d),t.includes("left")&&Y(r,{y:l.y,x:l.x+o.left-i.left},d),t.includes("bottom")&&Y(r,{y:l.y+o.bottom-i.bottom,x:l.x},d),t.includes("right")&&Y(r,{y:l.y,x:l.x+o.right-i.right},d)},me=function(n){var r=n.computedStyle,t=n.node,i=r.position,o=i==="absolute"||i==="relative"||i==="fixed";!(t instanceof HTMLDocument)&&!o&&(t.style.position="relative")},Nn=function(n){var r=n.shiftKey,t=n.keyboardDragSpeed,i=n.zoom,o=n.key,l=n.dragKeys,d=n.scrollDiff,u=n.canScroll,h=n.scrollCallback,v={x:0,y:0},p=r?t*4*i:t*i;return l.left.includes(o)&&(v.x=d.x||-p,!r&&!d.x&&u&&h(["left"],t)),l.right.includes(o)&&(v.x=d.x||p,!r&&!d.x&&u&&h(["right"],t)),l.up.includes(o)&&(v.y=d.y||-p,!r&&!d.y&&u&&h(["top"],t)),l.down.includes(o)&&(v.y=d.y||p,!r&&!d.y&&u&&h(["bottom"],t)),v},Cn=function(n){var r=n.element,t=n.force,i=n.multiSelectionToggle,o=n.SelectedSet,l=n.hoverClassName;r.classList.contains(l)&&!t||(o.has(r)?i&&o.delete(r):o.add(r),r.classList.add(l))},Bn=function(n){var r=n.element,t=n.force,i=n.SelectedSet,o=n.PrevSelectedSet,l=n.hoverClassName;if(!r.classList.contains(l)&&!t)return!1;var d=i.has(r),u=o.has(r);d&&!u?i.delete(r):!d&&u&&i.add(r),r.classList.remove(l)},ne=function(n,r){return n.left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top},he=function(n){var r=n.element,t=n.posDirection,i=n.containerRect,o=n.useTransform,l=Vn(r,o),d=j(l,"+",t);Y(r,d,o);var u=r.getBoundingClientRect(),h=de({elementRect:u,containerRect:i});$n({element:r,edges:h,elementRect:u,containerRect:i,elementPos:d,useTransform:o})},Mn=function(n,r){window.removeEventListener("resize",r),window.removeEventListener("scroll",r),n.disconnect()},Pn=function(n,r,t){if(!!r.length){var i=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,o=n instanceof HTMLDocument?i||document.body:n,l=r.includes("top")&&o.scrollTop>0,d=r.includes("bottom")&&o.scrollTop<o.scrollHeight,u=r.includes("left")&&o.scrollLeft>0,h=r.includes("right")&&o.scrollLeft<o.scrollWidth;l&&(o.scrollTop-=1*t),d&&(o.scrollTop+=1*t),u&&(o.scrollLeft-=1*t),h&&(o.scrollLeft+=1*t)}},Y=function(n,r,t){if(t){var i=n.style.transform;n.style.transform="translate3d(".concat(r.x,"px,").concat(r.y,"px,1px) ").concat(i.replace(/translate.*?\)/g,""))}else n.style.left="".concat(r.x,"px"),n.style.top="".concat(r.y,"px");return n},jn=function(n){for(var r=n.subscribe,t=n.publish,i=n.Interaction,o=n.SelectedSet,l={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(p){return p.event}}],"Interaction:end":[{name:"callback"}]},d=function(){var p=N(h[u],2),S=p[0],V=p[1];["pre",!1].forEach(function(B){return r(B?"".concat(S,":").concat(B):S,function(T){return V.forEach(function(P){return(!P.condition||P.condition(T))&&t(B?"".concat(B).concat(P.name):P.name,_({items:o.elements,isDragging:i.isDragging},T))})})})},u=0,h=Object.entries(l);u<h.length;u++)d()},U=function(n){return n?!Array.isArray(n)&&(n instanceof HTMLElement||n instanceof SVGElement)?[n]:D(n):[]},fe=function(n,r){n.style.left="".concat(r.left,"px"),n.style.top="".concat(r.top,"px"),n.style.width="".concat(r.width,"px"),n.style.height="".concat(r.height,"px")},An=function(){function n(r){var t=this,i=r.area,o=r.PS,l=r.zoom;a(this,n),s(this,"_modificationCallback",void 0),s(this,"_modificationObserver",void 0),s(this,"_zoom",void 0),s(this,"_node",void 0),s(this,"_parentNodes",void 0),s(this,"_computedStyle",void 0),s(this,"_computedBorder",void 0),s(this,"_rect",void 0),s(this,"setArea",function(d){t._node=d,me({computedStyle:t.computedStyle,node:t._node}),setTimeout(function(){t.PubSub.publish("Area:modified:pre",{item:t}),t.reset(),t.PubSub.publish("Area:modified",{item:t})})}),s(this,"start",function(){yn(t.parentNodes,t._modificationCallback,t._modificationObserver)}),s(this,"reset",function(){t._computedStyle=void 0,t._rect=void 0,t._computedBorder=void 0,t._parentNodes=void 0}),s(this,"stop",function(){Mn(t._modificationObserver,t._modificationCallback),t.reset()}),s(this,"scroll",function(d,u){var h={scroll_directions:d,scroll_multiplier:u};t.PubSub.publish("Area:scroll:pre",h),Pn(t._node,d,u),t.PubSub.publish("Area:scroll",h)}),this._zoom=l,this.PubSub=o,this.setArea(i),this._modificationCallback=vn(function(d){t.PubSub.publish("Area:modified:pre",{event:d,item:t}),t.reset(),t.PubSub.publish("Area:modified",{event:d,item:t})},60),this._modificationObserver=new MutationObserver(this._modificationCallback),this.PubSub.subscribe("Interaction:init",this.start),this.PubSub.subscribe("Interaction:end",this.reset)}return c(n,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=wn(this.HTMLNode,this._zoom)}},{key:"parentNodes",get:function(){if(this._parentNodes)return this._parentNodes;var t=function i(o){var l,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(l=o[d])===null||l===void 0?void 0:l.parentNode;return u?(o.push(u),d++,i(o,d)):o};return this._parentNodes=t([this.HTMLNode]),this._parentNodes}}]),n}(),Tn=function(){function n(r){var t=this,i=r.DS,o=r.dragKeys,l=r.draggability,d=r.keyboardDrag,u=r.keyboardDragSpeed,h=r.useTransform,v=r.zoom;a(this,n),s(this,"_useTransform",void 0),s(this,"_prevCursorPos",void 0),s(this,"_prevScrollPos",void 0),s(this,"_elements",[]),s(this,"_draggability",void 0),s(this,"_dragKeys",void 0),s(this,"_dragKeysFlat",void 0),s(this,"_keyboardDrag",void 0),s(this,"_keyboardDragSpeed",void 0),s(this,"_zoom",void 0),s(this,"keyboardDrag",function(p){var S=p.event,V=p.key;if(!(!t._keyboardDrag||!t._dragKeysFlat.includes(V)||!t.DS.SelectedSet.size||!t._draggability||t.DS.continue)){var B={event:S,isDragging:!0,isDraggingKeyboard:!0};t.DS.publish(["Interaction:start:pre","Interaction:start"],B),t._elements=t.DS.getSelection(),t.handleZIndex(!0);var T=Nn({shiftKey:t.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:t._keyboardDragSpeed,zoom:t._zoom,key:V,scrollCallback:t.DS.Area.scroll,scrollDiff:t._scrollDiff,canScroll:t.DS.stores.ScrollStore.canScroll,dragKeys:t._dragKeys});t._elements.forEach(function(P){return he({element:P,posDirection:T,containerRect:t.DS.SelectorArea.rect,useTransform:t._useTransform})}),t.DS.publish(["Interaction:update:pre","Interaction:update"],B)}}),s(this,"keyboardEnd",function(p){var S=p.event,V=p.key;if(!(!t._keyboardDrag||!t._dragKeysFlat.includes(V)||!t.DS.SelectedSet.size||!t._draggability)){var B={event:S,isDragging:t._draggability,isDraggingKeyboard:!0};t.DS.publish(["Interaction:end:pre","Interaction:end"],B)}}),s(this,"start",function(p){var S=p.isDragging,V=p.isDraggingKeyboard;!S||V||(t._prevCursorPos=null,t._prevScrollPos=null,t._elements=t.DS.getSelection(),t.handleZIndex(!0))}),s(this,"stop",function(p){p!=null&&p.isKeyboard||(t._prevCursorPos=null,t._prevScrollPos=null,t.handleZIndex(!1),t._elements=[])}),s(this,"update",function(p){var S=p.isDragging,V=p.isDraggingKeyboard;if(!(!S||!t._elements.length||V||t.DS.continue)){var B=j(t._cursorDiff,"+",t._scrollDiff);t._elements.forEach(function(T){return he({element:T,posDirection:B,containerRect:t.DS.SelectorArea.rect,useTransform:t._useTransform})})}}),s(this,"handleZIndex",function(p){t._elements.forEach(function(S){return S.style.zIndex="".concat((parseInt(S.style.zIndex)||0)+p?9999:-9998)})}),this.DS=i,this._useTransform=h,this._keyboardDragSpeed=u,this._keyboardDrag=d,this._zoom=v,this._draggability=l,this._dragKeys={up:o.up.map(function(p){return p.toLowerCase()}),down:o.down.map(function(p){return p.toLowerCase()}),left:o.left.map(function(p){return p.toLowerCase()}),right:o.right.map(function(p){return p.toLowerCase()})},this._dragKeysFlat=[].concat(D(this._dragKeys.up),D(this._dragKeys.down),D(this._dragKeys.left),D(this._dragKeys.right)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return c(n,[{key:"_cursorDiff",get:function(){var t=this.DS.stores.PointerStore.currentVal,i=this._prevCursorPos?j(t,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=t,i}},{key:"_scrollDiff",get:function(){var t=this.DS.stores.ScrollStore.currentVal,i=this._prevScrollPos?j(t,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=t,i}}]),n}(),In=function(){function n(r){var t=this,i=r.DS,o=r.areaElement,l=r.draggability,d=r.immediateDrag,u=r.selectableClass;a(this,n),s(this,"_areaElement",void 0),s(this,"_draggability",void 0),s(this,"_immediateDrag",void 0),s(this,"_selectableClass",void 0),s(this,"isInteracting",void 0),s(this,"isDragging",void 0),s(this,"init",function(){return t.DS.publish("Interaction:init:pre",{})}),s(this,"_init",function(){t.stop(),t._areaElement.addEventListener("mousedown",t.start),t._areaElement.addEventListener("touchstart",t.start,{passive:!1}),t.DS.publish("Interaction:init",{})}),s(this,"start",function(h){return t.DS.publish("Interaction:start:pre",{event:h,isDragging:t.isDragging})}),s(this,"_start",function(h){h.type==="touchstart"&&h.preventDefault(),t._canInteract(h)&&(t.isInteracting=!0,t.isDragging=t.isDragEvent(h),t.DS.publish("Interaction:start",{event:h,isDragging:t.isDragging}),document.addEventListener("mouseup",t.reset),document.addEventListener("touchend",t.reset))}),s(this,"isDragEvent",function(h){var v=h.target.closest(".".concat(t._selectableClass));return!t._draggability||t.DS.stores.KeyStore.isMultiSelectKeyPressed(h)||!v?!1:(t._immediateDrag&&(t.DS.SelectedSet.size?t.DS.SelectedSet.has(v)||(t.DS.SelectedSet.clear(),t.DS.SelectedSet.add(v)):t.DS.SelectedSet.add(v)),!!t.DS.SelectedSet.has(v))}),s(this,"onClick",function(h){var v=h.event;if(!!t._canInteract(v)&&!(v.detail>0)){var p=t.DS,S=p.stores,V=S.PointerStore,B=S.KeyStore,T=p.SelectableSet,P=p.SelectedSet;V.start(v);var q=v.target;!T.has(q)||(B.isMultiSelectKeyPressed(v)||P.clear(),P.toggle(q),t.reset())}}),s(this,"stop",function(){t.isInteracting=!1,t.isDragging=!1,t._areaElement.removeEventListener("mousedown",t.start),t._areaElement.removeEventListener("touchstart",t.start,{passive:!1}),document.removeEventListener("mouseup",t.reset),document.removeEventListener("touchend",t.reset)}),s(this,"update",function(h){var v=h.event,p=h.scroll_directions,S=h.scroll_multiplier;t.isInteracting&&t.DS.publish(["Interaction:update:pre","Interaction:update"],{event:v,scroll_directions:p,scroll_multiplier:S,isDragging:t.isDragging})}),s(this,"reset",function(h){return t.DS.publish("Interaction:end:pre",{event:h,isDragging:t.isDragging})}),s(this,"_reset",function(h){var v=t.isDragging;t.stop(),t.init(),t.DS.publish("Interaction:end",{event:h,isDragging:v})}),this._areaElement=o,this._draggability=l,this._immediateDrag=d,this._selectableClass=u,this.DS=i,this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(h){var v=h.event;return t.start(v)}),this.DS.subscribe("Interaction:start:pre",function(h){var v=h.event;return t._start(v)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(h){var v=h.event;return t._reset(v)}),this.DS.subscribe("Area:scroll",this.update)}return c(n,[{key:"_canInteract",value:function(t){var i=t.clientX===0&&t.clientY===0&&t.detail===0&&t.target;return!(t.button===2||this.isInteracting||t.target&&!this.DS.SelectorArea.isInside(t.target)||!i&&!this.DS.SelectorArea.isClicked(t))}}]),n}(),Ln=function n(r){var t=this,i=r.DS;a(this,n),s(this,"subscribers",{}),s(this,"subscribe",function(o,l){return Array.isArray(t.subscribers[o])||(t.subscribers[o]=[]),t.subscribers[o].push(l),t.subscribers[o].length-1}),s(this,"unsubscribe",function(o,l,d){d>=0?t.subscribers[o].splice(d,1):l&&(t.subscribers[o]=t.subscribers[o].filter(function(u){return u!==l}))}),s(this,"publish",function(o,l){Array.isArray(o)?o.forEach(function(d){return t._publish(d,l)}):t._publish(o,l)}),s(this,"_publish",function(o,l){var d=t.subscribers[o];!Array.isArray(d)||(o.includes(":pre")?t._handlePrePublish(d,l):t._handlePublish(d,l))}),s(this,"_handlePublish",function(o,l){for(var d=0,u=o.length;d<u;d++){if(t.DS.stopped)return;o[d](l)}}),s(this,"_handlePrePublish",function(o,l){for(var d=o.length;d--;){if(t.DS.stopped)return;o[d](l)}}),this.DS=i},On=function(n){k(t,n);var r=W(t);function t(i){var o,l=i.elements,d=i.className,u=i.hoverClassName,h=i.draggability,v=i.useTransform,p=i.DS;return a(this,t),o=r.call(this),s(C(o),"_initElements",void 0),s(C(o),"_className",void 0),s(C(o),"_hoverClassName",void 0),s(C(o),"_useTransform",void 0),s(C(o),"_draggability",void 0),s(C(o),"init",function(){return o._initElements.forEach(function(S){return o.add(S)})}),s(C(o),"clear",function(){return o.forEach(function(S){return o.delete(S)})}),s(C(o),"_onClick",function(S){return o.DS.publish(["Selectable:click:pre","Selectable:click"],{event:S})}),s(C(o),"_onPointer",function(S){return o.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:S})}),s(C(o),"addAll",function(S){return S.forEach(function(V){return o.add(V)})}),s(C(o),"deleteAll",function(S){return S.forEach(function(V){return o.delete(V)})}),o.DS=p,o._initElements=U(l),o._className=d,o._hoverClassName=u,o._useTransform=v,o._draggability=h,o.DS.subscribe("Interaction:init",o.init),o}return c(t,[{key:"add",value:function(o){return o.classList.add(this._className),o.addEventListener("click",this._onClick),o.addEventListener("mousedown",this._onPointer),o.addEventListener("touchstart",this._onPointer,{passive:!1}),this._draggability&&!this._useTransform&&me({computedStyle:window.getComputedStyle(o),node:o}),x(b(t.prototype),"add",this).call(this,o)}},{key:"delete",value:function(o){return o.classList.remove(this._className),o.classList.remove(this._hoverClassName),o.removeEventListener("click",this._onClick),o.removeEventListener("mousedown",this._onPointer),o.removeEventListener("touchstart",this._onPointer,{passive:!1}),x(b(t.prototype),"delete",this).call(this,o)}},{key:"elements",get:function(){return Array.from(this.values())}}]),t}(A(Set)),zn=function(n){k(t,n);var r=W(t);function t(i){var o,l=i.className,d=i.DS;return a(this,t),o=r.call(this),s(C(o),"_className",void 0),s(C(o),"clear",function(){return o.forEach(function(u){return o.delete(u)})}),s(C(o),"addAll",function(u){return u.forEach(function(h){return o.add(h)})}),s(C(o),"deleteAll",function(u){return u.forEach(function(h){return o.delete(h)})}),o.DS=d,o._className=l,o}return c(t,[{key:"add",value:function(o){if(!x(b(t.prototype),"has",this).call(this,o)){var l={items:this.elements,item:o};return this.DS.publish("Selected:added:pre",l),x(b(t.prototype),"add",this).call(this,o),o.classList.add(this._className),o.style.zIndex="".concat((parseInt(o.style.zIndex)||0)+1),this.DS.publish("Selected:added",l),this}}},{key:"delete",value:function(o){if(!!x(b(t.prototype),"has",this).call(this,o)){var l={items:this.elements,item:o};this.DS.publish("Selected:removed:pre",l);var d=x(b(t.prototype),"delete",this).call(this,o);return o.classList.remove(this._className),o.style.zIndex="".concat((parseInt(o.style.zIndex)||0)-1),this.DS.publish("Selected:removed",l),d}}},{key:"toggle",value:function(o){return this.has(o)?this.delete(o):this.add(o),o}},{key:"elements",get:function(){return Array.from(this.values())}}]),t}(A(Set)),Kn=function(){function n(r){var t=this,i=r.DS,o=r.hoverClassName,l=r.multiSelectToggling;a(this,n),s(this,"_prevSelectedSet",void 0),s(this,"_hoverClassName",void 0),s(this,"_multiSelectToggling",void 0),s(this,"start",function(d){var u=d.event,h=d.isDragging;h||(t._storePrevious(u),t._handleInsideSelection(!0,u))}),s(this,"update",function(d){var u=d.isDragging;u||t.DS.continue||t._handleInsideSelection()}),s(this,"_handleInsideSelection",function(d,u){for(var h=t.DS,v=h.SelectableSet,p=h.SelectorArea,S=h.Selector,V=v.elements.map(function(H){return[H,H.getBoundingClientRect()]}),B=[],T=[],P=0,q=V.length;P<q;P++)!p.isInside(V[P][0],V[P][1])||(ne(V[P][1],S.rect)?B.push(V[P][0]):T.push(V[P][0]));var G=t.DS.stores.KeyStore.isMultiSelectKeyPressed(u)&&t._multiSelectToggling;t.DS.continue||(B.forEach(function(H){return Cn({element:H,force:d,multiSelectionToggle:G,SelectedSet:t.DS.SelectedSet,hoverClassName:t._hoverClassName})}),T.forEach(function(H){return Bn({element:H,force:d,SelectedSet:t.DS.SelectedSet,hoverClassName:t._hoverClassName,PrevSelectedSet:t._prevSelectedSet})}))}),this._hoverClassName=o,this._multiSelectToggling=l,this.DS=i,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return c(n,[{key:"_storePrevious",value:function(t){var i=this.DS,o=i.stores.KeyStore,l=i.SelectedSet;o.isMultiSelectKeyPressed(t)?this._prevSelectedSet=new Set(l):this._prevSelectedSet=new Set}}]),n}(),Hn=function(){function n(r){var t=this,i=r.DS,o=r.selector,l=r.selectorClass,d=r.customStyles;a(this,n),s(this,"_rect",void 0),s(this,"start",function(u){var h=u.isDragging;if(!h){var v=t.DS.stores.PointerStore,p=v.initialValArea;fe(t.HTMLNode,ce(p,1)),t.HTMLNode.style.display="block",t._rect=null}}),s(this,"stop",function(){t.HTMLNode.style.width="0",t.HTMLNode.style.height="0",t.HTMLNode.style.display="none"}),s(this,"update",function(u){var h=u.isDragging;if(!(h||t.DS.continue)){var v=t.DS.stores,p=v.ScrollStore,S=v.PointerStore,V=xn({scrollAmount:p.scrollAmount,initialPointerPos:S.initialValArea,pointerPos:S.currentValArea});fe(t.HTMLNode,V),t._rect=null}}),this.DS=i,this.HTMLNode=o||kn(d),this.HTMLNode.classList.add(l),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return c(n,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),n}(),Fn=function(){function n(r){var t=this,i=r.DS,o=r.selectorAreaClass,l=r.autoScrollSpeed,d=r.overflowTolerance;a(this,n),s(this,"_autoScrollSpeed",void 0),s(this,"_scrollInterval",void 0),s(this,"_rect",void 0),s(this,"currentEdges",[]),s(this,"_overflowTolerance",void 0),s(this,"start",function(){return t.applyElements("append")}),s(this,"applyElements",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",h=document.body?"body":"documentElement",v="".concat(u,"Child");t.HTMLNode[v](t.DS.Selector.HTMLNode),document[h][v](t.HTMLNode)}),s(this,"updatePos",function(){t._rect=null;var u=t.DS.Area.rect,h=t.DS.Area.computedBorder,v=t.HTMLNode.style,p="".concat(u.top+h.top,"px"),S="".concat(u.left+h.left,"px"),V="".concat(u.width,"px"),B="".concat(u.height,"px");v.top!==p&&(v.top=p),v.left!==S&&(v.left=S),v.width!==V&&(v.width=V),v.height!==B&&(v.height=B)}),s(this,"stop",function(u){t.stopAutoScroll(),u&&t.applyElements("remove")}),s(this,"startAutoScroll",function(){t.currentEdges=[],t._scrollInterval=setInterval(function(){return t.handleAutoScroll()},16)}),s(this,"handleAutoScroll",function(){if(!t.DS.continue){var u=t.DS,h=u.stores.PointerStore,v=u.Area;t.currentEdges=de({elementRect:ce(h.currentVal),containerRect:t.rect,tolerance:t._overflowTolerance}),t.currentEdges.length&&v.scroll(t.currentEdges,t._autoScrollSpeed)}}),s(this,"stopAutoScroll",function(){t.currentEdges=[],clearInterval(t._scrollInterval)}),s(this,"isInside",function(u,h){return t.DS.Area.HTMLNode.contains(u)&&t.DS.stores.ScrollStore.canScroll?!0:ne(t.rect,h||u.getBoundingClientRect())}),this._autoScrollSpeed=l,this._overflowTolerance=d,this.DS=i,this.HTMLNode=bn(o),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){t.updatePos(),t.stopAutoScroll()})}return c(n,[{key:"isClicked",value:function(t){var i=this.DS.stores.PointerStore,o=t?i.getPointerPosition(t):i.initialVal;return ne({left:o.x,top:o.y,right:o.x,bottom:o.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),n}(),Rn=function(){function n(r){var t=this,i=r.DS,o=r.multiSelectKeys,l=r.multiSelectMode;a(this,n),s(this,"_multiSelectMode",void 0),s(this,"_multiSelectKeys",void 0),s(this,"_currentValues",new Set),s(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),s(this,"init",function(){document.addEventListener("keydown",t.keydown),document.addEventListener("keyup",t.keyup),window.addEventListener("blur",t.reset)}),s(this,"keydown",function(d){var u=d.key.toLowerCase();t.DS.publish("KeyStore:down:pre",{event:d,key:u}),t._currentValues.add(u),t.DS.publish("KeyStore:down",{event:d,key:u})}),s(this,"keyup",function(d){var u=d.key.toLowerCase();t.DS.publish("KeyStore:up:pre",{event:d,key:u}),t._currentValues.delete(u),t.DS.publish("KeyStore:up",{event:d,key:u})}),s(this,"stop",function(){document.removeEventListener("keydown",t.keydown),document.removeEventListener("keyup",t.reset),window.removeEventListener("blur",t.reset),t.reset()}),s(this,"reset",function(){return t._currentValues.clear()}),this.DS=i,this._multiSelectMode=l,this._multiSelectKeys=o.map(function(d){var u={ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"},h=u[d];return h?(console.warn("[DragSelect] ".concat(d,' is deprecated. Use "').concat(h,'" instead. Act Now!. See docs for more info')),h.toLowerCase()):d.toLowerCase()}),this.DS.subscribe("Interaction:init",this.init)}return c(n,[{key:"isMultiSelectKeyPressed",value:function(t){var i=this;return!!(this._multiSelectMode||this.currentValues.some(function(o){return i._multiSelectKeys.includes(o)})||t&&this._multiSelectKeys.some(function(o){return t[i._keyMapping[o]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),n}(),Un=function(){function n(r){var t=this,i=r.DS;a(this,n),s(this,"_isMouseInteraction",!1),s(this,"_initialValArea",void 0),s(this,"_currentValArea",void 0),s(this,"_lastValArea",void 0),s(this,"_initialVal",void 0),s(this,"_currentVal",void 0),s(this,"_lastVal",void 0),s(this,"_lastTouch",void 0),s(this,"init",function(){document.addEventListener("mousemove",t.update),document.addEventListener("touchmove",t.update,{passive:!1})}),s(this,"getPointerPosition",function(o){return Sn({event:t._normalizedEvent(o)})}),s(this,"update",function(o){!o||(t.DS.publish("PointerStore:updated:pre",{event:o}),t.currentVal=t.getPointerPosition(o),t._isMouseInteraction&&t.DS.publish("PointerStore:updated",{event:o}))}),s(this,"stop",function(){document.removeEventListener("mousemove",t.update),document.removeEventListener("touchmove",t.update,{passive:!1}),setTimeout(function(){return t._isMouseInteraction=!1},100)}),s(this,"reset",function(o){!o||(t.currentVal=t.lastVal=t.getPointerPosition(o),t.stop(),t.init())}),this.DS=i,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(o){var l=o.event;return t.start(l)}),this.DS.subscribe("Interaction:end",function(o){var l=o.event;return t.reset(l)})}return c(n,[{key:"start",value:function(t){!t||(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(t))}},{key:"_normalizedEvent",value:function(t){return"touches"in t&&t.type!=="touchend"&&(this._lastTouch=t),"touches"in t?this._lastTouch.touches[0]:t}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(t){this._initialVal=t,this._initialValArea=t&&j(t,"-",j(R(this.DS.Area.rect),"+",R(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(t){this._currentVal=t,this._currentValArea=t&&j(t,"-",j(R(this.DS.Area.rect),"+",R(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(t){this._lastVal=t,this._lastValArea=t&&j(t,"-",j(R(this.DS.Area.rect),"+",R(this.DS.Area.computedBorder)))}}]),n}(),qn=function(){function n(r){var t=this,i=r.DS,o=r.areaElement,l=r.zoom;a(this,n),s(this,"_initialVal",void 0),s(this,"_currentVal",void 0),s(this,"_areaElement",void 0),s(this,"_canScroll",void 0),s(this,"init",function(){return t._areaElement.addEventListener("scroll",t.update)}),s(this,"start",function(){t._currentVal=t._initialVal=X(t._areaElement),t._areaElement.addEventListener("scroll",t.update)}),s(this,"update",function(){return t._currentVal=X(t._areaElement)}),s(this,"stop",function(){t._areaElement.removeEventListener("scroll",t.update),t._initialVal={x:0,y:0},t._canScroll=null}),s(this,"reset",function(){t.stop(),t.start()}),this._areaElement=o,this.DS=i,this.zoom=l,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return t.start()}),this.DS.subscribe("Interaction:end",function(){return t.reset()})}return c(n,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=_n(this._areaElement)}},{key:"scrollAmount",get:function(){var t=j(this.currentVal,"-",this.initialVal),i=pn(this.zoom),o=j(j(t,"*",i),"-",t);return{x:t.x+o.x,y:t.y+o.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=X(this._areaElement)),this._currentVal}}]),n}(),Wn=function(){function n(r){var t=this,i=r.area,o=i===void 0?document:i,l=r.selectables,d=l===void 0?[]:l,u=r.autoScrollSpeed,h=u===void 0?5:u,v=r.overflowTolerance,p=v===void 0?{x:25,y:25}:v,S=r.zoom,V=S===void 0?1:S,B=r.customStyles,T=B===void 0?!1:B,P=r.multiSelectMode,q=P===void 0?!1:P,G=r.multiSelectToggling,H=G===void 0?!0:G,ge=r.multiSelectKeys,Yn=ge===void 0?["Control","Shift","Meta"]:ge,pe=r.selector,Jn=pe===void 0?void 0:pe,ye=r.draggability,se=ye===void 0?!0:ye,_e=r.immediateDrag,Zn=_e===void 0?!0:_e,be=r.keyboardDrag,Xn=be===void 0?!0:be,Gn=r.dragKeys,ke=r.keyboardDragSpeed,Qn=ke===void 0?10:ke,ve=r.useTransform,we=ve===void 0?!0:ve,Se=r.hoverClass,xe=Se===void 0?"ds-hover":Se,Ee=r.selectableClass,De=Ee===void 0?"ds-selectable":Ee,Ve=r.selectedClass,es=Ve===void 0?"ds-selected":Ve,$e=r.selectorClass,ts=$e===void 0?"ds-selector":$e,Ne=r.selectorAreaClass,rs=Ne===void 0?"ds-selector-area":Ne,os=r.callback,ns=r.onDragMove,ss=r.onDragStartBegin,is=r.onDragStart,as=r.onElementSelect,ls=r.onElementUnselect;a(this,n),s(this,"continue",!1),s(this,"start",function(){t.stopped=!1,t.Interaction.init()}),s(this,"break",function(){return t.continue=!0}),s(this,"getSelection",function(){return t.SelectedSet.elements}),s(this,"getSelectables",function(){return t.SelectableSet.elements}),s(this,"getInitialCursorPosition",function(){return t.stores.PointerStore.initialVal}),s(this,"getCurrentCursorPosition",function(){return t.stores.PointerStore.currentVal}),s(this,"getPreviousCursorPosition",function(){return t.stores.PointerStore.lastVal}),s(this,"getInitialCursorPositionArea",function(){return t.stores.PointerStore.initialValArea}),s(this,"getCurrentCursorPositionArea",function(){return t.stores.PointerStore.currentValArea}),s(this,"getPreviousCursorPositionArea",function(){return t.stores.PointerStore.lastValArea}),s(this,"isMultiSelect",function(cs){return t.stores.KeyStore.isMultiSelectKeyPressed(cs)}),s(this,"isDragging",function(){return t.Interaction.isDragging}),this.PubSub=new Ln({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this._callbacksTemp({callback:os,onDragMove:ns,onDragStart:is,onDragStartBegin:ss,onElementSelect:as,onElementUnselect:ls}),this.stores={PointerStore:new Un({DS:this}),ScrollStore:new qn({DS:this,areaElement:o,zoom:V}),KeyStore:new Rn({DS:this,multiSelectKeys:Yn,multiSelectMode:q})},this.Area=new An({area:o,PS:this.PubSub,zoom:V}),this.Selector=new Hn({DS:this,selector:Jn,selectorClass:ts,customStyles:T}),this.SelectorArea=new Fn({DS:this,selectorAreaClass:rs,autoScrollSpeed:h,overflowTolerance:p}),this.SelectableSet=new On({elements:d,DS:this,className:De,hoverClassName:xe,useTransform:we,draggability:se}),this.SelectedSet=new zn({DS:this,className:es}),this.Selection=new Kn({DS:this,hoverClassName:xe,multiSelectToggling:H}),this.Drag=new Tn({DS:this,draggability:se,useTransform:we,keyboardDrag:Xn,dragKeys:Object.assign({up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},Gn),zoom:V,keyboardDragSpeed:Qn}),this.Interaction=new In({areaElement:o,DS:this,draggability:se,immediateDrag:Zn,selectableClass:De}),jn({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",function(){return t.continue=!1}),this.start()}return c(n,[{key:"_callbacksTemp",value:function(t){var i=t.callback,o=t.onDragMove,l=t.onDragStart,d=t.onDragStartBegin,u=t.onElementSelect,h=t.onElementUnselect,v=function(S,V){return console.warn("[DragSelect] ".concat(S,' is deprecated. Use DragSelect.subscribe("').concat(V,'", (callbackObject) => {}) instead. Act Now! See docs for more info'))};i&&(v("callback","callback"),this.subscribe("callback",function(p){var S=p.items;p.item;var V=p.event;return i(S,V)})),o&&(v("onDragMove","dragmove"),this.subscribe("dragmove",function(p){p.items,p.item;var S=p.event;return o(S)})),l&&(v("onDragStart","dragstart"),this.subscribe("dragstart",function(p){p.items,p.item;var S=p.event;return l(S)})),d&&(v("onDragStartBegin","dragstart"),this.subscribe("dragstart",function(p){p.items,p.item;var S=p.event;return d(S)})),u&&(v("onElementSelect","elementselect"),this.subscribe("elementselect",function(p){p.items;var S=p.item,V=p.event;return u(S,V)})),h&&(v("onElementUnselect","elementunselect"),this.subscribe("elementunselect",function(p){p.items;var S=p.item,V=p.event;return h(S,V)}))}},{key:"stop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;o&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(t),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),t&&this.SelectableSet.clear(),i&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(U(t)),o||this.addSelectables(t),i&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(U(t)),o&&this.removeSelectables(t),i&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return U(t).forEach(function(d){return i.SelectedSet.has(d)?i.removeSelection(t,o,l):i.addSelection(t,o,l)}),o&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(t,i,o),this.getSelection()}},{key:"clearSelection",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=U(t);return this.SelectableSet.addAll(o),i&&this.SelectedSet.addAll(o),t}},{key:"setSelectables",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.removeSelectables(t,i),this.addSelectables(t,o)}},{key:"removeSelectables",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.SelectableSet.deleteAll(U(t)),i&&this.removeSelection(t),t}},{key:"getCursorPositionDifference",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;console.warn("[DragSelect] Using .getCursorPositionDifference is deprecated. Calculate yourself instead. i.e. `.getCurrentCursorPosition().x - .getInitialCursorPosition().x`");var o=i?this.getCurrentCursorPositionArea():this.getCurrentCursorPosition(),l=t?i?this.getPreviousCursorPositionArea():this.getPreviousCursorPosition():i?this.getInitialCursorPositionArea():this.getInitialCursorPosition();return j(o,"-",l)}}]),n}();return Wn})})(ae);const Je=ae.exports,Ze=(f,m,a,g,c)=>(m=Math,a=m.log,g=1024,c=a(f)/a(g)|0,f/m.pow(g,c)).toFixed(0)+" "+(c?"KMGTPEZY"[--c]+"iB":"B"),Xe=(f,m="en-US")=>new Date(f*1e3).toLocaleString(m),Ge={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Qe=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)],et={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},tt=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)],Q=Object.assign({name:"VFSortIcon"},{props:{direction:String},setup(f){return(m,a)=>(e.openBlock(),e.createElementBlock("div",null,[f.direction=="down"?(e.openBlock(),e.createElementBlock("svg",Ge,Qe)):e.createCommentVNode("",!0),f.direction=="up"?(e.openBlock(),e.createElementBlock("svg",et,tt)):e.createCommentVNode("",!0)]))}}),rt={class:"relative h-full"},ot={key:0,class:"grid grid-cols-12 border-b border-neutral-300 dark:border-gray-700 text-xs select-none"},nt=e.createTextVNode(" Name "),st=e.createTextVNode(" Size "),it=e.createTextVNode(" Date "),at={class:"absolute"},lt=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),ct={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},dt=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],ut={class:"grid grid-cols-12 items-center"},mt={class:"flex col-span-7 items-center"},ht={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ft=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],gt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},pt=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],yt={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},_t={class:"col-span-2 text-center"},bt={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},kt=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],vt={class:"relative"},wt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},St=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],xt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Et=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Dt={class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},Vt={class:"break-all"},$t=Object.assign({name:"VFExplorer"},{props:{view:String,data:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=x=>x==null?void 0:x.substring(0,3),s=x=>x.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),y=e.ref(null),_=e.ref(null),k=e.ref(0),b=e.ref(null),E=x=>{x.type=="dir"?a.emit("vf-fetch",{q:"index",adapter:m.data.adapter,path:x.path}):a.emit("vf-modal-show",{type:"preview",adapter:m.data.adapter,item:x})},w=e.reactive({active:!1,column:"",order:""}),$=(x=!0)=>{let N=[...m.data.files],D=w.column,L=w.order=="asc"?1:-1;if(!x)return N;const M=(z,K)=>typeof z=="string"&&typeof K=="string"?z.toLowerCase().localeCompare(K.toLowerCase()):z<K?-1:z>K?1:0;return w.active&&(N=N.slice().sort((z,K)=>M(z[D],K[D])*L)),N},I=x=>{w.active&&w.column==x?(w.active=w.order=="asc",w.column=x,w.order="desc"):(w.active=!0,w.column=x,w.order="asc")},A=()=>b.value.getSelection().map(x=>JSON.parse(x.dataset.item)),C=(x,N)=>{if(x.altKey||x.ctrlKey||x.metaKey)return x.preventDefault(),!1;x.dataTransfer.setDragImage(_.value,0,15),x.dataTransfer.effectAllowed="all",x.dataTransfer.dropEffect="copy",x.dataTransfer.setData("items",JSON.stringify(A()))},Z=(x,N)=>{x.preventDefault();let D=JSON.parse(x.dataTransfer.getData("items"));if(D.find(L=>L.storage!=g("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}a.emit("vf-modal-show",{type:"move",items:{from:D,to:N}})},W=(x,N)=>{x.preventDefault(),!N||N.type!=="dir"||b.value.getSelection().find(D=>D==x.currentTarget)?(x.dataTransfer.dropEffect="none",x.dataTransfer.effectAllowed="none"):x.dataTransfer.dropEffect="copy"},te=()=>{b.value=new Je({area:y.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),a.on("vf-explorer-update",()=>e.nextTick(()=>{b.value.clearSelection(),b.value.setSelectables(document.getElementsByClassName("vf-item"))})),b.value.subscribe("predragstart",({event:x,isDragging:N})=>{if(N)k.value=b.value.getSelection().length,b.value.break();else{const D=x.target.offsetWidth-x.offsetX,L=x.target.offsetHeight-x.offsetY;D<15&&L<15&&(b.value.clearSelection(),b.value.break())}}),b.value.subscribe("predragmove",({isDragging:x})=>{x&&b.value.break()}),b.value.subscribe("callback",({items:x,event:N,isDragging:D})=>{a.emit("vf-nodes-selected",A()),k.value=b.value.getSelection().length})};return e.onMounted(te),e.onMounted(()=>{e.watch(()=>m.view,()=>a.emit("vf-explorer-update"))}),(x,N)=>(e.openBlock(),e.createElementBlock("div",rt,[f.view=="list"?(e.openBlock(),e.createElementBlock("div",ot,[e.createElementVNode("div",{onClick:N[0]||(N[0]=D=>I("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center pl-1"},[nt,e.withDirectives(e.createVNode(Q,{direction:w.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,w.active&&w.column=="basename"]])]),e.createElementVNode("div",{onClick:N[1]||(N[1]=D=>I("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center justify-center border-l border-r dark:border-gray-700"},[st,e.withDirectives(e.createVNode(Q,{direction:w.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,w.active&&w.column=="file_size"]])]),e.createElementVNode("div",{onClick:N[2]||(N[2]=D=>I("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 flex items-center justify-center"},[it,e.withDirectives(e.createVNode(Q,{direction:w.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,w.active&&w.column=="last_modified"]])])])):e.createCommentVNode("",!0),e.createElementVNode("div",at,[e.createElementVNode("div",{ref:D=>_.value=D,class:"absolute -z-50"},[lt,e.createElementVNode("div",ct,e.toDisplayString(k.value),1)],512)]),e.createElementVNode("div",{class:"h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto resize-y p-1 z-0",ref:D=>y.value=D,onContextmenu:N[3]||(N[3]=e.withModifiers(D=>e.unref(a).emit("vf-contextmenu-show",{event:D,area:y.value,items:A()}),["self","prevent"]))},[f.view=="list"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList($(),(D,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:M=>E(D),onContextmenu:e.withModifiers(M=>e.unref(a).emit("vf-contextmenu-show",{event:M,area:y.value,items:A(),target:D}),["prevent"]),onDragstart:M=>C(M),onDragover:M=>W(M,D),onDrop:M=>Z(M,D),class:"vf-item grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none","data-type":D.type,"data-item":JSON.stringify(D),"data-index":L},[e.createElementVNode("div",ut,[e.createElementVNode("div",mt,[D.type=="dir"?(e.openBlock(),e.createElementBlock("svg",ht,ft)):(e.openBlock(),e.createElementBlock("svg",gt,pt)),e.createElementVNode("span",yt,e.toDisplayString(D.basename),1)]),e.createElementVNode("div",_t,e.toDisplayString(D.file_size?e.unref(Ze)(D.file_size):""),1),e.createElementVNode("div",bt,e.toDisplayString(e.unref(Xe)(D.last_modified)),1)])],40,dt))),256)):e.createCommentVNode("",!0),f.view=="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList($(!1),(D,L)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:M=>E(D),onContextmenu:e.withModifiers(M=>e.unref(a).emit("vf-contextmenu-show",{event:M,area:y.value,items:A(),target:D}),["prevent"]),onDragstart:M=>C(M),onDragover:M=>W(M,D),onDrop:M=>Z(M,D),class:"vf-item border border-transparent hover:bg-neutral-50 m-0.5 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 md:h-24 text-center justify-center select-none","data-type":D.type,"data-item":JSON.stringify(D),"data-index":L},[e.createElementVNode("div",null,[e.createElementVNode("div",vt,[D.type=="dir"?(e.openBlock(),e.createElementBlock("svg",wt,St)):(e.openBlock(),e.createElementBlock("svg",xt,Et)),e.createElementVNode("div",Dt,e.toDisplayString(c(D.extension)),1)]),e.createElementVNode("span",Vt,e.toDisplayString(s(D.basename)),1)])],40,kt))),256)):e.createCommentVNode("",!0)],544)]))}}),Nt={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Ct={class:"flex leading-5 items-center"},Bt=e.createElementVNode("div",{class:"mx-2","aria-label":"Storage","data-microtip-position":"top",role:"tooltip"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})])],-1),Mt=["value"],Pt={class:"ml-3"},jt={class:"flex leading-5 items-center"},At=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)],Tt=Object.assign({name:"VFStatusbar"},{props:{data:Object},setup(f){var k;const m=f,a=inject("emitter"),{getStore:g,setStore:c}=inject("storage"),s=e.ref(0),y=e.ref((k=g("adapter"))!=null?k:m.data.adapter),_=()=>{a.emit("vf-fetch",{q:"index",adapter:y.value}),c("adapter",y.value)};return a.on("vf-nodes-selected",b=>{s.value=b.length}),(b,E)=>(e.openBlock(),e.createElementBlock("div",Nt,[e.createElementVNode("div",Ct,[Bt,e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":E[0]||(E[0]=w=>y.value=w),onChange:_,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.data.storages,w=>(e.openBlock(),e.createElementBlock("option",{value:w},e.toDisplayString(w),9,Mt))),256))],544),[[e.vModelSelect,y.value]]),e.createElementVNode("span",Pt,e.toDisplayString(s.value>0?s.value+" items selected.":""),1)]),e.createElementVNode("div",jt,[e.createElementVNode("span",{onClick:E[1]||(E[1]=w=>e.unref(a).emit("vf-modal-show",{type:"message",title:"Vuefinder 1.0",message:"Vuefinder is a file manager component for vue 3."}))},At)])]))}}),It={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none"},Lt=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)],Ot={class:"flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},zt=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1)],Kt={class:"flex leading-5"},Ht=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Ft=["title","onClick"],Rt=Object.assign({name:"VFBreadcrumb"},{props:{data:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(null),s=e.ref([]);a.on("vf-explorer-update",k=>{var w;let b=[],E=[];c.value=(w=m.data.dirname)!=null?w:g("adapter","local")+"://",c.value.length==0&&(s.value=[]),c.value.replace(g("adapter","local")+"://","").split("/").forEach(function($){b.push($),b.join("/")!=""&&E.push({basename:$,name:$,path:g("adapter","local")+"://"+b.join("/"),type:"dir"})}),E.length>4&&(E=E.slice(-5),E[0].name=".."),s.value=E});const y=k=>{var E;k.preventDefault();let b=JSON.parse(k.dataTransfer.getData("items"));if(b.find(w=>w.storage!=g("adapter","local"))){alert("Moving items between different storages is not supported yet.");return}a.emit("vf-modal-show",{type:"move",items:{from:b,to:(E=s.value[s.value.length-2])!=null?E:{path:g("adapter","local")+"://"}}})},_=k=>{k.preventDefault(),s.value.length<1?(k.dataTransfer.dropEffect="none",k.dataTransfer.effectAllowed="none"):k.dataTransfer.dropEffect="copy"};return(k,b)=>(e.openBlock(),e.createElementBlock("div",It,[(e.openBlock(),e.createElementBlock("svg",{onDragover:b[0]||(b[0]=E=>_(E)),onDrop:b[1]||(b[1]=E=>y(E)),onClick:b[2]||(b[2]=E=>{var w,$;return!s.value.length||e.unref(a).emit("vf-fetch",{q:"index",adapter:f.data.adapter,path:($=(w=s.value[s.value.length-2])==null?void 0:w.path)!=null?$:e.unref(g)("adapter","local")+"://"})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",s.value.length?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Lt,34)),e.createElementVNode("div",Ot,[(e.openBlock(),e.createElementBlock("svg",{onClick:b[3]||(b[3]=E=>e.unref(a).emit("vf-fetch",{q:"index",adapter:f.data.adapter})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},zt)),e.createElementVNode("div",Kt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(E,w)=>(e.openBlock(),e.createElementBlock("div",{key:w},[Ht,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:E.basename,onClick:$=>e.unref(a).emit("vf-fetch",{q:"index",adapter:f.data.adapter,path:E.path})},e.toDisplayString(E.name),9,Ft)]))),128))])])]))}}),Ut=["onClick"],qt=e.createElementVNode("span",{class:"px-1"},null,-1),Wt=Object.assign({name:"VFContextMenu"},{props:{current:Object},setup(f){const m=f,a=inject("emitter"),g=e.ref(null),c=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),s=e.ref([]);a.on("vf-context-selected",b=>{s.value=b});const y={newfolder:{title:"New Folder",action:()=>{a.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:"Delete",action:()=>{a.emit("vf-modal-show",{type:"delete",items:s})}},refresh:{title:"Refresh",action:()=>{a.emit("vf-fetch",{q:"index",adapter:m.current.adapter,path:m.current.dirname})}},preview:{title:"Preview",action:()=>{a.emit("vf-modal-show",{type:"preview",adapter:m.current.adapter,item:s.value[0]})}},archive:{title:"Archive",action:()=>{a.emit("vf-modal-show",{type:"archive",items:s})}},unarchive:{title:"Unarchive",action:()=>{a.emit("vf-modal-show",{type:"unarchive",items:s})}},rename:{title:"Rename",action:()=>{a.emit("vf-modal-show",{type:"rename",items:s})}}},_=b=>{a.emit("vf-contextmenu-hide"),b.action()};a.on("vf-contextmenu-show",({event:b,area:E,items:w,target:$=null})=>{c.items=[],$?w.length>1&&w.some(I=>I.path===$.path)?(c.items.push(y.refresh),c.items.push(y.archive),c.items.push(y.delete),a.emit("vf-context-selected",w),console.log(w.length+" selected (more than 1 item.)")):(c.items.push(y.refresh),c.items.push(y.preview),c.items.push(y.rename),console.log($),$.mime_type=="application/zip"?c.items.push(y.unarchive):c.items.push(y.archive),c.items.push(y.delete),a.emit("vf-context-selected",[$]),console.log($.type+" is selected")):(c.items.push(y.refresh),c.items.push(y.newfolder),a.emit("vf-context-selected",[]),console.log("no files selected")),k(b,E)}),a.on("vf-contextmenu-hide",()=>{c.active=!1});const k=(b,E)=>{c.active=!0,e.nextTick(()=>{let w=E.getBoundingClientRect(),$=b.pageX,I=b.pageY,A=g.value.offsetHeight,C=g.value.offsetWidth;$=w.right-b.pageX+window.scrollX<C?$-C:$,I=w.bottom-b.pageY+window.scrollY<A?I-A:I,c.positions={left:$+"px",top:I+"px"}})};return(b,E)=>c.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"absolute text-xs bg-neutral-50 dark:bg-gray-800 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref:w=>g.value=w,style:e.normalizeStyle(c.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.items,w=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:w.title,onClick:$=>_(w)},[qt,e.createElementVNode("span",null,e.toDisplayString(w.title),1)],8,Ut))),128))],4)):e.createCommentVNode("",!0)}}),Yt=Object.assign({name:"VueFinder"},{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1}},setup(f){const m=f,a=Ce();e.provide("emitter",a);const{setStore:g,getStore:c}=ie(m.id);e.provide("storage",ie(m.id));const s=e.reactive({adapter:"local",storages:[],dirname:".",files:[]}),y=e.ref(c("viewport","grid")),_=e.ref(c("darkMode",m.dark));a.on("vf-darkMode-toggle",()=>{_.value=!_.value,g("darkMode",_.value)}),a.on("vf-view-toggle",E=>{y.value=E});const k=e.reactive({active:!1,type:"delete",data:{}});a.on("vf-modal-close",()=>{k.active=!1}),a.on("vf-modal-show",E=>{k.active=!0,k.type=E.type,E.url=m.url,k.data=E});const b=E=>{Object.assign(s,E),a.emit("vf-nodes-selected",{}),a.emit("vf-explorer-update",E)};return a.on("vf-fetch",E=>{F(m.url,{params:E}).then(w=>{a.emit("vf-modal-close"),b(w)})}),e.onMounted(()=>{a.emit("vf-fetch",{q:"index",adapter:c("adapter",s.adapter)})}),(E,w)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(_.value?"dark":"")},[e.createElementVNode("div",{class:"relative border rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none",onMousedown:w[0]||(w[0]=$=>e.unref(a).emit("vf-contextmenu-hide"))},[e.createVNode(We),e.createVNode(Rt,{data:s},null,8,["data"]),e.createVNode($t,{view:y.value,data:s},null,8,["view","data"]),e.createVNode(Tt,{data:s},null,8,["data"])],32),k.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+k.type),{key:0,selection:k.data,current:s},null,8,["selection","current"])):e.createCommentVNode("",!0),e.createVNode(Wt,{current:s},null,8,["current"])],2))}}),Jt=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Zt={class:"fixed z-10 inset-0 overflow-y-auto"},Xt={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full"},Gt={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Qt={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},O={__name:"ModalLayout",setup(f){const m=inject("emitter");return e.onMounted(()=>{const a=document.querySelector(".v-f-modal input");a&&a.focus()}),(a,g)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-20","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:g[1]||(g[1]=e.withKeys(c=>e.unref(m).emit("vf-modal-close"),["esc"])),tabindex:"0"},[Jt,e.createElementVNode("div",Zt,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onClick:g[0]||(g[0]=e.withModifiers(c=>e.unref(m).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",Xt,[e.createElementVNode("div",Gt,[e.renderSlot(a.$slots,"default")]),e.createElementVNode("div",Qt,[e.renderSlot(a.$slots,"buttons")])])])])],32))}},er={class:"sm:flex sm:items-start"},tr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),rr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},or=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Delete files",-1),nr={class:"mt-2"},sr=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete these files?",-1),ir={class:"flex text-sm text-gray-800 dark:text-gray-400"},ar={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},lr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],cr={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},dr=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],ur={class:"ml-1.5"},mr=e.createElementVNode("div",{class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},"This action cannot be undone.",-1),hr=Object.assign({name:"VFModalDelete"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(m.selection.items),s=()=>{c.value.length&&a.emit("vf-fetch",{q:"delete",adapter:g("adapter","local"),path:m.current.dirname,items:JSON.stringify(c.value.map(({path:y,type:_})=>({path:y,type:_})))})};return(y,_)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, delete!"),e.createElementVNode("button",{type:"button",onClick:_[0]||(_[0]=k=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel"),mr]),default:e.withCtx(()=>[e.createElementVNode("div",er,[tr,e.createElementVNode("div",rr,[or,e.createElementVNode("div",nr,[sr,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,k=>(e.openBlock(),e.createElementBlock("p",ir,[k.type=="dir"?(e.openBlock(),e.createElementBlock("svg",ar,lr)):(e.openBlock(),e.createElementBlock("svg",cr,dr)),e.createElementVNode("span",ur,e.toDisplayString(k.basename),1)]))),256))])])])]),_:1}))}}),fr={class:"sm:flex sm:items-start"},gr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),pr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},yr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},_r={class:"mt-2"},br={class:"text-sm text-gray-500"},kr=Object.assign({name:"VFModalMessage"},{props:{selection:Object},setup(f){const m=inject("emitter");return(a,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g[0]||(g[0]=c=>e.unref(m).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close")]),default:e.withCtx(()=>{var c,s,y,_;return[e.createElementVNode("div",fr,[gr,e.createElementVNode("div",pr,[e.createElementVNode("h3",yr,e.toDisplayString((s=(c=f.selection)==null?void 0:c.title)!=null?s:"Title"),1),e.createElementVNode("div",_r,[e.createElementVNode("p",br,e.toDisplayString((_=(y=f.selection)==null?void 0:y.message)!=null?_:"Message")+".",1)])])])]}),_:1}))}}),vr={class:"sm:flex sm:items-start"},wr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),Sr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},xr=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New Folder",-1),Er={class:"mt-2"},Dr=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new folder",-1),Vr=["onKeyup"],$r=Object.assign({name:"VFModalNewFolder"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(""),s=()=>{c.value!=""&&a.emit("vf-fetch",{q:"newfolder",adapter:g("adapter","local"),path:m.current.dirname,name:c.value})};return(y,_)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:_[1]||(_[1]=k=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",vr,[wr,e.createElementVNode("div",Sr,[xr,e.createElementVNode("div",Er,[Dr,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":_[0]||(_[0]=k=>c.value=k),onKeyup:e.withKeys(s,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Folder Name",type:"text"},null,40,Vr),[[e.vModelText,c.value]])])])])]),_:1}))}}),Nr={class:"sm:flex sm:items-start"},Cr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Br={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Mr=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"New File",-1),Pr={class:"mt-2"},jr=e.createElementVNode("p",{class:"text-sm text-gray-500"},"Create a new file",-1),Ar=["onKeyup"],Tr=Object.assign({name:"VFModalNewFile"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(""),s=()=>{c.value!=""&&a.emit("vf-fetch",{q:"newfile",adapter:g("adapter","local"),path:m.current.dirname,name:c.value})};return(y,_)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Create!"),e.createElementVNode("button",{type:"button",onClick:_[1]||(_[1]=k=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Nr,[Cr,e.createElementVNode("div",Br,[Mr,e.createElementVNode("div",Pr,[jr,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":_[0]||(_[0]=k=>c.value=k),onKeyup:e.withKeys(s,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"File Name",type:"text"},null,40,Ar),[[e.vModelText,c.value]])])])])]),_:1}))}}),Ir={class:"border font-normal border-gray-200 dark:border-gray-700/50 p-2 rounded min-h-[100px] text-sm"},Lr={__name:"Text",props:{selection:Object},emits:["load"],setup(f,{emit:m}){const a=f,g=e.ref("");return e.onMounted(()=>{F(a.selection.url,{params:{q:"preview",adapter:a.selection.adapter,path:a.selection.item.path},json:!1}).then(c=>c.text()).then(c=>{g.value=c,m("load")})}),(c,s)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("pre",Ir,e.toDisplayString(g.value),1)]))}},J=f=>Object.entries(f).map(m=>m.map(encodeURIComponent).join("=")).join("&"),Or=["src"],zr={__name:"Image",props:{selection:Object},emits:["load"],setup(f,{emit:m}){const a=f,g=()=>a.selection.url+"?"+J({q:"preview",adapter:a.selection.adapter,path:a.selection.item.path});return onMounted(()=>{m("load")}),(c,s)=>(e.openBlock(),e.createElementBlock("img",{class:"max-w-[350px] max-h-[350px]",src:g(),alt:""},null,8,Or))}},Kr={__name:"Default",emits:["load"],setup(f,{emit:m}){return e.onMounted(()=>{m("load")}),(a,g)=>(e.openBlock(),e.createElementBlock("div",null," Default view.. "))}},Hr={class:"w-full",preload:"",controls:""},Fr=["src"],Rr=e.createTextVNode(" Your browser does not support the video tag. "),Ur={__name:"Video",props:{selection:Object},emits:["load"],setup(f,{emit:m}){const a=f,g=()=>a.selection.url+"?"+J({q:"preview",adapter:a.selection.adapter,path:a.selection.item.path});return e.onMounted(()=>{m("load")}),(c,s)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("video",Hr,[e.createElementVNode("source",{src:g(),type:"video/mp4"},null,8,Fr),Rr])]))}},qr={class:"w-full",controls:""},Wr=["src"],Yr=e.createTextVNode(" Your browser does not support the audio element. "),Jr={__name:"Audio",props:{selection:Object},emits:["load"],setup(f,{emit:m}){const a=f,g=()=>a.selection.url+"?"+J({q:"preview",adapter:a.selection.adapter,path:a.selection.item.path});return e.onMounted(()=>{m("load")}),(c,s)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("audio",qr,[e.createElementVNode("source",{src:g(),type:"audio/mpeg"},null,8,Wr),Yr])]))}},Zr=["data"],Xr=["src"],Gr={__name:"Pdf",props:{selection:Object},emits:["load"],setup(f,{emit:m}){const a=f,g=()=>a.selection.url+"?"+J({q:"preview",adapter:a.selection.adapter,path:a.selection.item.path});return e.onMounted(()=>{m("load")}),(c,s)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("object",{data:g(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:g(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,Xr)],8,Zr)]))}},Qr={class:"sm:flex sm:items-start"},eo=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),to={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ro={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},oo={class:"mt-2"},no={class:"text-gray-700 dark:text-gray-200 text-sm"},so={key:0,class:"flex leading-5"},io=[e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e.createElementVNode("span",null,"Loading",-1)],ao=Object.assign({name:"VFModalPreview"},{props:{selection:Object},setup(f){const m=f,a=inject("emitter"),g=e.ref(!1),c=s=>{var y;return((y=m.selection.item.mime_type)!=null?y:"").startsWith(s)};return(s,y)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y[6]||(y[6]=_=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Close")]),default:e.withCtx(()=>[e.createElementVNode("div",Qr,[eo,e.createElementVNode("div",to,[e.createElementVNode("h3",ro,e.toDisplayString(f.selection.item.basename),1),e.createElementVNode("div",oo,[c("text")?(e.openBlock(),e.createBlock(Lr,{key:0,selection:f.selection,onLoad:y[0]||(y[0]=_=>g.value=!0)},null,8,["selection"])):c("image")?(e.openBlock(),e.createBlock(zr,{key:1,selection:f.selection,onLoad:y[1]||(y[1]=_=>g.value=!0)},null,8,["selection"])):c("video")?(e.openBlock(),e.createBlock(Ur,{key:2,selection:f.selection,onLoad:y[2]||(y[2]=_=>g.value=!0)},null,8,["selection"])):c("audio")?(e.openBlock(),e.createBlock(Jr,{key:3,selection:f.selection,onLoad:y[3]||(y[3]=_=>g.value=!0)},null,8,["selection"])):c("application/pdf")?(e.openBlock(),e.createBlock(Gr,{key:4,selection:f.selection,onLoad:y[4]||(y[4]=_=>g.value=!0)},null,8,["selection"])):(e.openBlock(),e.createBlock(Kr,{key:5,selection:f.selection,onLoad:y[5]||(y[5]=_=>g.value=!0)},null,8,["selection"]))]),e.createElementVNode("div",no,[e.createElementVNode("p",null,e.toDisplayString(f.selection.item.path),1),e.createElementVNode("p",null,"mime_type: "+e.toDisplayString(f.selection.item.mime_type),1),g.value==!1?(e.openBlock(),e.createElementBlock("div",so,io)):e.createCommentVNode("",!0)])])])]),_:1}))}}),lo={class:"sm:flex sm:items-start"},co=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),uo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},mo={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ho={class:"mt-2"},fo={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},go={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},po=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],yo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_o=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],bo={class:"ml-1.5"},ko=["onKeyup"],vo=Object.assign({name:"VFModalRename"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(m.selection.items[0]),s=e.ref(m.selection.items[0].basename),y=()=>{s.value!=""&&a.emit("vf-fetch",{q:"rename",adapter:g("adapter","local"),path:m.current.dirname,item:c.value.path,name:s.value})};return(_,k)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Rename!"),e.createElementVNode("button",{type:"button",onClick:k[1]||(k[1]=b=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",lo,[co,e.createElementVNode("div",uo,[e.createElementVNode("h3",mo,"Rename your "+e.toDisplayString(c.value.type=="dir"?"folder":"file"),1),e.createElementVNode("div",ho,[e.createElementVNode("p",fo,[c.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",go,po)):(e.openBlock(),e.createElementBlock("svg",yo,_o)),e.createElementVNode("span",bo,e.toDisplayString(c.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":k[0]||(k[0]=b=>s.value=b),onKeyup:e.withKeys(y,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,ko),[[e.vModelText,s.value]])])])])]),_:1}))}}),wo=e.createElementVNode("div",{class:"sm:flex sm:items-start"},[e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])]),e.createElementVNode("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Upload files"),e.createElementVNode("div",{class:"mt-2"},[e.createElementVNode("p",{class:"text-sm text-gray-500"},"Upload files ")])])],-1),So=e.createElementVNode("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, upload!",-1),xo=Object.assign({name:"VFModalUpload"},{setup(f){const m=inject("emitter");return(a,g)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[So,e.createElementVNode("button",{type:"button",onClick:g[0]||(g[0]=c=>e.unref(m).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[wo]),_:1}))}}),Eo={class:"sm:flex sm:items-start"},Do=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})])],-1),Vo={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},$o=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Archive files",-1),No={class:"mt-2"},Co={class:"flex text-sm text-gray-800 dark:text-gray-400"},Bo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Mo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Po={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},jo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ao={class:"ml-1.5"},To=e.createElementVNode("p",{class:"my-1 text-sm text-gray-500"},"Archive name. (.zip file will be created)",-1),Io=["onKeyup"],Lo=Object.assign({name:"VFModalArchive"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(""),s=e.ref(m.selection.items),y=()=>{s.value.length&&a.emit("vf-fetch",{q:"archive",adapter:g("adapter","local"),path:m.current.dirname,items:JSON.stringify(s.value.map(({path:_,type:k})=>({path:_,type:k}))),name:c.value})};return(_,k)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Archive!"),e.createElementVNode("button",{type:"button",onClick:k[1]||(k[1]=b=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Eo,[Do,e.createElementVNode("div",Vo,[$o,e.createElementVNode("div",No,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,b=>(e.openBlock(),e.createElementBlock("p",Co,[b.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Bo,Mo)):(e.openBlock(),e.createElementBlock("svg",Po,jo)),e.createElementVNode("span",Ao,e.toDisplayString(b.basename),1)]))),256)),To,e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":k[0]||(k[0]=b=>c.value=b),onKeyup:e.withKeys(y,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-500 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,Io),[[e.vModelText,c.value]])])])])]),_:1}))}}),Oo={class:"sm:flex sm:items-start"},zo=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])],-1),Ko={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ho=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Archive files",-1),Fo={class:"mt-2"},Ro={class:"flex text-sm text-gray-800 dark:text-gray-400"},Uo={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},qo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Wo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Yo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Jo={class:"ml-1.5"},Zo={class:"my-1 text-sm text-gray-500"},Xo=Object.assign({name:"VFModalUnarchive"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage");e.ref("");const c=e.ref(m.selection.items[0]),s=e.ref([]),y=()=>{a.emit("vf-fetch",{q:"unarchive",adapter:g("adapter","local"),path:m.current.dirname,item:c.value.path})};return(_,k)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Unarchive!"),e.createElementVNode("button",{type:"button",onClick:k[0]||(k[0]=b=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Oo,[zo,e.createElementVNode("div",Ko,[Ho,e.createElementVNode("div",Fo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,b=>(e.openBlock(),e.createElementBlock("p",Ro,[b.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Uo,qo)):(e.openBlock(),e.createElementBlock("svg",Wo,Yo)),e.createElementVNode("span",Jo,e.toDisplayString(b.basename),1)]))),256)),e.createElementVNode("p",Zo,"Archive will be unarchived at ("+e.toDisplayString(f.current.dirname)+")",1)])])])]),_:1}))}}),Go={class:"sm:flex sm:items-start"},Qo=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),en={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},tn=e.createElementVNode("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},"Move files",-1),rn={class:"mt-2"},on={class:"flex text-sm text-gray-800 dark:text-gray-400"},nn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},sn=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],an={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ln=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],cn={class:"ml-1.5"},dn=e.createElementVNode("p",{class:"text-sm text-gray-500 pb-1 pt-3"},"Are you sure you want to move these files to ?",-1),un={class:"flex text-sm text-gray-800 dark:text-gray-400"},mn=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),hn={class:"ml-1.5 overflow-auto"},ee={VueFinder:Yt,...Object.freeze(Object.defineProperty({__proto__:null,ModalDelete:hr,ModalMessage:kr,ModalNewFolder:$r,ModalNewFile:Tr,ModalPreview:ao,ModalRename:vo,ModalUpload:xo,ModalArchive:Lo,ModalUnarchive:Xo,ModalMove:Object.assign({name:"VFModalMove"},{props:{selection:Object,current:Object},setup(f){const m=f,a=inject("emitter"),{getStore:g}=inject("storage"),c=e.ref(m.selection.items.from),s=()=>{c.value.length&&a.emit("vf-fetch",{q:"move",adapter:g("adapter","local"),path:m.current.dirname,items:JSON.stringify(c.value.map(({path:y,type:_})=>({path:y,type:_}))),item:m.selection.items.to.path})};return(y,_)=>(e.openBlock(),e.createBlock(O,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},"Yes, move!"),e.createElementVNode("button",{type:"button",onClick:_[0]||(_[0]=k=>e.unref(a).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Cancel")]),default:e.withCtx(()=>[e.createElementVNode("div",Go,[Qo,e.createElementVNode("div",en,[tn,e.createElementVNode("div",rn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,k=>(e.openBlock(),e.createElementBlock("p",on,[k.type=="dir"?(e.openBlock(),e.createElementBlock("svg",nn,sn)):(e.openBlock(),e.createElementBlock("svg",an,ln)),e.createElementVNode("span",cn,e.toDisplayString(k.path),1)]))),256)),dn,e.createElementVNode("p",un,[mn,e.createElementVNode("span",hn,e.toDisplayString(f.selection.items.to.path),1)])])])])]),_:1}))}})},Symbol.toStringTag,{value:"Module"}))},ii="",ai="";return{install(f){for(const m in ee)if(ee.hasOwnProperty(m)){const a=ee[m];f.component(a.name,a)}}}});
